"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/gantt-task-react";
exports.ids = ["vendor-chunks/gantt-task-react"];
exports.modules = {

/***/ "(ssr)/./node_modules/gantt-task-react/dist/index.modern.js":
/*!************************************************************!*\
  !*** ./node_modules/gantt-task-react/dist/index.modern.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Gantt: () => (/* binding */ Gantt),\n/* harmony export */   ViewMode: () => (/* binding */ ViewMode)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar ViewMode;\n\n(function (ViewMode) {\n  ViewMode[\"Hour\"] = \"Hour\";\n  ViewMode[\"QuarterDay\"] = \"Quarter Day\";\n  ViewMode[\"HalfDay\"] = \"Half Day\";\n  ViewMode[\"Day\"] = \"Day\";\n  ViewMode[\"Week\"] = \"Week\";\n  ViewMode[\"Month\"] = \"Month\";\n  ViewMode[\"Year\"] = \"Year\";\n})(ViewMode || (ViewMode = {}));\n\nvar intlDTCache = {};\nvar getCachedDateTimeFormat = function getCachedDateTimeFormat(locString, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  var key = JSON.stringify([locString, opts]);\n  var dtf = intlDTCache[key];\n\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n\n  return dtf;\n};\nvar addToDate = function addToDate(date, quantity, scale) {\n  var newDate = new Date(date.getFullYear() + (scale === \"year\" ? quantity : 0), date.getMonth() + (scale === \"month\" ? quantity : 0), date.getDate() + (scale === \"day\" ? quantity : 0), date.getHours() + (scale === \"hour\" ? quantity : 0), date.getMinutes() + (scale === \"minute\" ? quantity : 0), date.getSeconds() + (scale === \"second\" ? quantity : 0), date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0));\n  return newDate;\n};\nvar startOfDate = function startOfDate(date, scale) {\n  var scores = [\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"month\", \"year\"];\n\n  var shouldReset = function shouldReset(_scale) {\n    var maxScore = scores.indexOf(scale);\n    return scores.indexOf(_scale) <= maxScore;\n  };\n\n  var newDate = new Date(date.getFullYear(), shouldReset(\"year\") ? 0 : date.getMonth(), shouldReset(\"month\") ? 1 : date.getDate(), shouldReset(\"day\") ? 0 : date.getHours(), shouldReset(\"hour\") ? 0 : date.getMinutes(), shouldReset(\"minute\") ? 0 : date.getSeconds(), shouldReset(\"second\") ? 0 : date.getMilliseconds());\n  return newDate;\n};\nvar ganttDateRange = function ganttDateRange(tasks, viewMode, preStepsCount) {\n  var newStartDate = tasks[0].start;\n  var newEndDate = tasks[0].start;\n\n  for (var _iterator = _createForOfIteratorHelperLoose(tasks), _step; !(_step = _iterator()).done;) {\n    var task = _step.value;\n\n    if (task.start < newStartDate) {\n      newStartDate = task.start;\n    }\n\n    if (task.end > newEndDate) {\n      newEndDate = task.end;\n    }\n  }\n\n  switch (viewMode) {\n    case ViewMode.Year:\n      newStartDate = addToDate(newStartDate, -1, \"year\");\n      newStartDate = startOfDate(newStartDate, \"year\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n\n    case ViewMode.Month:\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newEndDate = addToDate(newEndDate, 1, \"year\");\n      newEndDate = startOfDate(newEndDate, \"year\");\n      break;\n\n    case ViewMode.Week:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(getMonday(newStartDate), -7 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\n      break;\n\n    case ViewMode.Day:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 19, \"day\");\n      break;\n\n    case ViewMode.QuarterDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 66, \"hour\");\n      break;\n\n    case ViewMode.HalfDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 108, \"hour\");\n      break;\n\n    case ViewMode.Hour:\n      newStartDate = startOfDate(newStartDate, \"hour\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\n      newEndDate = startOfDate(newEndDate, \"day\");\n      newEndDate = addToDate(newEndDate, 1, \"day\");\n      break;\n  }\n\n  return [newStartDate, newEndDate];\n};\nvar seedDates = function seedDates(startDate, endDate, viewMode) {\n  var currentDate = new Date(startDate);\n  var dates = [currentDate];\n\n  while (currentDate < endDate) {\n    switch (viewMode) {\n      case ViewMode.Year:\n        currentDate = addToDate(currentDate, 1, \"year\");\n        break;\n\n      case ViewMode.Month:\n        currentDate = addToDate(currentDate, 1, \"month\");\n        break;\n\n      case ViewMode.Week:\n        currentDate = addToDate(currentDate, 7, \"day\");\n        break;\n\n      case ViewMode.Day:\n        currentDate = addToDate(currentDate, 1, \"day\");\n        break;\n\n      case ViewMode.HalfDay:\n        currentDate = addToDate(currentDate, 12, \"hour\");\n        break;\n\n      case ViewMode.QuarterDay:\n        currentDate = addToDate(currentDate, 6, \"hour\");\n        break;\n\n      case ViewMode.Hour:\n        currentDate = addToDate(currentDate, 1, \"hour\");\n        break;\n    }\n\n    dates.push(currentDate);\n  }\n\n  return dates;\n};\nvar getLocaleMonth = function getLocaleMonth(date, locale) {\n  var bottomValue = getCachedDateTimeFormat(locale, {\n    month: \"long\"\n  }).format(date);\n  bottomValue = bottomValue.replace(bottomValue[0], bottomValue[0].toLocaleUpperCase());\n  return bottomValue;\n};\nvar getLocalDayOfWeek = function getLocalDayOfWeek(date, locale, format) {\n  var bottomValue = getCachedDateTimeFormat(locale, {\n    weekday: format\n  }).format(date);\n  bottomValue = bottomValue.replace(bottomValue[0], bottomValue[0].toLocaleUpperCase());\n  return bottomValue;\n};\n\nvar getMonday = function getMonday(date) {\n  var day = date.getDay();\n  var diff = date.getDate() - day + (day === 0 ? -6 : 1);\n  return new Date(date.setDate(diff));\n};\n\nvar getWeekNumberISO8601 = function getWeekNumberISO8601(date) {\n  var tmpDate = new Date(date.valueOf());\n  var dayNumber = (tmpDate.getDay() + 6) % 7;\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\n  var firstThursday = tmpDate.valueOf();\n  tmpDate.setMonth(0, 1);\n\n  if (tmpDate.getDay() !== 4) {\n    tmpDate.setMonth(0, 1 + (4 - tmpDate.getDay() + 7) % 7);\n  }\n\n  var weekNumber = (1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)).toString();\n\n  if (weekNumber.length === 1) {\n    return \"0\" + weekNumber;\n  } else {\n    return weekNumber;\n  }\n};\nvar getDaysInMonth = function getDaysInMonth(month, year) {\n  return new Date(year, month + 1, 0).getDate();\n};\n\nvar styles = {\"ganttTable\":\"_3_ygE\",\"ganttTable_Header\":\"_1nBOt\",\"ganttTable_HeaderSeparator\":\"_2eZzQ\",\"ganttTable_HeaderItem\":\"_WuQ0f\"};\n\nvar TaskListHeaderDefault = function TaskListHeaderDefault(_ref) {\n  var headerHeight = _ref.headerHeight,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      rowWidth = _ref.rowWidth;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable,\n    style: {\n      fontFamily: fontFamily,\n      fontSize: fontSize\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_Header,\n    style: {\n      height: headerHeight - 2\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderItem,\n    style: {\n      minWidth: rowWidth\n    }\n  }, \"\\xA0Name\"), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderSeparator,\n    style: {\n      height: headerHeight * 0.5,\n      marginTop: headerHeight * 0.2\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderItem,\n    style: {\n      minWidth: rowWidth\n    }\n  }, \"\\xA0From\"), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderSeparator,\n    style: {\n      height: headerHeight * 0.5,\n      marginTop: headerHeight * 0.25\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles.ganttTable_HeaderItem,\n    style: {\n      minWidth: rowWidth\n    }\n  }, \"\\xA0To\")));\n};\n\nvar styles$1 = {\"taskListWrapper\":\"_3ZbQT\",\"taskListTableRow\":\"_34SS0\",\"taskListCell\":\"_3lLk3\",\"taskListNameWrapper\":\"_nI1Xw\",\"taskListExpander\":\"_2QjE6\",\"taskListEmptyExpander\":\"_2TfEi\"};\n\nvar localeDateStringCache = {};\n\nvar toLocaleDateStringFactory = function toLocaleDateStringFactory(locale) {\n  return function (date, dateTimeOptions) {\n    var key = date.toString();\n    var lds = localeDateStringCache[key];\n\n    if (!lds) {\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\n      localeDateStringCache[key] = lds;\n    }\n\n    return lds;\n  };\n};\n\nvar dateTimeOptions = {\n  weekday: \"short\",\n  year: \"numeric\",\n  month: \"long\",\n  day: \"numeric\"\n};\nvar TaskListTableDefault = function TaskListTableDefault(_ref) {\n  var rowHeight = _ref.rowHeight,\n      rowWidth = _ref.rowWidth,\n      tasks = _ref.tasks,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      locale = _ref.locale,\n      onExpanderClick = _ref.onExpanderClick;\n  var toLocaleDateString = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return toLocaleDateStringFactory(locale);\n  }, [locale]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$1.taskListWrapper,\n    style: {\n      fontFamily: fontFamily,\n      fontSize: fontSize\n    }\n  }, tasks.map(function (t) {\n    var expanderSymbol = \"\";\n\n    if (t.hideChildren === false) {\n      expanderSymbol = \"▼\";\n    } else if (t.hideChildren === true) {\n      expanderSymbol = \"▶\";\n    }\n\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListTableRow,\n      style: {\n        height: rowHeight\n      },\n      key: t.id + \"row\"\n    }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListCell,\n      style: {\n        minWidth: rowWidth,\n        maxWidth: rowWidth\n      },\n      title: t.name\n    }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListNameWrapper\n    }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: expanderSymbol ? styles$1.taskListExpander : styles$1.taskListEmptyExpander,\n      onClick: function onClick() {\n        return onExpanderClick(t);\n      }\n    }, expanderSymbol), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, t.name))), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListCell,\n      style: {\n        minWidth: rowWidth,\n        maxWidth: rowWidth\n      }\n    }, \"\\xA0\", toLocaleDateString(t.start, dateTimeOptions)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: styles$1.taskListCell,\n      style: {\n        minWidth: rowWidth,\n        maxWidth: rowWidth\n      }\n    }, \"\\xA0\", toLocaleDateString(t.end, dateTimeOptions)));\n  }));\n};\n\nvar styles$2 = {\"tooltipDefaultContainer\":\"_3T42e\",\"tooltipDefaultContainerParagraph\":\"_29NTg\",\"tooltipDetailsContainer\":\"_25P-K\",\"tooltipDetailsContainerHidden\":\"_3gVAq\"};\n\nvar Tooltip = function Tooltip(_ref) {\n  var task = _ref.task,\n      rowHeight = _ref.rowHeight,\n      rtl = _ref.rtl,\n      svgContainerHeight = _ref.svgContainerHeight,\n      svgContainerWidth = _ref.svgContainerWidth,\n      scrollX = _ref.scrollX,\n      scrollY = _ref.scrollY,\n      arrowIndent = _ref.arrowIndent,\n      fontSize = _ref.fontSize,\n      fontFamily = _ref.fontFamily,\n      headerHeight = _ref.headerHeight,\n      taskListWidth = _ref.taskListWidth,\n      TooltipContent = _ref.TooltipContent;\n  var tooltipRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      relatedY = _useState[0],\n      setRelatedY = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      relatedX = _useState2[0],\n      setRelatedX = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (tooltipRef.current) {\n      var tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\n      var tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\n      var newRelatedY = task.index * rowHeight - scrollY + headerHeight;\n      var newRelatedX;\n\n      if (rtl) {\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\n\n        if (newRelatedX < 0) {\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\n        }\n\n        var tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n\n        if (tooltipLeftmostPoint > svgContainerWidth) {\n          newRelatedX = svgContainerWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      } else {\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\n\n        var _tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n\n        var fullChartWidth = taskListWidth + svgContainerWidth;\n\n        if (_tooltipLeftmostPoint > fullChartWidth) {\n          newRelatedX = task.x1 + taskListWidth - arrowIndent * 1.5 - scrollX - tooltipWidth;\n        }\n\n        if (newRelatedX < taskListWidth) {\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      }\n\n      var tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\n\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\n        newRelatedY = svgContainerHeight - tooltipHeight;\n      }\n\n      setRelatedY(newRelatedY);\n      setRelatedX(newRelatedX);\n    }\n  }, [tooltipRef, task, arrowIndent, scrollX, scrollY, headerHeight, taskListWidth, rowHeight, svgContainerHeight, svgContainerWidth, rtl]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: tooltipRef,\n    className: relatedX ? styles$2.tooltipDetailsContainer : styles$2.tooltipDetailsContainerHidden,\n    style: {\n      left: relatedX,\n      top: relatedY\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TooltipContent, {\n    task: task,\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  }));\n};\nvar StandardTooltipContent = function StandardTooltipContent(_ref2) {\n  var task = _ref2.task,\n      fontSize = _ref2.fontSize,\n      fontFamily = _ref2.fontFamily;\n  var style = {\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$2.tooltipDefaultContainer,\n    style: style\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"b\", {\n    style: {\n      fontSize: fontSize + 6\n    }\n  }, task.name + \": \" + task.start.getDate() + \"-\" + (task.start.getMonth() + 1) + \"-\" + task.start.getFullYear() + \" - \" + task.end.getDate() + \"-\" + (task.end.getMonth() + 1) + \"-\" + task.end.getFullYear()), task.end.getTime() - task.start.getTime() !== 0 && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: styles$2.tooltipDefaultContainerParagraph\n  }, \"Duration: \" + ~~((task.end.getTime() - task.start.getTime()) / (1000 * 60 * 60 * 24)) + \" day(s)\"), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", {\n    className: styles$2.tooltipDefaultContainerParagraph\n  }, !!task.progress && \"Progress: \" + task.progress + \" %\"));\n};\n\nvar styles$3 = {\"scroll\":\"_1eT-t\"};\n\nvar VerticalScroll = function VerticalScroll(_ref) {\n  var scroll = _ref.scroll,\n      ganttHeight = _ref.ganttHeight,\n      ganttFullHeight = _ref.ganttFullHeight,\n      headerHeight = _ref.headerHeight,\n      rtl = _ref.rtl,\n      onScroll = _ref.onScroll;\n  var scrollRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scroll;\n    }\n  }, [scroll]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      height: ganttHeight,\n      marginTop: headerHeight,\n      marginLeft: rtl ? \"\" : \"-1rem\"\n    },\n    className: styles$3.scroll,\n    onScroll: onScroll,\n    ref: scrollRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      height: ganttFullHeight,\n      width: 1\n    }\n  }));\n};\n\nvar TaskList = function TaskList(_ref) {\n  var headerHeight = _ref.headerHeight,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      rowWidth = _ref.rowWidth,\n      rowHeight = _ref.rowHeight,\n      scrollY = _ref.scrollY,\n      tasks = _ref.tasks,\n      selectedTask = _ref.selectedTask,\n      setSelectedTask = _ref.setSelectedTask,\n      onExpanderClick = _ref.onExpanderClick,\n      locale = _ref.locale,\n      ganttHeight = _ref.ganttHeight,\n      taskListRef = _ref.taskListRef,\n      horizontalContainerClass = _ref.horizontalContainerClass,\n      TaskListHeader = _ref.TaskListHeader,\n      TaskListTable = _ref.TaskListTable;\n  var horizontalContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n  var headerProps = {\n    headerHeight: headerHeight,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    rowWidth: rowWidth\n  };\n  var selectedTaskId = selectedTask ? selectedTask.id : \"\";\n  var tableProps = {\n    rowHeight: rowHeight,\n    rowWidth: rowWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    tasks: tasks,\n    locale: locale,\n    selectedTaskId: selectedTaskId,\n    setSelectedTask: setSelectedTask,\n    onExpanderClick: onExpanderClick\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: taskListRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskListHeader, Object.assign({}, headerProps)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: horizontalContainerRef,\n    className: horizontalContainerClass,\n    style: ganttHeight ? {\n      height: ganttHeight\n    } : {}\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskListTable, Object.assign({}, tableProps))));\n};\n\nvar styles$4 = {\"gridRow\":\"_2dZTy\",\"gridRowLine\":\"_3rUKi\",\"gridTick\":\"_RuwuK\"};\n\nvar GridBody = function GridBody(_ref) {\n  var tasks = _ref.tasks,\n      dates = _ref.dates,\n      rowHeight = _ref.rowHeight,\n      svgWidth = _ref.svgWidth,\n      columnWidth = _ref.columnWidth,\n      todayColor = _ref.todayColor,\n      rtl = _ref.rtl;\n  var y = 0;\n  var gridRows = [];\n  var rowLines = [react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n    key: \"RowLineFirst\",\n    x: \"0\",\n    y1: 0,\n    x2: svgWidth,\n    y2: 0,\n    className: styles$4.gridRowLine\n  })];\n\n  for (var _iterator = _createForOfIteratorHelperLoose(tasks), _step; !(_step = _iterator()).done;) {\n    var task = _step.value;\n    gridRows.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n      key: \"Row\" + task.id,\n      x: \"0\",\n      y: y,\n      width: svgWidth,\n      height: rowHeight,\n      className: styles$4.gridRow\n    }));\n    rowLines.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n      key: \"RowLine\" + task.id,\n      x: \"0\",\n      y1: y + rowHeight,\n      x2: svgWidth,\n      y2: y + rowHeight,\n      className: styles$4.gridRowLine\n    }));\n    y += rowHeight;\n  }\n\n  var now = new Date();\n  var tickX = 0;\n  var ticks = [];\n  var today = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", null);\n\n  for (var i = 0; i < dates.length; i++) {\n    var date = dates[i];\n    ticks.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n      key: date.getTime(),\n      x1: tickX,\n      y1: 0,\n      x2: tickX,\n      y2: y,\n      className: styles$4.gridTick\n    }));\n\n    if (i + 1 !== dates.length && date.getTime() < now.getTime() && dates[i + 1].getTime() >= now.getTime() || i !== 0 && i + 1 === dates.length && date.getTime() < now.getTime() && addToDate(date, date.getTime() - dates[i - 1].getTime(), \"millisecond\").getTime() >= now.getTime()) {\n      today = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n        x: tickX,\n        y: 0,\n        width: columnWidth,\n        height: y,\n        fill: todayColor\n      });\n    }\n\n    if (rtl && i + 1 !== dates.length && date.getTime() >= now.getTime() && dates[i + 1].getTime() < now.getTime()) {\n      today = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n        x: tickX + columnWidth,\n        y: 0,\n        width: columnWidth,\n        height: y,\n        fill: todayColor\n      });\n    }\n\n    tickX += columnWidth;\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"gridBody\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"rows\"\n  }, gridRows), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"rowLines\"\n  }, rowLines), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"ticks\"\n  }, ticks), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"today\"\n  }, today));\n};\n\nvar Grid = function Grid(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"grid\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(GridBody, Object.assign({}, props)));\n};\n\nvar styles$5 = {\"calendarBottomText\":\"_9w8d5\",\"calendarTopTick\":\"_1rLuZ\",\"calendarTopText\":\"_2q1Kt\",\"calendarHeader\":\"_35nLX\"};\n\nvar TopPartOfCalendar = function TopPartOfCalendar(_ref) {\n  var value = _ref.value,\n      x1Line = _ref.x1Line,\n      y1Line = _ref.y1Line,\n      y2Line = _ref.y2Line,\n      xText = _ref.xText,\n      yText = _ref.yText;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"calendarTop\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"line\", {\n    x1: x1Line,\n    y1: y1Line,\n    x2: x1Line,\n    y2: y2Line,\n    className: styles$5.calendarTopTick,\n    key: value + \"line\"\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n    key: value + \"text\",\n    y: yText,\n    x: xText,\n    className: styles$5.calendarTopText\n  }, value));\n};\n\nvar Calendar = function Calendar(_ref) {\n  var dateSetup = _ref.dateSetup,\n      locale = _ref.locale,\n      viewMode = _ref.viewMode,\n      rtl = _ref.rtl,\n      headerHeight = _ref.headerHeight,\n      columnWidth = _ref.columnWidth,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize;\n\n  var getCalendarValuesForYear = function getCalendarValuesForYear() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var bottomValue = date.getFullYear();\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getFullYear(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n\n        if (rtl) {\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getFullYear()) * columnWidth;\n        }\n\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: headerHeight,\n          xText: xText,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForMonth = function getCalendarValuesForMonth() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n\n    for (var i = 0; i < dateSetup.dates.length; i++) {\n      var date = dateSetup.dates[i];\n      var bottomValue = getLocaleMonth(date, locale);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: bottomValue + date.getFullYear(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (i === 0 || date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()) {\n        var topValue = date.getFullYear().toString();\n        var xText = void 0;\n\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue,\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: xText,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForWeek = function getCalendarValuesForWeek() {\n    var topValues = [];\n    var bottomValues = [];\n    var weeksCount = 1;\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = dates.length - 1; i >= 0; i--) {\n      var date = dates[i];\n      var topValue = \"\";\n\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\n        topValue = getLocaleMonth(date, locale) + \", \" + date.getFullYear();\n      }\n\n      var bottomValue = \"W\" + getWeekNumberISO8601(date);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (topValue) {\n        if (i !== dates.length - 1) {\n          topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n            key: topValue,\n            value: topValue,\n            x1Line: columnWidth * i + weeksCount * columnWidth,\n            y1Line: 0,\n            y2Line: topDefaultHeight,\n            xText: columnWidth * i + columnWidth * weeksCount * 0.5,\n            yText: topDefaultHeight * 0.9\n          }));\n        }\n\n        weeksCount = 0;\n      }\n\n      weeksCount++;\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForDay = function getCalendarValuesForDay() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getLocalDayOfWeek(date, locale, \"short\") + \", \" + date.getDate().toString();\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * i + columnWidth * 0.5,\n        className: styles$5.calendarBottomText\n      }, bottomValue));\n\n      if (i + 1 !== dates.length && date.getMonth() !== dates[i + 1].getMonth()) {\n        var topValue = getLocaleMonth(date, locale);\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue + date.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * (i + 1),\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * (i + 1) - getDaysInMonth(date.getMonth(), date.getFullYear()) * columnWidth * 0.5,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForPartOfDay = function getCalendarValuesForPartOfDay() {\n    var topValues = [];\n    var bottomValues = [];\n    var ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\"\n      }).format(date);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText,\n        fontFamily: fontFamily\n      }, bottomValue));\n\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\n        var topValue = getLocalDayOfWeek(date, locale, \"short\") + \", \" + date.getDate() + \" \" + getLocaleMonth(date, locale);\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue + date.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * i + ticks * columnWidth,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * i + ticks * columnWidth * 0.5,\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var getCalendarValuesForHour = function getCalendarValuesForHour() {\n    var topValues = [];\n    var bottomValues = [];\n    var topDefaultHeight = headerHeight * 0.5;\n    var dates = dateSetup.dates;\n\n    for (var i = 0; i < dates.length; i++) {\n      var date = dates[i];\n      var bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\"\n      }).format(date);\n      bottomValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n        key: date.getTime(),\n        y: headerHeight * 0.8,\n        x: columnWidth * (i + +rtl),\n        className: styles$5.calendarBottomText,\n        fontFamily: fontFamily\n      }, bottomValue));\n\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\n        var displayDate = dates[i - 1];\n        var topValue = getLocalDayOfWeek(displayDate, locale, \"long\") + \", \" + displayDate.getDate() + \" \" + getLocaleMonth(displayDate, locale);\n        var topPosition = (date.getHours() - 24) / 2;\n        topValues.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TopPartOfCalendar, {\n          key: topValue + displayDate.getFullYear(),\n          value: topValue,\n          x1Line: columnWidth * i,\n          y1Line: 0,\n          y2Line: topDefaultHeight,\n          xText: columnWidth * (i + topPosition),\n          yText: topDefaultHeight * 0.9\n        }));\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  var topValues = [];\n  var bottomValues = [];\n\n  switch (dateSetup.viewMode) {\n    case ViewMode.Year:\n      var _getCalendarValuesFor = getCalendarValuesForYear();\n\n      topValues = _getCalendarValuesFor[0];\n      bottomValues = _getCalendarValuesFor[1];\n      break;\n\n    case ViewMode.Month:\n      var _getCalendarValuesFor2 = getCalendarValuesForMonth();\n\n      topValues = _getCalendarValuesFor2[0];\n      bottomValues = _getCalendarValuesFor2[1];\n      break;\n\n    case ViewMode.Week:\n      var _getCalendarValuesFor3 = getCalendarValuesForWeek();\n\n      topValues = _getCalendarValuesFor3[0];\n      bottomValues = _getCalendarValuesFor3[1];\n      break;\n\n    case ViewMode.Day:\n      var _getCalendarValuesFor4 = getCalendarValuesForDay();\n\n      topValues = _getCalendarValuesFor4[0];\n      bottomValues = _getCalendarValuesFor4[1];\n      break;\n\n    case ViewMode.QuarterDay:\n    case ViewMode.HalfDay:\n      var _getCalendarValuesFor5 = getCalendarValuesForPartOfDay();\n\n      topValues = _getCalendarValuesFor5[0];\n      bottomValues = _getCalendarValuesFor5[1];\n      break;\n\n    case ViewMode.Hour:\n      var _getCalendarValuesFor6 = getCalendarValuesForHour();\n\n      topValues = _getCalendarValuesFor6[0];\n      bottomValues = _getCalendarValuesFor6[1];\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"calendar\",\n    fontSize: fontSize,\n    fontFamily: fontFamily\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: 0,\n    y: 0,\n    width: columnWidth * dateSetup.dates.length,\n    height: headerHeight,\n    className: styles$5.calendarHeader\n  }), bottomValues, \" \", topValues);\n};\n\n// A type of promise-like that resolves synchronously and supports only one observer\n\nconst _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\nconst _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously call a function and send errors to recovery continuation\nfunction _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\nvar Arrow = function Arrow(_ref) {\n  var taskFrom = _ref.taskFrom,\n      taskTo = _ref.taskTo,\n      rowHeight = _ref.rowHeight,\n      taskHeight = _ref.taskHeight,\n      arrowIndent = _ref.arrowIndent,\n      rtl = _ref.rtl;\n  var path;\n  var trianglePoints;\n\n  if (rtl) {\n    var _drownPathAndTriangle = drownPathAndTriangleRTL(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent);\n\n    path = _drownPathAndTriangle[0];\n    trianglePoints = _drownPathAndTriangle[1];\n  } else {\n    var _drownPathAndTriangle2 = drownPathAndTriangle(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent);\n\n    path = _drownPathAndTriangle2[0];\n    trianglePoints = _drownPathAndTriangle2[1];\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"arrow\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", {\n    strokeWidth: \"1.5\",\n    d: path,\n    fill: \"none\"\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    points: trianglePoints\n  }));\n};\n\nvar drownPathAndTriangle = function drownPathAndTriangle(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent) {\n  var indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  var taskToEndPosition = taskTo.y + taskHeight / 2;\n  var taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\n  var taskFromHorizontalOffsetValue = taskFromEndPosition < taskTo.x1 ? \"\" : \"H \" + (taskTo.x1 - arrowIndent);\n  var taskToHorizontalOffsetValue = taskFromEndPosition > taskTo.x1 ? arrowIndent : taskTo.x1 - taskFrom.x2 - arrowIndent;\n  var path = \"M \" + taskFrom.x2 + \" \" + (taskFrom.y + taskHeight / 2) + \" \\n  h \" + arrowIndent + \" \\n  v \" + indexCompare * rowHeight / 2 + \" \\n  \" + taskFromHorizontalOffsetValue + \"\\n  V \" + taskToEndPosition + \" \\n  h \" + taskToHorizontalOffsetValue;\n  var trianglePoints = taskTo.x1 + \",\" + taskToEndPosition + \" \\n  \" + (taskTo.x1 - 5) + \",\" + (taskToEndPosition - 5) + \" \\n  \" + (taskTo.x1 - 5) + \",\" + (taskToEndPosition + 5);\n  return [path, trianglePoints];\n};\n\nvar drownPathAndTriangleRTL = function drownPathAndTriangleRTL(taskFrom, taskTo, rowHeight, taskHeight, arrowIndent) {\n  var indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  var taskToEndPosition = taskTo.y + taskHeight / 2;\n  var taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\n  var taskFromHorizontalOffsetValue = taskFromEndPosition > taskTo.x2 ? \"\" : \"H \" + (taskTo.x2 + arrowIndent);\n  var taskToHorizontalOffsetValue = taskFromEndPosition < taskTo.x2 ? -arrowIndent : taskTo.x2 - taskFrom.x1 + arrowIndent;\n  var path = \"M \" + taskFrom.x1 + \" \" + (taskFrom.y + taskHeight / 2) + \" \\n  h \" + -arrowIndent + \" \\n  v \" + indexCompare * rowHeight / 2 + \" \\n  \" + taskFromHorizontalOffsetValue + \"\\n  V \" + taskToEndPosition + \" \\n  h \" + taskToHorizontalOffsetValue;\n  var trianglePoints = taskTo.x2 + \",\" + taskToEndPosition + \" \\n  \" + (taskTo.x2 + 5) + \",\" + (taskToEndPosition + 5) + \" \\n  \" + (taskTo.x2 + 5) + \",\" + (taskToEndPosition - 5);\n  return [path, trianglePoints];\n};\n\nvar convertToBarTasks = function convertToBarTasks(tasks, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var barTasks = tasks.map(function (t, i) {\n    return convertToBarTask(t, i, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor);\n  });\n  barTasks = barTasks.map(function (task) {\n    var dependencies = task.dependencies || [];\n\n    var _loop = function _loop(j) {\n      var dependence = barTasks.findIndex(function (value) {\n        return value.id === dependencies[j];\n      });\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\n    };\n\n    for (var j = 0; j < dependencies.length; j++) {\n      _loop(j);\n    }\n\n    return task;\n  });\n  return barTasks;\n};\n\nvar convertToBarTask = function convertToBarTask(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var barTask;\n\n  switch (task.type) {\n    case \"milestone\":\n      barTask = convertToMilestone(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, milestoneBackgroundColor, milestoneBackgroundSelectedColor);\n      break;\n\n    case \"project\":\n      barTask = convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor);\n      break;\n\n    default:\n      barTask = convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor);\n      break;\n  }\n\n  return barTask;\n};\n\nvar convertToBar = function convertToBar(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor) {\n  var x1;\n  var x2;\n\n  if (rtl) {\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\n  } else {\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\n  }\n\n  var typeInternal = task.type;\n\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\n    typeInternal = \"smalltask\";\n    x2 = x1 + handleWidth * 2;\n  }\n\n  var _progressWithByParams = progressWithByParams(x1, x2, task.progress, rtl),\n      progressWidth = _progressWithByParams[0],\n      progressX = _progressWithByParams[1];\n\n  var y = taskYCoordinate(index, rowHeight, taskHeight);\n  var hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\n\n  var styles = _extends({\n    backgroundColor: barBackgroundColor,\n    backgroundSelectedColor: barBackgroundSelectedColor,\n    progressColor: barProgressColor,\n    progressSelectedColor: barProgressSelectedColor\n  }, task.styles);\n\n  return _extends({}, task, {\n    typeInternal: typeInternal,\n    x1: x1,\n    x2: x2,\n    y: y,\n    index: index,\n    progressX: progressX,\n    progressWidth: progressWidth,\n    barCornerRadius: barCornerRadius,\n    handleWidth: handleWidth,\n    hideChildren: hideChildren,\n    height: taskHeight,\n    barChildren: [],\n    styles: styles\n  });\n};\n\nvar convertToMilestone = function convertToMilestone(task, index, dates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, milestoneBackgroundColor, milestoneBackgroundSelectedColor) {\n  var x = taskXCoordinate(task.start, dates, columnWidth);\n  var y = taskYCoordinate(index, rowHeight, taskHeight);\n  var x1 = x - taskHeight * 0.5;\n  var x2 = x + taskHeight * 0.5;\n  var rotatedHeight = taskHeight / 1.414;\n\n  var styles = _extends({\n    backgroundColor: milestoneBackgroundColor,\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\n    progressColor: \"\",\n    progressSelectedColor: \"\"\n  }, task.styles);\n\n  return _extends({}, task, {\n    end: task.start,\n    x1: x1,\n    x2: x2,\n    y: y,\n    index: index,\n    progressX: 0,\n    progressWidth: 0,\n    barCornerRadius: barCornerRadius,\n    handleWidth: handleWidth,\n    typeInternal: task.type,\n    progress: 0,\n    height: rotatedHeight,\n    hideChildren: undefined,\n    barChildren: [],\n    styles: styles\n  });\n};\n\nvar taskXCoordinate = function taskXCoordinate(xDate, dates, columnWidth) {\n  var index = dates.findIndex(function (d) {\n    return d.getTime() >= xDate.getTime();\n  }) - 1;\n  var remainderMillis = xDate.getTime() - dates[index].getTime();\n  var percentOfInterval = remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\n  var x = index * columnWidth + percentOfInterval * columnWidth;\n  return x;\n};\n\nvar taskXCoordinateRTL = function taskXCoordinateRTL(xDate, dates, columnWidth) {\n  var x = taskXCoordinate(xDate, dates, columnWidth);\n  x += columnWidth;\n  return x;\n};\n\nvar taskYCoordinate = function taskYCoordinate(index, rowHeight, taskHeight) {\n  var y = index * rowHeight + (rowHeight - taskHeight) / 2;\n  return y;\n};\n\nvar progressWithByParams = function progressWithByParams(taskX1, taskX2, progress, rtl) {\n  var progressWidth = (taskX2 - taskX1) * progress * 0.01;\n  var progressX;\n\n  if (rtl) {\n    progressX = taskX2 - progressWidth;\n  } else {\n    progressX = taskX1;\n  }\n\n  return [progressWidth, progressX];\n};\n\nvar progressByX = function progressByX(x, task) {\n  if (x >= task.x2) return 100;else if (x <= task.x1) return 0;else {\n    var barWidth = task.x2 - task.x1;\n    var progressPercent = Math.round((x - task.x1) * 100 / barWidth);\n    return progressPercent;\n  }\n};\n\nvar progressByXRTL = function progressByXRTL(x, task) {\n  if (x >= task.x2) return 0;else if (x <= task.x1) return 100;else {\n    var barWidth = task.x2 - task.x1;\n    var progressPercent = Math.round((task.x2 - x) * 100 / barWidth);\n    return progressPercent;\n  }\n};\n\nvar getProgressPoint = function getProgressPoint(progressX, taskY, taskHeight) {\n  var point = [progressX - 5, taskY + taskHeight, progressX + 5, taskY + taskHeight, progressX, taskY + taskHeight - 8.66];\n  return point.join(\",\");\n};\n\nvar startByX = function startByX(x, xStep, task) {\n  if (x >= task.x2 - task.handleWidth * 2) {\n    x = task.x2 - task.handleWidth * 2;\n  }\n\n  var steps = Math.round((x - task.x1) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX = task.x1 + additionalXValue;\n  return newX;\n};\n\nvar endByX = function endByX(x, xStep, task) {\n  if (x <= task.x1 + task.handleWidth * 2) {\n    x = task.x1 + task.handleWidth * 2;\n  }\n\n  var steps = Math.round((x - task.x2) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX = task.x2 + additionalXValue;\n  return newX;\n};\n\nvar moveByX = function moveByX(x, xStep, task) {\n  var steps = Math.round((x - task.x1) / xStep);\n  var additionalXValue = steps * xStep;\n  var newX1 = task.x1 + additionalXValue;\n  var newX2 = newX1 + task.x2 - task.x1;\n  return [newX1, newX2];\n};\n\nvar dateByX = function dateByX(x, taskX, taskDate, xStep, timeStep) {\n  var newDate = new Date((x - taskX) / xStep * timeStep + taskDate.getTime());\n  newDate = new Date(newDate.getTime() + (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000);\n  return newDate;\n};\n\nvar handleTaskBySVGMouseEvent = function handleTaskBySVGMouseEvent(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl) {\n  var result;\n\n  switch (selectedTask.type) {\n    case \"milestone\":\n      result = handleTaskBySVGMouseEventForMilestone(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta);\n      break;\n\n    default:\n      result = handleTaskBySVGMouseEventForBar(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl);\n      break;\n  }\n\n  return result;\n};\n\nvar handleTaskBySVGMouseEventForBar = function handleTaskBySVGMouseEventForBar(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta, rtl) {\n  var changedTask = _extends({}, selectedTask);\n\n  var isChanged = false;\n\n  switch (action) {\n    case \"progress\":\n      if (rtl) {\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\n      } else {\n        changedTask.progress = progressByX(svgX, selectedTask);\n      }\n\n      isChanged = changedTask.progress !== selectedTask.progress;\n\n      if (isChanged) {\n        var _progressWithByParams2 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n            progressWidth = _progressWithByParams2[0],\n            progressX = _progressWithByParams2[1];\n\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n\n      break;\n\n    case \"start\":\n      {\n        var newX1 = startByX(svgX, xStep, selectedTask);\n        changedTask.x1 = newX1;\n        isChanged = changedTask.x1 !== selectedTask.x1;\n\n        if (isChanged) {\n          if (rtl) {\n            changedTask.end = dateByX(newX1, selectedTask.x1, selectedTask.end, xStep, timeStep);\n          } else {\n            changedTask.start = dateByX(newX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          }\n\n          var _progressWithByParams3 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n              _progressWidth = _progressWithByParams3[0],\n              _progressX = _progressWithByParams3[1];\n\n          changedTask.progressWidth = _progressWidth;\n          changedTask.progressX = _progressX;\n        }\n\n        break;\n      }\n\n    case \"end\":\n      {\n        var newX2 = endByX(svgX, xStep, selectedTask);\n        changedTask.x2 = newX2;\n        isChanged = changedTask.x2 !== selectedTask.x2;\n\n        if (isChanged) {\n          if (rtl) {\n            changedTask.start = dateByX(newX2, selectedTask.x2, selectedTask.start, xStep, timeStep);\n          } else {\n            changedTask.end = dateByX(newX2, selectedTask.x2, selectedTask.end, xStep, timeStep);\n          }\n\n          var _progressWithByParams4 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n              _progressWidth2 = _progressWithByParams4[0],\n              _progressX2 = _progressWithByParams4[1];\n\n          changedTask.progressWidth = _progressWidth2;\n          changedTask.progressX = _progressX2;\n        }\n\n        break;\n      }\n\n    case \"move\":\n      {\n        var _moveByX = moveByX(svgX - initEventX1Delta, xStep, selectedTask),\n            newMoveX1 = _moveByX[0],\n            newMoveX2 = _moveByX[1];\n\n        isChanged = newMoveX1 !== selectedTask.x1;\n\n        if (isChanged) {\n          changedTask.start = dateByX(newMoveX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          changedTask.end = dateByX(newMoveX2, selectedTask.x2, selectedTask.end, xStep, timeStep);\n          changedTask.x1 = newMoveX1;\n          changedTask.x2 = newMoveX2;\n\n          var _progressWithByParams5 = progressWithByParams(changedTask.x1, changedTask.x2, changedTask.progress, rtl),\n              _progressWidth3 = _progressWithByParams5[0],\n              _progressX3 = _progressWithByParams5[1];\n\n          changedTask.progressWidth = _progressWidth3;\n          changedTask.progressX = _progressX3;\n        }\n\n        break;\n      }\n  }\n\n  return {\n    isChanged: isChanged,\n    changedTask: changedTask\n  };\n};\n\nvar handleTaskBySVGMouseEventForMilestone = function handleTaskBySVGMouseEventForMilestone(svgX, action, selectedTask, xStep, timeStep, initEventX1Delta) {\n  var changedTask = _extends({}, selectedTask);\n\n  var isChanged = false;\n\n  switch (action) {\n    case \"move\":\n      {\n        var _moveByX2 = moveByX(svgX - initEventX1Delta, xStep, selectedTask),\n            newMoveX1 = _moveByX2[0],\n            newMoveX2 = _moveByX2[1];\n\n        isChanged = newMoveX1 !== selectedTask.x1;\n\n        if (isChanged) {\n          changedTask.start = dateByX(newMoveX1, selectedTask.x1, selectedTask.start, xStep, timeStep);\n          changedTask.end = changedTask.start;\n          changedTask.x1 = newMoveX1;\n          changedTask.x2 = newMoveX2;\n        }\n\n        break;\n      }\n  }\n\n  return {\n    isChanged: isChanged,\n    changedTask: changedTask\n  };\n};\n\nfunction isKeyboardEvent(event) {\n  return event.key !== undefined;\n}\nfunction removeHiddenTasks(tasks) {\n  var groupedTasks = tasks.filter(function (t) {\n    return t.hideChildren && t.type === \"project\";\n  });\n\n  if (groupedTasks.length > 0) {\n    var _loop = function _loop(i) {\n      var groupedTask = groupedTasks[i];\n      var children = getChildren(tasks, groupedTask);\n      tasks = tasks.filter(function (t) {\n        return children.indexOf(t) === -1;\n      });\n    };\n\n    for (var i = 0; groupedTasks.length > i; i++) {\n      _loop(i);\n    }\n  }\n\n  return tasks;\n}\n\nfunction getChildren(taskList, task) {\n  var tasks = [];\n\n  if (task.type !== \"project\") {\n    tasks = taskList.filter(function (t) {\n      return t.dependencies && t.dependencies.indexOf(task.id) !== -1;\n    });\n  } else {\n    tasks = taskList.filter(function (t) {\n      return t.project && t.project === task.id;\n    });\n  }\n\n  var taskChildren = [];\n  tasks.forEach(function (t) {\n    taskChildren.push.apply(taskChildren, getChildren(taskList, t));\n  });\n  tasks = tasks.concat(tasks, taskChildren);\n  return tasks;\n}\n\nvar sortTasks = function sortTasks(taskA, taskB) {\n  var orderA = taskA.displayOrder || Number.MAX_VALUE;\n  var orderB = taskB.displayOrder || Number.MAX_VALUE;\n\n  if (orderA > orderB) {\n    return 1;\n  } else if (orderA < orderB) {\n    return -1;\n  } else {\n    return 0;\n  }\n};\n\nvar styles$6 = {\"barWrapper\":\"_KxSXS\",\"barHandle\":\"_3w_5u\",\"barBackground\":\"_31ERP\"};\n\nvar BarDisplay = function BarDisplay(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      isSelected = _ref.isSelected,\n      progressX = _ref.progressX,\n      progressWidth = _ref.progressWidth,\n      barCornerRadius = _ref.barCornerRadius,\n      styles = _ref.styles,\n      onMouseDown = _ref.onMouseDown;\n\n  var getProcessColor = function getProcessColor() {\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\n  };\n\n  var getBarColor = function getBarColor() {\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    onMouseDown: onMouseDown\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: x,\n    width: width,\n    y: y,\n    height: height,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    fill: getBarColor(),\n    className: styles$6.barBackground\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: progressX,\n    width: progressWidth,\n    y: y,\n    height: height,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    fill: getProcessColor()\n  }));\n};\n\nvar BarDateHandle = function BarDateHandle(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      barCornerRadius = _ref.barCornerRadius,\n      onMouseDown = _ref.onMouseDown;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    className: styles$6.barHandle,\n    ry: barCornerRadius,\n    rx: barCornerRadius,\n    onMouseDown: onMouseDown\n  });\n};\n\nvar BarProgressHandle = function BarProgressHandle(_ref) {\n  var progressPoint = _ref.progressPoint,\n      onMouseDown = _ref.onMouseDown;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    className: styles$6.barHandle,\n    points: progressPoint,\n    onMouseDown: onMouseDown\n  });\n};\n\nvar Bar = function Bar(_ref) {\n  var task = _ref.task,\n      isProgressChangeable = _ref.isProgressChangeable,\n      isDateChangeable = _ref.isDateChangeable,\n      rtl = _ref.rtl,\n      onEventStart = _ref.onEventStart,\n      isSelected = _ref.isSelected;\n  var progressPoint = getProgressPoint(+!rtl * task.progressWidth + task.progressX, task.y, task.height);\n  var handleHeight = task.height - 2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: styles$6.barWrapper,\n    tabIndex: 0\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDisplay, {\n    x: task.x1,\n    y: task.y,\n    width: task.x2 - task.x1,\n    height: task.height,\n    progressX: task.progressX,\n    progressWidth: task.progressWidth,\n    barCornerRadius: task.barCornerRadius,\n    styles: task.styles,\n    isSelected: isSelected,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"handleGroup\"\n  }, isDateChangeable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDateHandle, {\n    x: task.x1 + 1,\n    y: task.y + 1,\n    width: task.handleWidth,\n    height: handleHeight,\n    barCornerRadius: task.barCornerRadius,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"start\", task, e);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDateHandle, {\n    x: task.x2 - task.handleWidth - 1,\n    y: task.y + 1,\n    width: task.handleWidth,\n    height: handleHeight,\n    barCornerRadius: task.barCornerRadius,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"end\", task, e);\n    }\n  })), isProgressChangeable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarProgressHandle, {\n    progressPoint: progressPoint,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"progress\", task, e);\n    }\n  })));\n};\n\nvar BarSmall = function BarSmall(_ref) {\n  var task = _ref.task,\n      isProgressChangeable = _ref.isProgressChangeable,\n      isDateChangeable = _ref.isDateChangeable,\n      onEventStart = _ref.onEventStart,\n      isSelected = _ref.isSelected;\n  var progressPoint = getProgressPoint(task.progressWidth + task.x1, task.y, task.height);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: styles$6.barWrapper,\n    tabIndex: 0\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarDisplay, {\n    x: task.x1,\n    y: task.y,\n    width: task.x2 - task.x1,\n    height: task.height,\n    progressX: task.progressX,\n    progressWidth: task.progressWidth,\n    barCornerRadius: task.barCornerRadius,\n    styles: task.styles,\n    isSelected: isSelected,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"handleGroup\"\n  }, isProgressChangeable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarProgressHandle, {\n    progressPoint: progressPoint,\n    onMouseDown: function onMouseDown(e) {\n      onEventStart(\"progress\", task, e);\n    }\n  })));\n};\n\nvar styles$7 = {\"milestoneWrapper\":\"_RRr13\",\"milestoneBackground\":\"_2P2B1\"};\n\nvar Milestone = function Milestone(_ref) {\n  var task = _ref.task,\n      isDateChangeable = _ref.isDateChangeable,\n      onEventStart = _ref.onEventStart,\n      isSelected = _ref.isSelected;\n  var transform = \"rotate(45 \" + (task.x1 + task.height * 0.356) + \" \\n    \" + (task.y + task.height * 0.85) + \")\";\n\n  var getBarColor = function getBarColor() {\n    return isSelected ? task.styles.backgroundSelectedColor : task.styles.backgroundColor;\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    tabIndex: 0,\n    className: styles$7.milestoneWrapper\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    fill: getBarColor(),\n    x: task.x1,\n    width: task.height,\n    y: task.y,\n    height: task.height,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    transform: transform,\n    className: styles$7.milestoneBackground,\n    onMouseDown: function onMouseDown(e) {\n      isDateChangeable && onEventStart(\"move\", task, e);\n    }\n  }));\n};\n\nvar styles$8 = {\"projectWrapper\":\"_1KJ6x\",\"projectBackground\":\"_2RbVy\",\"projectTop\":\"_2pZMF\"};\n\nvar Project = function Project(_ref) {\n  var task = _ref.task,\n      isSelected = _ref.isSelected;\n  var barColor = isSelected ? task.styles.backgroundSelectedColor : task.styles.backgroundColor;\n  var processColor = isSelected ? task.styles.progressSelectedColor : task.styles.progressColor;\n  var projectWith = task.x2 - task.x1;\n  var projectLeftTriangle = [task.x1, task.y + task.height / 2 - 1, task.x1, task.y + task.height, task.x1 + 15, task.y + task.height / 2 - 1].join(\",\");\n  var projectRightTriangle = [task.x2, task.y + task.height / 2 - 1, task.x2, task.y + task.height, task.x2 - 15, task.y + task.height / 2 - 1].join(\",\");\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    tabIndex: 0,\n    className: styles$8.projectWrapper\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    fill: barColor,\n    x: task.x1,\n    width: projectWith,\n    y: task.y,\n    height: task.height,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    className: styles$8.projectBackground\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    x: task.progressX,\n    width: task.progressWidth,\n    y: task.y,\n    height: task.height,\n    ry: task.barCornerRadius,\n    rx: task.barCornerRadius,\n    fill: processColor\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"rect\", {\n    fill: barColor,\n    x: task.x1,\n    width: projectWith,\n    y: task.y,\n    height: task.height / 2,\n    rx: task.barCornerRadius,\n    ry: task.barCornerRadius,\n    className: styles$8.projectTop\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    className: styles$8.projectTop,\n    points: projectLeftTriangle,\n    fill: barColor\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"polygon\", {\n    className: styles$8.projectTop,\n    points: projectRightTriangle,\n    fill: barColor\n  }));\n};\n\nvar style = {\"barLabel\":\"_3zRJQ\",\"barLabelOutside\":\"_3KcaM\"};\n\nvar TaskItem = function TaskItem(props) {\n  var _props = _extends({}, props),\n      task = _props.task,\n      arrowIndent = _props.arrowIndent,\n      isDelete = _props.isDelete,\n      taskHeight = _props.taskHeight,\n      isSelected = _props.isSelected,\n      rtl = _props.rtl,\n      onEventStart = _props.onEventStart;\n\n  var textRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null)),\n      taskItem = _useState[0],\n      setTaskItem = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true),\n      isTextInside = _useState2[0],\n      setIsTextInside = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    switch (task.typeInternal) {\n      case \"milestone\":\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Milestone, Object.assign({}, props)));\n        break;\n\n      case \"project\":\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Project, Object.assign({}, props)));\n        break;\n\n      case \"smalltask\":\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(BarSmall, Object.assign({}, props)));\n        break;\n\n      default:\n        setTaskItem(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Bar, Object.assign({}, props)));\n        break;\n    }\n  }, [task, isSelected]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (textRef.current) {\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\n    }\n  }, [textRef, task]);\n\n  var getX = function getX() {\n    var width = task.x2 - task.x1;\n    var hasChild = task.barChildren.length > 0;\n\n    if (isTextInside) {\n      return task.x1 + width * 0.5;\n    }\n\n    if (rtl && textRef.current) {\n      return task.x1 - textRef.current.getBBox().width - arrowIndent * +hasChild - arrowIndent * 0.2;\n    } else {\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\n    }\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    onKeyDown: function onKeyDown(e) {\n      switch (e.key) {\n        case \"Delete\":\n          {\n            if (isDelete) onEventStart(\"delete\", task, e);\n            break;\n          }\n      }\n\n      e.stopPropagation();\n    },\n    onMouseEnter: function onMouseEnter(e) {\n      onEventStart(\"mouseenter\", task, e);\n    },\n    onMouseLeave: function onMouseLeave(e) {\n      onEventStart(\"mouseleave\", task, e);\n    },\n    onDoubleClick: function onDoubleClick(e) {\n      onEventStart(\"dblclick\", task, e);\n    },\n    onClick: function onClick(e) {\n      onEventStart(\"click\", task, e);\n    },\n    onFocus: function onFocus() {\n      onEventStart(\"select\", task);\n    }\n  }, taskItem, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", {\n    x: getX(),\n    y: task.y + taskHeight * 0.5,\n    className: isTextInside ? style.barLabel :  style.barLabelOutside,\n    ref: textRef\n  }, task.name));\n};\n\nvar TaskGanttContent = function TaskGanttContent(_ref) {\n  var _svg$current;\n\n  var tasks = _ref.tasks,\n      dates = _ref.dates,\n      ganttEvent = _ref.ganttEvent,\n      selectedTask = _ref.selectedTask,\n      rowHeight = _ref.rowHeight,\n      columnWidth = _ref.columnWidth,\n      timeStep = _ref.timeStep,\n      svg = _ref.svg,\n      taskHeight = _ref.taskHeight,\n      arrowColor = _ref.arrowColor,\n      arrowIndent = _ref.arrowIndent,\n      fontFamily = _ref.fontFamily,\n      fontSize = _ref.fontSize,\n      rtl = _ref.rtl,\n      setGanttEvent = _ref.setGanttEvent,\n      setFailedTask = _ref.setFailedTask,\n      setSelectedTask = _ref.setSelectedTask,\n      onDateChange = _ref.onDateChange,\n      onProgressChange = _ref.onProgressChange,\n      onDoubleClick = _ref.onDoubleClick,\n      onClick = _ref.onClick,\n      onDelete = _ref.onDelete;\n  var point = svg === null || svg === void 0 ? void 0 : (_svg$current = svg.current) === null || _svg$current === void 0 ? void 0 : _svg$current.createSVGPoint();\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      xStep = _useState[0],\n      setXStep = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      initEventX1Delta = _useState2[0],\n      setInitEventX1Delta = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      isMoving = _useState3[0],\n      setIsMoving = _useState3[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var dateDelta = dates[1].getTime() - dates[0].getTime() - dates[1].getTimezoneOffset() * 60 * 1000 + dates[0].getTimezoneOffset() * 60 * 1000;\n    var newXStep = timeStep * columnWidth / dateDelta;\n    setXStep(newXStep);\n  }, [columnWidth, dates, timeStep]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var handleMouseMove = function handleMouseMove(event) {\n      try {\n        var _svg$current$getScree;\n\n        if (!ganttEvent.changedTask || !point || !(svg !== null && svg !== void 0 && svg.current)) return Promise.resolve();\n        event.preventDefault();\n        point.x = event.clientX;\n        var cursor = point.matrixTransform(svg === null || svg === void 0 ? void 0 : (_svg$current$getScree = svg.current.getScreenCTM()) === null || _svg$current$getScree === void 0 ? void 0 : _svg$current$getScree.inverse());\n\n        var _handleTaskBySVGMouse = handleTaskBySVGMouseEvent(cursor.x, ganttEvent.action, ganttEvent.changedTask, xStep, timeStep, initEventX1Delta, rtl),\n            isChanged = _handleTaskBySVGMouse.isChanged,\n            changedTask = _handleTaskBySVGMouse.changedTask;\n\n        if (isChanged) {\n          setGanttEvent({\n            action: ganttEvent.action,\n            changedTask: changedTask\n          });\n        }\n\n        return Promise.resolve();\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n\n    var handleMouseUp = function handleMouseUp(event) {\n      try {\n        var _svg$current$getScree2;\n\n        var _temp6 = function _temp6() {\n          if (!operationSuccess) {\n            setFailedTask(originalSelectedTask);\n          }\n        };\n\n        var action = ganttEvent.action,\n            originalSelectedTask = ganttEvent.originalSelectedTask,\n            changedTask = ganttEvent.changedTask;\n        if (!changedTask || !point || !(svg !== null && svg !== void 0 && svg.current) || !originalSelectedTask) return Promise.resolve();\n        event.preventDefault();\n        point.x = event.clientX;\n        var cursor = point.matrixTransform(svg === null || svg === void 0 ? void 0 : (_svg$current$getScree2 = svg.current.getScreenCTM()) === null || _svg$current$getScree2 === void 0 ? void 0 : _svg$current$getScree2.inverse());\n\n        var _handleTaskBySVGMouse2 = handleTaskBySVGMouseEvent(cursor.x, action, changedTask, xStep, timeStep, initEventX1Delta, rtl),\n            newChangedTask = _handleTaskBySVGMouse2.changedTask;\n\n        var isNotLikeOriginal = originalSelectedTask.start !== newChangedTask.start || originalSelectedTask.end !== newChangedTask.end || originalSelectedTask.progress !== newChangedTask.progress;\n        svg.current.removeEventListener(\"mousemove\", handleMouseMove);\n        svg.current.removeEventListener(\"mouseup\", handleMouseUp);\n        setGanttEvent({\n          action: \"\"\n        });\n        setIsMoving(false);\n        var operationSuccess = true;\n\n        var _temp7 = function () {\n          if ((action === \"move\" || action === \"end\" || action === \"start\") && onDateChange && isNotLikeOriginal) {\n            var _temp8 = _catch(function () {\n              return Promise.resolve(onDateChange(newChangedTask, newChangedTask.barChildren)).then(function (result) {\n                if (result !== undefined) {\n                  operationSuccess = result;\n                }\n              });\n            }, function () {\n              operationSuccess = false;\n            });\n\n            if (_temp8 && _temp8.then) return _temp8.then(function () {});\n          } else {\n            var _temp9 = function () {\n              if (onProgressChange && isNotLikeOriginal) {\n                var _temp10 = _catch(function () {\n                  return Promise.resolve(onProgressChange(newChangedTask, newChangedTask.barChildren)).then(function (result) {\n                    if (result !== undefined) {\n                      operationSuccess = result;\n                    }\n                  });\n                }, function () {\n                  operationSuccess = false;\n                });\n\n                if (_temp10 && _temp10.then) return _temp10.then(function () {});\n              }\n            }();\n\n            if (_temp9 && _temp9.then) return _temp9.then(function () {});\n          }\n        }();\n\n        return Promise.resolve(_temp7 && _temp7.then ? _temp7.then(_temp6) : _temp6(_temp7));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    };\n\n    if (!isMoving && (ganttEvent.action === \"move\" || ganttEvent.action === \"end\" || ganttEvent.action === \"start\" || ganttEvent.action === \"progress\") && svg !== null && svg !== void 0 && svg.current) {\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\n      setIsMoving(true);\n    }\n  }, [ganttEvent, xStep, initEventX1Delta, onProgressChange, timeStep, onDateChange, svg, isMoving, point, rtl, setFailedTask, setGanttEvent]);\n\n  var handleBarEventStart = function handleBarEventStart(action, task, event) {\n    try {\n      return Promise.resolve(function () {\n        if (!event) {\n          if (action === \"select\") {\n            setSelectedTask(task.id);\n          }\n        } else return function () {\n          if (isKeyboardEvent(event)) {\n            var _temp14 = function () {\n              if (action === \"delete\") {\n                var _temp15 = function () {\n                  if (onDelete) {\n                    var _temp16 = _catch(function () {\n                      return Promise.resolve(onDelete(task)).then(function (result) {\n                        if (result !== undefined && result) {\n                          setGanttEvent({\n                            action: action,\n                            changedTask: task\n                          });\n                        }\n                      });\n                    }, function (error) {\n                      console.error(\"Error on Delete. \" + error);\n                    });\n\n                    if (_temp16 && _temp16.then) return _temp16.then(function () {});\n                  }\n                }();\n\n                if (_temp15 && _temp15.then) return _temp15.then(function () {});\n              }\n            }();\n\n            if (_temp14 && _temp14.then) return _temp14.then(function () {});\n          } else if (action === \"mouseenter\") {\n            if (!ganttEvent.action) {\n              setGanttEvent({\n                action: action,\n                changedTask: task,\n                originalSelectedTask: task\n              });\n            }\n          } else if (action === \"mouseleave\") {\n            if (ganttEvent.action === \"mouseenter\") {\n              setGanttEvent({\n                action: \"\"\n              });\n            }\n          } else if (action === \"dblclick\") {\n            !!onDoubleClick && onDoubleClick(task);\n          } else if (action === \"click\") {\n            !!onClick && onClick(task);\n          } else if (action === \"move\") {\n            var _svg$current$getScree3;\n\n            if (!(svg !== null && svg !== void 0 && svg.current) || !point) return;\n            point.x = event.clientX;\n            var cursor = point.matrixTransform((_svg$current$getScree3 = svg.current.getScreenCTM()) === null || _svg$current$getScree3 === void 0 ? void 0 : _svg$current$getScree3.inverse());\n            setInitEventX1Delta(cursor.x - task.x1);\n            setGanttEvent({\n              action: action,\n              changedTask: task,\n              originalSelectedTask: task\n            });\n          } else {\n            setGanttEvent({\n              action: action,\n              changedTask: task,\n              originalSelectedTask: task\n            });\n          }\n        }();\n      }());\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"content\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"arrows\",\n    fill: arrowColor,\n    stroke: arrowColor\n  }, tasks.map(function (task) {\n    return task.barChildren.map(function (child) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Arrow, {\n        key: \"Arrow from \" + task.id + \" to \" + tasks[child.index].id,\n        taskFrom: task,\n        taskTo: tasks[child.index],\n        rowHeight: rowHeight,\n        taskHeight: taskHeight,\n        arrowIndent: arrowIndent,\n        rtl: rtl\n      });\n    });\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"g\", {\n    className: \"bar\",\n    fontFamily: fontFamily,\n    fontSize: fontSize\n  }, tasks.map(function (task) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskItem, {\n      task: task,\n      arrowIndent: arrowIndent,\n      taskHeight: taskHeight,\n      isProgressChangeable: !!onProgressChange && !task.isDisabled,\n      isDateChangeable: !!onDateChange && !task.isDisabled,\n      isDelete: !task.isDisabled,\n      onEventStart: handleBarEventStart,\n      key: task.id,\n      isSelected: !!selectedTask && task.id === selectedTask.id,\n      rtl: rtl\n    });\n  })));\n};\n\nvar styles$9 = {\"ganttVerticalContainer\":\"_CZjuD\",\"horizontalContainer\":\"_2B2zv\",\"wrapper\":\"_3eULf\"};\n\nvar TaskGantt = function TaskGantt(_ref) {\n  var gridProps = _ref.gridProps,\n      calendarProps = _ref.calendarProps,\n      barProps = _ref.barProps,\n      ganttHeight = _ref.ganttHeight,\n      scrollY = _ref.scrollY,\n      scrollX = _ref.scrollX;\n  var ganttSVGRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var horizontalContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var verticalGanttContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var newBarProps = _extends({}, barProps, {\n    svg: ganttSVGRef\n  });\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (verticalGanttContainerRef.current) {\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\n    }\n  }, [scrollX]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$9.ganttVerticalContainer,\n    ref: verticalGanttContainerRef,\n    dir: \"ltr\"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: gridProps.svgWidth,\n    height: calendarProps.headerHeight,\n    fontFamily: barProps.fontFamily\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Calendar, Object.assign({}, calendarProps))), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: horizontalContainerRef,\n    className: styles$9.horizontalContainer,\n    style: ganttHeight ? {\n      height: ganttHeight,\n      width: gridProps.svgWidth\n    } : {\n      width: gridProps.svgWidth\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: gridProps.svgWidth,\n    height: barProps.rowHeight * barProps.tasks.length,\n    fontFamily: barProps.fontFamily,\n    ref: ganttSVGRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Grid, Object.assign({}, gridProps)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskGanttContent, Object.assign({}, newBarProps)))));\n};\n\nvar styles$a = {\"scrollWrapper\":\"_2k9Ys\",\"scroll\":\"_19jgW\"};\n\nvar HorizontalScroll = function HorizontalScroll(_ref) {\n  var scroll = _ref.scroll,\n      svgWidth = _ref.svgWidth,\n      taskListWidth = _ref.taskListWidth,\n      rtl = _ref.rtl,\n      onScroll = _ref.onScroll;\n  var scrollRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (scrollRef.current) {\n      scrollRef.current.scrollLeft = scroll;\n    }\n  }, [scroll]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    dir: \"ltr\",\n    style: {\n      margin: rtl ? \"0px \" + taskListWidth + \"px 0px 0px\" : \"0px 0px 0px \" + taskListWidth + \"px\"\n    },\n    className: styles$a.scrollWrapper,\n    onScroll: onScroll,\n    ref: scrollRef\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      width: svgWidth\n    },\n    className: styles$a.scroll\n  }));\n};\n\nvar Gantt = function Gantt(_ref) {\n  var tasks = _ref.tasks,\n      _ref$headerHeight = _ref.headerHeight,\n      headerHeight = _ref$headerHeight === void 0 ? 50 : _ref$headerHeight,\n      _ref$columnWidth = _ref.columnWidth,\n      columnWidth = _ref$columnWidth === void 0 ? 60 : _ref$columnWidth,\n      _ref$listCellWidth = _ref.listCellWidth,\n      listCellWidth = _ref$listCellWidth === void 0 ? \"155px\" : _ref$listCellWidth,\n      _ref$rowHeight = _ref.rowHeight,\n      rowHeight = _ref$rowHeight === void 0 ? 50 : _ref$rowHeight,\n      _ref$ganttHeight = _ref.ganttHeight,\n      ganttHeight = _ref$ganttHeight === void 0 ? 0 : _ref$ganttHeight,\n      _ref$viewMode = _ref.viewMode,\n      viewMode = _ref$viewMode === void 0 ? ViewMode.Day : _ref$viewMode,\n      _ref$preStepsCount = _ref.preStepsCount,\n      preStepsCount = _ref$preStepsCount === void 0 ? 1 : _ref$preStepsCount,\n      _ref$locale = _ref.locale,\n      locale = _ref$locale === void 0 ? \"en-GB\" : _ref$locale,\n      _ref$barFill = _ref.barFill,\n      barFill = _ref$barFill === void 0 ? 60 : _ref$barFill,\n      _ref$barCornerRadius = _ref.barCornerRadius,\n      barCornerRadius = _ref$barCornerRadius === void 0 ? 3 : _ref$barCornerRadius,\n      _ref$barProgressColor = _ref.barProgressColor,\n      barProgressColor = _ref$barProgressColor === void 0 ? \"#a3a3ff\" : _ref$barProgressColor,\n      _ref$barProgressSelec = _ref.barProgressSelectedColor,\n      barProgressSelectedColor = _ref$barProgressSelec === void 0 ? \"#8282f5\" : _ref$barProgressSelec,\n      _ref$barBackgroundCol = _ref.barBackgroundColor,\n      barBackgroundColor = _ref$barBackgroundCol === void 0 ? \"#b8c2cc\" : _ref$barBackgroundCol,\n      _ref$barBackgroundSel = _ref.barBackgroundSelectedColor,\n      barBackgroundSelectedColor = _ref$barBackgroundSel === void 0 ? \"#aeb8c2\" : _ref$barBackgroundSel,\n      _ref$projectProgressC = _ref.projectProgressColor,\n      projectProgressColor = _ref$projectProgressC === void 0 ? \"#7db59a\" : _ref$projectProgressC,\n      _ref$projectProgressS = _ref.projectProgressSelectedColor,\n      projectProgressSelectedColor = _ref$projectProgressS === void 0 ? \"#59a985\" : _ref$projectProgressS,\n      _ref$projectBackgroun = _ref.projectBackgroundColor,\n      projectBackgroundColor = _ref$projectBackgroun === void 0 ? \"#fac465\" : _ref$projectBackgroun,\n      _ref$projectBackgroun2 = _ref.projectBackgroundSelectedColor,\n      projectBackgroundSelectedColor = _ref$projectBackgroun2 === void 0 ? \"#f7bb53\" : _ref$projectBackgroun2,\n      _ref$milestoneBackgro = _ref.milestoneBackgroundColor,\n      milestoneBackgroundColor = _ref$milestoneBackgro === void 0 ? \"#f1c453\" : _ref$milestoneBackgro,\n      _ref$milestoneBackgro2 = _ref.milestoneBackgroundSelectedColor,\n      milestoneBackgroundSelectedColor = _ref$milestoneBackgro2 === void 0 ? \"#f29e4c\" : _ref$milestoneBackgro2,\n      _ref$rtl = _ref.rtl,\n      rtl = _ref$rtl === void 0 ? false : _ref$rtl,\n      _ref$handleWidth = _ref.handleWidth,\n      handleWidth = _ref$handleWidth === void 0 ? 8 : _ref$handleWidth,\n      _ref$timeStep = _ref.timeStep,\n      timeStep = _ref$timeStep === void 0 ? 300000 : _ref$timeStep,\n      _ref$arrowColor = _ref.arrowColor,\n      arrowColor = _ref$arrowColor === void 0 ? \"grey\" : _ref$arrowColor,\n      _ref$fontFamily = _ref.fontFamily,\n      fontFamily = _ref$fontFamily === void 0 ? \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\" : _ref$fontFamily,\n      _ref$fontSize = _ref.fontSize,\n      fontSize = _ref$fontSize === void 0 ? \"14px\" : _ref$fontSize,\n      _ref$arrowIndent = _ref.arrowIndent,\n      arrowIndent = _ref$arrowIndent === void 0 ? 20 : _ref$arrowIndent,\n      _ref$todayColor = _ref.todayColor,\n      todayColor = _ref$todayColor === void 0 ? \"rgba(252, 248, 227, 0.5)\" : _ref$todayColor,\n      viewDate = _ref.viewDate,\n      _ref$TooltipContent = _ref.TooltipContent,\n      TooltipContent = _ref$TooltipContent === void 0 ? StandardTooltipContent : _ref$TooltipContent,\n      _ref$TaskListHeader = _ref.TaskListHeader,\n      TaskListHeader = _ref$TaskListHeader === void 0 ? TaskListHeaderDefault : _ref$TaskListHeader,\n      _ref$TaskListTable = _ref.TaskListTable,\n      TaskListTable = _ref$TaskListTable === void 0 ? TaskListTableDefault : _ref$TaskListTable,\n      onDateChange = _ref.onDateChange,\n      onProgressChange = _ref.onProgressChange,\n      onDoubleClick = _ref.onDoubleClick,\n      onClick = _ref.onClick,\n      onDelete = _ref.onDelete,\n      onSelect = _ref.onSelect,\n      onExpanderClick = _ref.onExpanderClick;\n  var wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var taskListRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(function () {\n    var _ganttDateRange = ganttDateRange(tasks, viewMode, preStepsCount),\n        startDate = _ganttDateRange[0],\n        endDate = _ganttDateRange[1];\n\n    return {\n      viewMode: viewMode,\n      dates: seedDates(startDate, endDate, viewMode)\n    };\n  }),\n      dateSetup = _useState[0],\n      setDateSetup = _useState[1];\n\n  var _useState2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(undefined),\n      currentViewDate = _useState2[0],\n      setCurrentViewDate = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      taskListWidth = _useState3[0],\n      setTaskListWidth = _useState3[1];\n\n  var _useState4 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      svgContainerWidth = _useState4[0],\n      setSvgContainerWidth = _useState4[1];\n\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(ganttHeight),\n      svgContainerHeight = _useState5[0],\n      setSvgContainerHeight = _useState5[1];\n\n  var _useState6 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),\n      barTasks = _useState6[0],\n      setBarTasks = _useState6[1];\n\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    action: \"\"\n  }),\n      ganttEvent = _useState7[0],\n      setGanttEvent = _useState7[1];\n\n  var taskHeight = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return rowHeight * barFill / 100;\n  }, [rowHeight, barFill]);\n\n  var _useState8 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),\n      selectedTask = _useState8[0],\n      setSelectedTask = _useState8[1];\n\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n      failedTask = _useState9[0],\n      setFailedTask = _useState9[1];\n\n  var svgWidth = dateSetup.dates.length * columnWidth;\n  var ganttFullHeight = barTasks.length * rowHeight;\n\n  var _useState10 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),\n      scrollY = _useState10[0],\n      setScrollY = _useState10[1];\n\n  var _useState11 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1),\n      scrollX = _useState11[0],\n      setScrollX = _useState11[1];\n\n  var _useState12 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      ignoreScrollEvent = _useState12[0],\n      setIgnoreScrollEvent = _useState12[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var filteredTasks;\n\n    if (onExpanderClick) {\n      filteredTasks = removeHiddenTasks(tasks);\n    } else {\n      filteredTasks = tasks;\n    }\n\n    filteredTasks = filteredTasks.sort(sortTasks);\n\n    var _ganttDateRange2 = ganttDateRange(filteredTasks, viewMode, preStepsCount),\n        startDate = _ganttDateRange2[0],\n        endDate = _ganttDateRange2[1];\n\n    var newDates = seedDates(startDate, endDate, viewMode);\n\n    if (rtl) {\n      newDates = newDates.reverse();\n\n      if (scrollX === -1) {\n        setScrollX(newDates.length * columnWidth);\n      }\n    }\n\n    setDateSetup({\n      dates: newDates,\n      viewMode: viewMode\n    });\n    setBarTasks(convertToBarTasks(filteredTasks, newDates, columnWidth, rowHeight, taskHeight, barCornerRadius, handleWidth, rtl, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor));\n  }, [tasks, viewMode, preStepsCount, rowHeight, barCornerRadius, columnWidth, taskHeight, handleWidth, barProgressColor, barProgressSelectedColor, barBackgroundColor, barBackgroundSelectedColor, projectProgressColor, projectProgressSelectedColor, projectBackgroundColor, projectBackgroundSelectedColor, milestoneBackgroundColor, milestoneBackgroundSelectedColor, rtl, scrollX, onExpanderClick]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (viewMode === dateSetup.viewMode && (viewDate && !currentViewDate || viewDate && (currentViewDate === null || currentViewDate === void 0 ? void 0 : currentViewDate.valueOf()) !== viewDate.valueOf())) {\n      var dates = dateSetup.dates;\n      var index = dates.findIndex(function (d, i) {\n        return viewDate.valueOf() >= d.valueOf() && i + 1 !== dates.length && viewDate.valueOf() < dates[i + 1].valueOf();\n      });\n\n      if (index === -1) {\n        return;\n      }\n\n      setCurrentViewDate(viewDate);\n      setScrollX(columnWidth * index);\n    }\n  }, [viewDate, columnWidth, dateSetup.dates, dateSetup.viewMode, viewMode, currentViewDate, setCurrentViewDate]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var changedTask = ganttEvent.changedTask,\n        action = ganttEvent.action;\n\n    if (changedTask) {\n      if (action === \"delete\") {\n        setGanttEvent({\n          action: \"\"\n        });\n        setBarTasks(barTasks.filter(function (t) {\n          return t.id !== changedTask.id;\n        }));\n      } else if (action === \"move\" || action === \"end\" || action === \"start\" || action === \"progress\") {\n        var prevStateTask = barTasks.find(function (t) {\n          return t.id === changedTask.id;\n        });\n\n        if (prevStateTask && (prevStateTask.start.getTime() !== changedTask.start.getTime() || prevStateTask.end.getTime() !== changedTask.end.getTime() || prevStateTask.progress !== changedTask.progress)) {\n          var newTaskList = barTasks.map(function (t) {\n            return t.id === changedTask.id ? changedTask : t;\n          });\n          setBarTasks(newTaskList);\n        }\n      }\n    }\n  }, [ganttEvent, barTasks]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (failedTask) {\n      setBarTasks(barTasks.map(function (t) {\n        return t.id !== failedTask.id ? t : failedTask;\n      }));\n      setFailedTask(null);\n    }\n  }, [failedTask, barTasks]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!listCellWidth) {\n      setTaskListWidth(0);\n    }\n\n    if (taskListRef.current) {\n      setTaskListWidth(taskListRef.current.offsetWidth);\n    }\n  }, [taskListRef, listCellWidth]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (wrapperRef.current) {\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\n    }\n  }, [wrapperRef, taskListWidth]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (ganttHeight) {\n      setSvgContainerHeight(ganttHeight + headerHeight);\n    } else {\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\n    }\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _wrapperRef$current;\n\n    var handleWheel = function handleWheel(event) {\n      if (event.shiftKey || event.deltaX) {\n        var scrollMove = event.deltaX ? event.deltaX : event.deltaY;\n        var newScrollX = scrollX + scrollMove;\n\n        if (newScrollX < 0) {\n          newScrollX = 0;\n        } else if (newScrollX > svgWidth) {\n          newScrollX = svgWidth;\n        }\n\n        setScrollX(newScrollX);\n        event.preventDefault();\n      } else if (ganttHeight) {\n        var newScrollY = scrollY + event.deltaY;\n\n        if (newScrollY < 0) {\n          newScrollY = 0;\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\n          newScrollY = ganttFullHeight - ganttHeight;\n        }\n\n        if (newScrollY !== scrollY) {\n          setScrollY(newScrollY);\n          event.preventDefault();\n        }\n      }\n\n      setIgnoreScrollEvent(true);\n    };\n\n    (_wrapperRef$current = wrapperRef.current) === null || _wrapperRef$current === void 0 ? void 0 : _wrapperRef$current.addEventListener(\"wheel\", handleWheel, {\n      passive: false\n    });\n    return function () {\n      var _wrapperRef$current2;\n\n      (_wrapperRef$current2 = wrapperRef.current) === null || _wrapperRef$current2 === void 0 ? void 0 : _wrapperRef$current2.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [wrapperRef, scrollY, scrollX, ganttHeight, svgWidth, rtl, ganttFullHeight]);\n\n  var handleScrollY = function handleScrollY(event) {\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\n      setScrollY(event.currentTarget.scrollTop);\n      setIgnoreScrollEvent(true);\n    } else {\n      setIgnoreScrollEvent(false);\n    }\n  };\n\n  var handleScrollX = function handleScrollX(event) {\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\n      setScrollX(event.currentTarget.scrollLeft);\n      setIgnoreScrollEvent(true);\n    } else {\n      setIgnoreScrollEvent(false);\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    event.preventDefault();\n    var newScrollY = scrollY;\n    var newScrollX = scrollX;\n    var isX = true;\n\n    switch (event.key) {\n      case \"Down\":\n      case \"ArrowDown\":\n        newScrollY += rowHeight;\n        isX = false;\n        break;\n\n      case \"Up\":\n      case \"ArrowUp\":\n        newScrollY -= rowHeight;\n        isX = false;\n        break;\n\n      case \"Left\":\n      case \"ArrowLeft\":\n        newScrollX -= columnWidth;\n        break;\n\n      case \"Right\":\n      case \"ArrowRight\":\n        newScrollX += columnWidth;\n        break;\n    }\n\n    if (isX) {\n      if (newScrollX < 0) {\n        newScrollX = 0;\n      } else if (newScrollX > svgWidth) {\n        newScrollX = svgWidth;\n      }\n\n      setScrollX(newScrollX);\n    } else {\n      if (newScrollY < 0) {\n        newScrollY = 0;\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\n        newScrollY = ganttFullHeight - ganttHeight;\n      }\n\n      setScrollY(newScrollY);\n    }\n\n    setIgnoreScrollEvent(true);\n  };\n\n  var handleSelectedTask = function handleSelectedTask(taskId) {\n    var newSelectedTask = barTasks.find(function (t) {\n      return t.id === taskId;\n    });\n    var oldSelectedTask = barTasks.find(function (t) {\n      return !!selectedTask && t.id === selectedTask.id;\n    });\n\n    if (onSelect) {\n      if (oldSelectedTask) {\n        onSelect(oldSelectedTask, false);\n      }\n\n      if (newSelectedTask) {\n        onSelect(newSelectedTask, true);\n      }\n    }\n\n    setSelectedTask(newSelectedTask);\n  };\n\n  var handleExpanderClick = function handleExpanderClick(task) {\n    if (onExpanderClick && task.hideChildren !== undefined) {\n      onExpanderClick(_extends({}, task, {\n        hideChildren: !task.hideChildren\n      }));\n    }\n  };\n\n  var gridProps = {\n    columnWidth: columnWidth,\n    svgWidth: svgWidth,\n    tasks: tasks,\n    rowHeight: rowHeight,\n    dates: dateSetup.dates,\n    todayColor: todayColor,\n    rtl: rtl\n  };\n  var calendarProps = {\n    dateSetup: dateSetup,\n    locale: locale,\n    viewMode: viewMode,\n    headerHeight: headerHeight,\n    columnWidth: columnWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    rtl: rtl\n  };\n  var barProps = {\n    tasks: barTasks,\n    dates: dateSetup.dates,\n    ganttEvent: ganttEvent,\n    selectedTask: selectedTask,\n    rowHeight: rowHeight,\n    taskHeight: taskHeight,\n    columnWidth: columnWidth,\n    arrowColor: arrowColor,\n    timeStep: timeStep,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    arrowIndent: arrowIndent,\n    svgWidth: svgWidth,\n    rtl: rtl,\n    setGanttEvent: setGanttEvent,\n    setFailedTask: setFailedTask,\n    setSelectedTask: handleSelectedTask,\n    onDateChange: onDateChange,\n    onProgressChange: onProgressChange,\n    onDoubleClick: onDoubleClick,\n    onClick: onClick,\n    onDelete: onDelete\n  };\n  var tableProps = {\n    rowHeight: rowHeight,\n    rowWidth: listCellWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    tasks: barTasks,\n    locale: locale,\n    headerHeight: headerHeight,\n    scrollY: scrollY,\n    ganttHeight: ganttHeight,\n    horizontalContainerClass: styles$9.horizontalContainer,\n    selectedTask: selectedTask,\n    taskListRef: taskListRef,\n    setSelectedTask: handleSelectedTask,\n    onExpanderClick: handleExpanderClick,\n    TaskListHeader: TaskListHeader,\n    TaskListTable: TaskListTable\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: styles$9.wrapper,\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    ref: wrapperRef\n  }, listCellWidth && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskList, Object.assign({}, tableProps)), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(TaskGantt, {\n    gridProps: gridProps,\n    calendarProps: calendarProps,\n    barProps: barProps,\n    ganttHeight: ganttHeight,\n    scrollY: scrollY,\n    scrollX: scrollX\n  }), ganttEvent.changedTask && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tooltip, {\n    arrowIndent: arrowIndent,\n    rowHeight: rowHeight,\n    svgContainerHeight: svgContainerHeight,\n    svgContainerWidth: svgContainerWidth,\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    scrollX: scrollX,\n    scrollY: scrollY,\n    task: ganttEvent.changedTask,\n    headerHeight: headerHeight,\n    taskListWidth: taskListWidth,\n    TooltipContent: TooltipContent,\n    rtl: rtl,\n    svgWidth: svgWidth\n  }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(VerticalScroll, {\n    ganttFullHeight: ganttFullHeight,\n    ganttHeight: ganttHeight,\n    headerHeight: headerHeight,\n    scroll: scrollY,\n    onScroll: handleScrollY,\n    rtl: rtl\n  })), react__WEBPACK_IMPORTED_MODULE_0___default().createElement(HorizontalScroll, {\n    svgWidth: svgWidth,\n    taskListWidth: taskListWidth,\n    scroll: scrollX,\n    rtl: rtl,\n    onScroll: handleScrollX\n  }));\n};\n\n\n//# sourceMappingURL=index.modern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZ2FudHQtdGFzay1yZWFjdC9kaXN0L2luZGV4Lm1vZGVybi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9FOztBQUVwRTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsU0FBUzs7QUFFbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzRUFBc0UsNEJBQTRCO0FBQ2xHOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsZ0NBQWdDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIsa0NBQWtDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCOztBQUUvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCQUErQjs7QUFFL0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBLGdCQUFnQjs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0EsR0FBRyxFQUFFLDBEQUFtQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxHQUFHLDBEQUFtQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUywwREFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRywwREFBbUI7QUFDekI7QUFDQSxHQUFHLHNCQUFzQiwwREFBbUIsWUFBWSwwREFBbUI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRywwREFBbUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsNEJBQTRCLDBEQUFtQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRywwREFBbUI7QUFDekI7QUFDQSxHQUFHLDBCQUEwQiwwREFBbUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBO0FBQ0EsR0FBRyxFQUFFLDBEQUFtQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxHQUFHLDBEQUFtQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRywwREFBbUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsR0FBRywwREFBbUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsR0FBRyxHQUFHLDBEQUFtQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsYUFBYTs7QUFFYjtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsNkNBQU07O0FBRXRCLGtCQUFrQiwrQ0FBUSxDQUFDLDBEQUFtQjtBQUM5QztBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBOztBQUVBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0Esb0JBQW9CLDBEQUFtQiw0QkFBNEI7QUFDbkU7O0FBRUE7QUFDQSxvQkFBb0IsMERBQW1CLDBCQUEwQjtBQUNqRTs7QUFFQTtBQUNBLG9CQUFvQiwwREFBbUIsMkJBQTJCO0FBQ2xFOztBQUVBO0FBQ0Esb0JBQW9CLDBEQUFtQixzQkFBc0I7QUFDN0Q7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBLFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHLFlBQVksMERBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IsK0NBQVE7QUFDMUI7QUFDQTs7QUFFQSxtQkFBbUIsK0NBQVE7QUFDM0I7QUFDQTs7QUFFQSxtQkFBbUIsK0NBQVE7QUFDM0I7QUFDQTs7QUFFQSxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2I7QUFDQSxhQUFhOztBQUViLHdFQUF3RTtBQUN4RSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCOztBQUVqQiwrRUFBK0U7QUFDL0U7QUFDQSxhQUFhOztBQUViLHdFQUF3RTtBQUN4RTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSx1QkFBdUI7QUFDdkIscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCOztBQUVyQixtRkFBbUY7QUFDbkY7QUFDQSxpQkFBaUI7O0FBRWpCLCtFQUErRTtBQUMvRTtBQUNBLGFBQWE7O0FBRWIsMkVBQTJFO0FBQzNFLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLDBEQUFtQjtBQUM1QjtBQUNBLEdBQUcsRUFBRSwwREFBbUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsYUFBYSwwREFBbUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUcsSUFBSSwwREFBbUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFdBQVcsMERBQW1CO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZDQUFNO0FBQzFCLCtCQUErQiw2Q0FBTTtBQUNyQyxrQ0FBa0MsNkNBQU07O0FBRXhDLCtCQUErQjtBQUMvQjtBQUNBLEdBQUc7O0FBRUgsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CLDJCQUEyQixvQkFBb0IsMERBQW1CO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsRUFBRSwwREFBbUIsdUJBQXVCLGVBQWUsMERBQW1CLG1DQUFtQztBQUNwSDs7QUFFQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBTTtBQUN4QixFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsMERBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHLEVBQUUsMERBQW1CO0FBQ3hCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDZDQUFNO0FBQ3pCLG9CQUFvQiw2Q0FBTTs7QUFFMUIsa0JBQWtCLCtDQUFRO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBOztBQUVBLG1CQUFtQiwrQ0FBUTtBQUMzQjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLG1CQUFtQiw4Q0FBTztBQUMxQjtBQUNBLEdBQUc7O0FBRUgsbUJBQW1CLCtDQUFRO0FBQzNCO0FBQ0E7O0FBRUEsbUJBQW1CLCtDQUFRO0FBQzNCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxvQkFBb0IsK0NBQVE7QUFDNUI7QUFDQTs7QUFFQSxvQkFBb0IsK0NBQVE7QUFDNUI7QUFDQTs7QUFFQSxvQkFBb0IsK0NBQVE7QUFDNUI7QUFDQTs7QUFFQSxFQUFFLGdEQUFTO0FBQ1g7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywwREFBbUIsY0FBYywwREFBbUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLG1CQUFtQiwwREFBbUIsMkJBQTJCLGdCQUFnQiwwREFBbUI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyw2QkFBNkIsMERBQW1CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLEdBQUcsMERBQW1CO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSSwwREFBbUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZW1hbnRocmVkZHkvRGVza3RvcC9Qcm9qZWN0L2NsaWVudC9ub2RlX21vZHVsZXMvZ2FudHQtdGFzay1yZWFjdC9kaXN0L2luZGV4Lm1vZGVybi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5mdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICByZXR1cm4gYXJyMjtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgaWYgKGl0KSBvID0gaXQ7XG4gICAgdmFyIGkgPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHtcbiAgICAgICAgZG9uZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbnZhciBWaWV3TW9kZTtcblxuKGZ1bmN0aW9uIChWaWV3TW9kZSkge1xuICBWaWV3TW9kZVtcIkhvdXJcIl0gPSBcIkhvdXJcIjtcbiAgVmlld01vZGVbXCJRdWFydGVyRGF5XCJdID0gXCJRdWFydGVyIERheVwiO1xuICBWaWV3TW9kZVtcIkhhbGZEYXlcIl0gPSBcIkhhbGYgRGF5XCI7XG4gIFZpZXdNb2RlW1wiRGF5XCJdID0gXCJEYXlcIjtcbiAgVmlld01vZGVbXCJXZWVrXCJdID0gXCJXZWVrXCI7XG4gIFZpZXdNb2RlW1wiTW9udGhcIl0gPSBcIk1vbnRoXCI7XG4gIFZpZXdNb2RlW1wiWWVhclwiXSA9IFwiWWVhclwiO1xufSkoVmlld01vZGUgfHwgKFZpZXdNb2RlID0ge30pKTtcblxudmFyIGludGxEVENhY2hlID0ge307XG52YXIgZ2V0Q2FjaGVkRGF0ZVRpbWVGb3JtYXQgPSBmdW5jdGlvbiBnZXRDYWNoZWREYXRlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpIHtcbiAgaWYgKG9wdHMgPT09IHZvaWQgMCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuXG4gIHZhciBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7XG4gIHZhciBkdGYgPSBpbnRsRFRDYWNoZVtrZXldO1xuXG4gIGlmICghZHRmKSB7XG4gICAgZHRmID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jU3RyaW5nLCBvcHRzKTtcbiAgICBpbnRsRFRDYWNoZVtrZXldID0gZHRmO1xuICB9XG5cbiAgcmV0dXJuIGR0Zjtcbn07XG52YXIgYWRkVG9EYXRlID0gZnVuY3Rpb24gYWRkVG9EYXRlKGRhdGUsIHF1YW50aXR5LCBzY2FsZSkge1xuICB2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSArIChzY2FsZSA9PT0gXCJ5ZWFyXCIgPyBxdWFudGl0eSA6IDApLCBkYXRlLmdldE1vbnRoKCkgKyAoc2NhbGUgPT09IFwibW9udGhcIiA/IHF1YW50aXR5IDogMCksIGRhdGUuZ2V0RGF0ZSgpICsgKHNjYWxlID09PSBcImRheVwiID8gcXVhbnRpdHkgOiAwKSwgZGF0ZS5nZXRIb3VycygpICsgKHNjYWxlID09PSBcImhvdXJcIiA/IHF1YW50aXR5IDogMCksIGRhdGUuZ2V0TWludXRlcygpICsgKHNjYWxlID09PSBcIm1pbnV0ZVwiID8gcXVhbnRpdHkgOiAwKSwgZGF0ZS5nZXRTZWNvbmRzKCkgKyAoc2NhbGUgPT09IFwic2Vjb25kXCIgPyBxdWFudGl0eSA6IDApLCBkYXRlLmdldE1pbGxpc2Vjb25kcygpICsgKHNjYWxlID09PSBcIm1pbGxpc2Vjb25kXCIgPyBxdWFudGl0eSA6IDApKTtcbiAgcmV0dXJuIG5ld0RhdGU7XG59O1xudmFyIHN0YXJ0T2ZEYXRlID0gZnVuY3Rpb24gc3RhcnRPZkRhdGUoZGF0ZSwgc2NhbGUpIHtcbiAgdmFyIHNjb3JlcyA9IFtcIm1pbGxpc2Vjb25kXCIsIFwic2Vjb25kXCIsIFwibWludXRlXCIsIFwiaG91clwiLCBcImRheVwiLCBcIm1vbnRoXCIsIFwieWVhclwiXTtcblxuICB2YXIgc2hvdWxkUmVzZXQgPSBmdW5jdGlvbiBzaG91bGRSZXNldChfc2NhbGUpIHtcbiAgICB2YXIgbWF4U2NvcmUgPSBzY29yZXMuaW5kZXhPZihzY2FsZSk7XG4gICAgcmV0dXJuIHNjb3Jlcy5pbmRleE9mKF9zY2FsZSkgPD0gbWF4U2NvcmU7XG4gIH07XG5cbiAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIHNob3VsZFJlc2V0KFwieWVhclwiKSA/IDAgOiBkYXRlLmdldE1vbnRoKCksIHNob3VsZFJlc2V0KFwibW9udGhcIikgPyAxIDogZGF0ZS5nZXREYXRlKCksIHNob3VsZFJlc2V0KFwiZGF5XCIpID8gMCA6IGRhdGUuZ2V0SG91cnMoKSwgc2hvdWxkUmVzZXQoXCJob3VyXCIpID8gMCA6IGRhdGUuZ2V0TWludXRlcygpLCBzaG91bGRSZXNldChcIm1pbnV0ZVwiKSA/IDAgOiBkYXRlLmdldFNlY29uZHMoKSwgc2hvdWxkUmVzZXQoXCJzZWNvbmRcIikgPyAwIDogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSk7XG4gIHJldHVybiBuZXdEYXRlO1xufTtcbnZhciBnYW50dERhdGVSYW5nZSA9IGZ1bmN0aW9uIGdhbnR0RGF0ZVJhbmdlKHRhc2tzLCB2aWV3TW9kZSwgcHJlU3RlcHNDb3VudCkge1xuICB2YXIgbmV3U3RhcnREYXRlID0gdGFza3NbMF0uc3RhcnQ7XG4gIHZhciBuZXdFbmREYXRlID0gdGFza3NbMF0uc3RhcnQ7XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0YXNrcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgdmFyIHRhc2sgPSBfc3RlcC52YWx1ZTtcblxuICAgIGlmICh0YXNrLnN0YXJ0IDwgbmV3U3RhcnREYXRlKSB7XG4gICAgICBuZXdTdGFydERhdGUgPSB0YXNrLnN0YXJ0O1xuICAgIH1cblxuICAgIGlmICh0YXNrLmVuZCA+IG5ld0VuZERhdGUpIHtcbiAgICAgIG5ld0VuZERhdGUgPSB0YXNrLmVuZDtcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKHZpZXdNb2RlKSB7XG4gICAgY2FzZSBWaWV3TW9kZS5ZZWFyOlxuICAgICAgbmV3U3RhcnREYXRlID0gYWRkVG9EYXRlKG5ld1N0YXJ0RGF0ZSwgLTEsIFwieWVhclwiKTtcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IHN0YXJ0T2ZEYXRlKG5ld1N0YXJ0RGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IGFkZFRvRGF0ZShuZXdFbmREYXRlLCAxLCBcInllYXJcIik7XG4gICAgICBuZXdFbmREYXRlID0gc3RhcnRPZkRhdGUobmV3RW5kRGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLk1vbnRoOlxuICAgICAgbmV3U3RhcnREYXRlID0gYWRkVG9EYXRlKG5ld1N0YXJ0RGF0ZSwgLTEgKiBwcmVTdGVwc0NvdW50LCBcIm1vbnRoXCIpO1xuICAgICAgbmV3U3RhcnREYXRlID0gc3RhcnRPZkRhdGUobmV3U3RhcnREYXRlLCBcIm1vbnRoXCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IGFkZFRvRGF0ZShuZXdFbmREYXRlLCAxLCBcInllYXJcIik7XG4gICAgICBuZXdFbmREYXRlID0gc3RhcnRPZkRhdGUobmV3RW5kRGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLldlZWs6XG4gICAgICBuZXdTdGFydERhdGUgPSBzdGFydE9mRGF0ZShuZXdTdGFydERhdGUsIFwiZGF5XCIpO1xuICAgICAgbmV3U3RhcnREYXRlID0gYWRkVG9EYXRlKGdldE1vbmRheShuZXdTdGFydERhdGUpLCAtNyAqIHByZVN0ZXBzQ291bnQsIFwiZGF5XCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IHN0YXJ0T2ZEYXRlKG5ld0VuZERhdGUsIFwiZGF5XCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IGFkZFRvRGF0ZShuZXdFbmREYXRlLCAxLjUsIFwibW9udGhcIik7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuRGF5OlxuICAgICAgbmV3U3RhcnREYXRlID0gc3RhcnRPZkRhdGUobmV3U3RhcnREYXRlLCBcImRheVwiKTtcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IGFkZFRvRGF0ZShuZXdTdGFydERhdGUsIC0xICogcHJlU3RlcHNDb3VudCwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gc3RhcnRPZkRhdGUobmV3RW5kRGF0ZSwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gYWRkVG9EYXRlKG5ld0VuZERhdGUsIDE5LCBcImRheVwiKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBWaWV3TW9kZS5RdWFydGVyRGF5OlxuICAgICAgbmV3U3RhcnREYXRlID0gc3RhcnRPZkRhdGUobmV3U3RhcnREYXRlLCBcImRheVwiKTtcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IGFkZFRvRGF0ZShuZXdTdGFydERhdGUsIC0xICogcHJlU3RlcHNDb3VudCwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gc3RhcnRPZkRhdGUobmV3RW5kRGF0ZSwgXCJkYXlcIik7XG4gICAgICBuZXdFbmREYXRlID0gYWRkVG9EYXRlKG5ld0VuZERhdGUsIDY2LCBcImhvdXJcIik7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgVmlld01vZGUuSGFsZkRheTpcbiAgICAgIG5ld1N0YXJ0RGF0ZSA9IHN0YXJ0T2ZEYXRlKG5ld1N0YXJ0RGF0ZSwgXCJkYXlcIik7XG4gICAgICBuZXdTdGFydERhdGUgPSBhZGRUb0RhdGUobmV3U3RhcnREYXRlLCAtMSAqIHByZVN0ZXBzQ291bnQsIFwiZGF5XCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IHN0YXJ0T2ZEYXRlKG5ld0VuZERhdGUsIFwiZGF5XCIpO1xuICAgICAgbmV3RW5kRGF0ZSA9IGFkZFRvRGF0ZShuZXdFbmREYXRlLCAxMDgsIFwiaG91clwiKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBWaWV3TW9kZS5Ib3VyOlxuICAgICAgbmV3U3RhcnREYXRlID0gc3RhcnRPZkRhdGUobmV3U3RhcnREYXRlLCBcImhvdXJcIik7XG4gICAgICBuZXdTdGFydERhdGUgPSBhZGRUb0RhdGUobmV3U3RhcnREYXRlLCAtMSAqIHByZVN0ZXBzQ291bnQsIFwiaG91clwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBzdGFydE9mRGF0ZShuZXdFbmREYXRlLCBcImRheVwiKTtcbiAgICAgIG5ld0VuZERhdGUgPSBhZGRUb0RhdGUobmV3RW5kRGF0ZSwgMSwgXCJkYXlcIik7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBbbmV3U3RhcnREYXRlLCBuZXdFbmREYXRlXTtcbn07XG52YXIgc2VlZERhdGVzID0gZnVuY3Rpb24gc2VlZERhdGVzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdmlld01vZGUpIHtcbiAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgdmFyIGRhdGVzID0gW2N1cnJlbnREYXRlXTtcblxuICB3aGlsZSAoY3VycmVudERhdGUgPCBlbmREYXRlKSB7XG4gICAgc3dpdGNoICh2aWV3TW9kZSkge1xuICAgICAgY2FzZSBWaWV3TW9kZS5ZZWFyOlxuICAgICAgICBjdXJyZW50RGF0ZSA9IGFkZFRvRGF0ZShjdXJyZW50RGF0ZSwgMSwgXCJ5ZWFyXCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBWaWV3TW9kZS5Nb250aDpcbiAgICAgICAgY3VycmVudERhdGUgPSBhZGRUb0RhdGUoY3VycmVudERhdGUsIDEsIFwibW9udGhcIik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFZpZXdNb2RlLldlZWs6XG4gICAgICAgIGN1cnJlbnREYXRlID0gYWRkVG9EYXRlKGN1cnJlbnREYXRlLCA3LCBcImRheVwiKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVmlld01vZGUuRGF5OlxuICAgICAgICBjdXJyZW50RGF0ZSA9IGFkZFRvRGF0ZShjdXJyZW50RGF0ZSwgMSwgXCJkYXlcIik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFZpZXdNb2RlLkhhbGZEYXk6XG4gICAgICAgIGN1cnJlbnREYXRlID0gYWRkVG9EYXRlKGN1cnJlbnREYXRlLCAxMiwgXCJob3VyXCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBWaWV3TW9kZS5RdWFydGVyRGF5OlxuICAgICAgICBjdXJyZW50RGF0ZSA9IGFkZFRvRGF0ZShjdXJyZW50RGF0ZSwgNiwgXCJob3VyXCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBWaWV3TW9kZS5Ib3VyOlxuICAgICAgICBjdXJyZW50RGF0ZSA9IGFkZFRvRGF0ZShjdXJyZW50RGF0ZSwgMSwgXCJob3VyXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkYXRlcy5wdXNoKGN1cnJlbnREYXRlKTtcbiAgfVxuXG4gIHJldHVybiBkYXRlcztcbn07XG52YXIgZ2V0TG9jYWxlTW9udGggPSBmdW5jdGlvbiBnZXRMb2NhbGVNb250aChkYXRlLCBsb2NhbGUpIHtcbiAgdmFyIGJvdHRvbVZhbHVlID0gZ2V0Q2FjaGVkRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7XG4gICAgbW9udGg6IFwibG9uZ1wiXG4gIH0pLmZvcm1hdChkYXRlKTtcbiAgYm90dG9tVmFsdWUgPSBib3R0b21WYWx1ZS5yZXBsYWNlKGJvdHRvbVZhbHVlWzBdLCBib3R0b21WYWx1ZVswXS50b0xvY2FsZVVwcGVyQ2FzZSgpKTtcbiAgcmV0dXJuIGJvdHRvbVZhbHVlO1xufTtcbnZhciBnZXRMb2NhbERheU9mV2VlayA9IGZ1bmN0aW9uIGdldExvY2FsRGF5T2ZXZWVrKGRhdGUsIGxvY2FsZSwgZm9ybWF0KSB7XG4gIHZhciBib3R0b21WYWx1ZSA9IGdldENhY2hlZERhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgIHdlZWtkYXk6IGZvcm1hdFxuICB9KS5mb3JtYXQoZGF0ZSk7XG4gIGJvdHRvbVZhbHVlID0gYm90dG9tVmFsdWUucmVwbGFjZShib3R0b21WYWx1ZVswXSwgYm90dG9tVmFsdWVbMF0udG9Mb2NhbGVVcHBlckNhc2UoKSk7XG4gIHJldHVybiBib3R0b21WYWx1ZTtcbn07XG5cbnZhciBnZXRNb25kYXkgPSBmdW5jdGlvbiBnZXRNb25kYXkoZGF0ZSkge1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSBkYXRlLmdldERhdGUoKSAtIGRheSArIChkYXkgPT09IDAgPyAtNiA6IDEpO1xuICByZXR1cm4gbmV3IERhdGUoZGF0ZS5zZXREYXRlKGRpZmYpKTtcbn07XG5cbnZhciBnZXRXZWVrTnVtYmVySVNPODYwMSA9IGZ1bmN0aW9uIGdldFdlZWtOdW1iZXJJU084NjAxKGRhdGUpIHtcbiAgdmFyIHRtcERhdGUgPSBuZXcgRGF0ZShkYXRlLnZhbHVlT2YoKSk7XG4gIHZhciBkYXlOdW1iZXIgPSAodG1wRGF0ZS5nZXREYXkoKSArIDYpICUgNztcbiAgdG1wRGF0ZS5zZXREYXRlKHRtcERhdGUuZ2V0RGF0ZSgpIC0gZGF5TnVtYmVyICsgMyk7XG4gIHZhciBmaXJzdFRodXJzZGF5ID0gdG1wRGF0ZS52YWx1ZU9mKCk7XG4gIHRtcERhdGUuc2V0TW9udGgoMCwgMSk7XG5cbiAgaWYgKHRtcERhdGUuZ2V0RGF5KCkgIT09IDQpIHtcbiAgICB0bXBEYXRlLnNldE1vbnRoKDAsIDEgKyAoNCAtIHRtcERhdGUuZ2V0RGF5KCkgKyA3KSAlIDcpO1xuICB9XG5cbiAgdmFyIHdlZWtOdW1iZXIgPSAoMSArIE1hdGguY2VpbCgoZmlyc3RUaHVyc2RheSAtIHRtcERhdGUudmFsdWVPZigpKSAvIDYwNDgwMDAwMCkpLnRvU3RyaW5nKCk7XG5cbiAgaWYgKHdlZWtOdW1iZXIubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIFwiMFwiICsgd2Vla051bWJlcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gd2Vla051bWJlcjtcbiAgfVxufTtcbnZhciBnZXREYXlzSW5Nb250aCA9IGZ1bmN0aW9uIGdldERheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSB7XG4gIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIDApLmdldERhdGUoKTtcbn07XG5cbnZhciBzdHlsZXMgPSB7XCJnYW50dFRhYmxlXCI6XCJfM195Z0VcIixcImdhbnR0VGFibGVfSGVhZGVyXCI6XCJfMW5CT3RcIixcImdhbnR0VGFibGVfSGVhZGVyU2VwYXJhdG9yXCI6XCJfMmVaelFcIixcImdhbnR0VGFibGVfSGVhZGVySXRlbVwiOlwiX1d1UTBmXCJ9O1xuXG52YXIgVGFza0xpc3RIZWFkZXJEZWZhdWx0ID0gZnVuY3Rpb24gVGFza0xpc3RIZWFkZXJEZWZhdWx0KF9yZWYpIHtcbiAgdmFyIGhlYWRlckhlaWdodCA9IF9yZWYuaGVhZGVySGVpZ2h0LFxuICAgICAgZm9udEZhbWlseSA9IF9yZWYuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplID0gX3JlZi5mb250U2l6ZSxcbiAgICAgIHJvd1dpZHRoID0gX3JlZi5yb3dXaWR0aDtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzLmdhbnR0VGFibGUsXG4gICAgc3R5bGU6IHtcbiAgICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZTogZm9udFNpemVcbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzLmdhbnR0VGFibGVfSGVhZGVyLFxuICAgIHN0eWxlOiB7XG4gICAgICBoZWlnaHQ6IGhlYWRlckhlaWdodCAtIDJcbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzLmdhbnR0VGFibGVfSGVhZGVySXRlbSxcbiAgICBzdHlsZToge1xuICAgICAgbWluV2lkdGg6IHJvd1dpZHRoXG4gICAgfVxuICB9LCBcIlxceEEwTmFtZVwiKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMuZ2FudHRUYWJsZV9IZWFkZXJTZXBhcmF0b3IsXG4gICAgc3R5bGU6IHtcbiAgICAgIGhlaWdodDogaGVhZGVySGVpZ2h0ICogMC41LFxuICAgICAgbWFyZ2luVG9wOiBoZWFkZXJIZWlnaHQgKiAwLjJcbiAgICB9XG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcy5nYW50dFRhYmxlX0hlYWRlckl0ZW0sXG4gICAgc3R5bGU6IHtcbiAgICAgIG1pbldpZHRoOiByb3dXaWR0aFxuICAgIH1cbiAgfSwgXCJcXHhBMEZyb21cIiksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzLmdhbnR0VGFibGVfSGVhZGVyU2VwYXJhdG9yLFxuICAgIHN0eWxlOiB7XG4gICAgICBoZWlnaHQ6IGhlYWRlckhlaWdodCAqIDAuNSxcbiAgICAgIG1hcmdpblRvcDogaGVhZGVySGVpZ2h0ICogMC4yNVxuICAgIH1cbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzLmdhbnR0VGFibGVfSGVhZGVySXRlbSxcbiAgICBzdHlsZToge1xuICAgICAgbWluV2lkdGg6IHJvd1dpZHRoXG4gICAgfVxuICB9LCBcIlxceEEwVG9cIikpKTtcbn07XG5cbnZhciBzdHlsZXMkMSA9IHtcInRhc2tMaXN0V3JhcHBlclwiOlwiXzNaYlFUXCIsXCJ0YXNrTGlzdFRhYmxlUm93XCI6XCJfMzRTUzBcIixcInRhc2tMaXN0Q2VsbFwiOlwiXzNsTGszXCIsXCJ0YXNrTGlzdE5hbWVXcmFwcGVyXCI6XCJfbkkxWHdcIixcInRhc2tMaXN0RXhwYW5kZXJcIjpcIl8yUWpFNlwiLFwidGFza0xpc3RFbXB0eUV4cGFuZGVyXCI6XCJfMlRmRWlcIn07XG5cbnZhciBsb2NhbGVEYXRlU3RyaW5nQ2FjaGUgPSB7fTtcblxudmFyIHRvTG9jYWxlRGF0ZVN0cmluZ0ZhY3RvcnkgPSBmdW5jdGlvbiB0b0xvY2FsZURhdGVTdHJpbmdGYWN0b3J5KGxvY2FsZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKGRhdGUsIGRhdGVUaW1lT3B0aW9ucykge1xuICAgIHZhciBrZXkgPSBkYXRlLnRvU3RyaW5nKCk7XG4gICAgdmFyIGxkcyA9IGxvY2FsZURhdGVTdHJpbmdDYWNoZVtrZXldO1xuXG4gICAgaWYgKCFsZHMpIHtcbiAgICAgIGxkcyA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKGxvY2FsZSwgZGF0ZVRpbWVPcHRpb25zKTtcbiAgICAgIGxvY2FsZURhdGVTdHJpbmdDYWNoZVtrZXldID0gbGRzO1xuICAgIH1cblxuICAgIHJldHVybiBsZHM7XG4gIH07XG59O1xuXG52YXIgZGF0ZVRpbWVPcHRpb25zID0ge1xuICB3ZWVrZGF5OiBcInNob3J0XCIsXG4gIHllYXI6IFwibnVtZXJpY1wiLFxuICBtb250aDogXCJsb25nXCIsXG4gIGRheTogXCJudW1lcmljXCJcbn07XG52YXIgVGFza0xpc3RUYWJsZURlZmF1bHQgPSBmdW5jdGlvbiBUYXNrTGlzdFRhYmxlRGVmYXVsdChfcmVmKSB7XG4gIHZhciByb3dIZWlnaHQgPSBfcmVmLnJvd0hlaWdodCxcbiAgICAgIHJvd1dpZHRoID0gX3JlZi5yb3dXaWR0aCxcbiAgICAgIHRhc2tzID0gX3JlZi50YXNrcyxcbiAgICAgIGZvbnRGYW1pbHkgPSBfcmVmLmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZSA9IF9yZWYuZm9udFNpemUsXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgIG9uRXhwYW5kZXJDbGljayA9IF9yZWYub25FeHBhbmRlckNsaWNrO1xuICB2YXIgdG9Mb2NhbGVEYXRlU3RyaW5nID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRvTG9jYWxlRGF0ZVN0cmluZ0ZhY3RvcnkobG9jYWxlKTtcbiAgfSwgW2xvY2FsZV0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkMS50YXNrTGlzdFdyYXBwZXIsXG4gICAgc3R5bGU6IHtcbiAgICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZTogZm9udFNpemVcbiAgICB9XG4gIH0sIHRhc2tzLm1hcChmdW5jdGlvbiAodCkge1xuICAgIHZhciBleHBhbmRlclN5bWJvbCA9IFwiXCI7XG5cbiAgICBpZiAodC5oaWRlQ2hpbGRyZW4gPT09IGZhbHNlKSB7XG4gICAgICBleHBhbmRlclN5bWJvbCA9IFwi4pa8XCI7XG4gICAgfSBlbHNlIGlmICh0LmhpZGVDaGlsZHJlbiA9PT0gdHJ1ZSkge1xuICAgICAgZXhwYW5kZXJTeW1ib2wgPSBcIuKWtlwiO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDEudGFza0xpc3RUYWJsZVJvdyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGhlaWdodDogcm93SGVpZ2h0XG4gICAgICB9LFxuICAgICAga2V5OiB0LmlkICsgXCJyb3dcIlxuICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkMS50YXNrTGlzdENlbGwsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtaW5XaWR0aDogcm93V2lkdGgsXG4gICAgICAgIG1heFdpZHRoOiByb3dXaWR0aFxuICAgICAgfSxcbiAgICAgIHRpdGxlOiB0Lm5hbWVcbiAgICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDEudGFza0xpc3ROYW1lV3JhcHBlclxuICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBleHBhbmRlclN5bWJvbCA/IHN0eWxlcyQxLnRhc2tMaXN0RXhwYW5kZXIgOiBzdHlsZXMkMS50YXNrTGlzdEVtcHR5RXhwYW5kZXIsXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICByZXR1cm4gb25FeHBhbmRlckNsaWNrKHQpO1xuICAgICAgfVxuICAgIH0sIGV4cGFuZGVyU3ltYm9sKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCB0Lm5hbWUpKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkMS50YXNrTGlzdENlbGwsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtaW5XaWR0aDogcm93V2lkdGgsXG4gICAgICAgIG1heFdpZHRoOiByb3dXaWR0aFxuICAgICAgfVxuICAgIH0sIFwiXFx4QTBcIiwgdG9Mb2NhbGVEYXRlU3RyaW5nKHQuc3RhcnQsIGRhdGVUaW1lT3B0aW9ucykpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDEudGFza0xpc3RDZWxsLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWluV2lkdGg6IHJvd1dpZHRoLFxuICAgICAgICBtYXhXaWR0aDogcm93V2lkdGhcbiAgICAgIH1cbiAgICB9LCBcIlxceEEwXCIsIHRvTG9jYWxlRGF0ZVN0cmluZyh0LmVuZCwgZGF0ZVRpbWVPcHRpb25zKSkpO1xuICB9KSk7XG59O1xuXG52YXIgc3R5bGVzJDIgPSB7XCJ0b29sdGlwRGVmYXVsdENvbnRhaW5lclwiOlwiXzNUNDJlXCIsXCJ0b29sdGlwRGVmYXVsdENvbnRhaW5lclBhcmFncmFwaFwiOlwiXzI5TlRnXCIsXCJ0b29sdGlwRGV0YWlsc0NvbnRhaW5lclwiOlwiXzI1UC1LXCIsXCJ0b29sdGlwRGV0YWlsc0NvbnRhaW5lckhpZGRlblwiOlwiXzNnVkFxXCJ9O1xuXG52YXIgVG9vbHRpcCA9IGZ1bmN0aW9uIFRvb2x0aXAoX3JlZikge1xuICB2YXIgdGFzayA9IF9yZWYudGFzayxcbiAgICAgIHJvd0hlaWdodCA9IF9yZWYucm93SGVpZ2h0LFxuICAgICAgcnRsID0gX3JlZi5ydGwsXG4gICAgICBzdmdDb250YWluZXJIZWlnaHQgPSBfcmVmLnN2Z0NvbnRhaW5lckhlaWdodCxcbiAgICAgIHN2Z0NvbnRhaW5lcldpZHRoID0gX3JlZi5zdmdDb250YWluZXJXaWR0aCxcbiAgICAgIHNjcm9sbFggPSBfcmVmLnNjcm9sbFgsXG4gICAgICBzY3JvbGxZID0gX3JlZi5zY3JvbGxZLFxuICAgICAgYXJyb3dJbmRlbnQgPSBfcmVmLmFycm93SW5kZW50LFxuICAgICAgZm9udFNpemUgPSBfcmVmLmZvbnRTaXplLFxuICAgICAgZm9udEZhbWlseSA9IF9yZWYuZm9udEZhbWlseSxcbiAgICAgIGhlYWRlckhlaWdodCA9IF9yZWYuaGVhZGVySGVpZ2h0LFxuICAgICAgdGFza0xpc3RXaWR0aCA9IF9yZWYudGFza0xpc3RXaWR0aCxcbiAgICAgIFRvb2x0aXBDb250ZW50ID0gX3JlZi5Ub29sdGlwQ29udGVudDtcbiAgdmFyIHRvb2x0aXBSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKDApLFxuICAgICAgcmVsYXRlZFkgPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXRSZWxhdGVkWSA9IF91c2VTdGF0ZVsxXTtcblxuICB2YXIgX3VzZVN0YXRlMiA9IHVzZVN0YXRlKDApLFxuICAgICAgcmVsYXRlZFggPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0UmVsYXRlZFggPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRvb2x0aXBSZWYuY3VycmVudCkge1xuICAgICAgdmFyIHRvb2x0aXBIZWlnaHQgPSB0b29sdGlwUmVmLmN1cnJlbnQub2Zmc2V0SGVpZ2h0ICogMS4xO1xuICAgICAgdmFyIHRvb2x0aXBXaWR0aCA9IHRvb2x0aXBSZWYuY3VycmVudC5vZmZzZXRXaWR0aCAqIDEuMTtcbiAgICAgIHZhciBuZXdSZWxhdGVkWSA9IHRhc2suaW5kZXggKiByb3dIZWlnaHQgLSBzY3JvbGxZICsgaGVhZGVySGVpZ2h0O1xuICAgICAgdmFyIG5ld1JlbGF0ZWRYO1xuXG4gICAgICBpZiAocnRsKSB7XG4gICAgICAgIG5ld1JlbGF0ZWRYID0gdGFzay54MSAtIGFycm93SW5kZW50ICogMS41IC0gdG9vbHRpcFdpZHRoIC0gc2Nyb2xsWDtcblxuICAgICAgICBpZiAobmV3UmVsYXRlZFggPCAwKSB7XG4gICAgICAgICAgbmV3UmVsYXRlZFggPSB0YXNrLngyICsgYXJyb3dJbmRlbnQgKiAxLjUgLSBzY3JvbGxYO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvb2x0aXBMZWZ0bW9zdFBvaW50ID0gdG9vbHRpcFdpZHRoICsgbmV3UmVsYXRlZFg7XG5cbiAgICAgICAgaWYgKHRvb2x0aXBMZWZ0bW9zdFBvaW50ID4gc3ZnQ29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgICBuZXdSZWxhdGVkWCA9IHN2Z0NvbnRhaW5lcldpZHRoIC0gdG9vbHRpcFdpZHRoO1xuICAgICAgICAgIG5ld1JlbGF0ZWRZICs9IHJvd0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3UmVsYXRlZFggPSB0YXNrLngyICsgYXJyb3dJbmRlbnQgKiAxLjUgKyB0YXNrTGlzdFdpZHRoIC0gc2Nyb2xsWDtcblxuICAgICAgICB2YXIgX3Rvb2x0aXBMZWZ0bW9zdFBvaW50ID0gdG9vbHRpcFdpZHRoICsgbmV3UmVsYXRlZFg7XG5cbiAgICAgICAgdmFyIGZ1bGxDaGFydFdpZHRoID0gdGFza0xpc3RXaWR0aCArIHN2Z0NvbnRhaW5lcldpZHRoO1xuXG4gICAgICAgIGlmIChfdG9vbHRpcExlZnRtb3N0UG9pbnQgPiBmdWxsQ2hhcnRXaWR0aCkge1xuICAgICAgICAgIG5ld1JlbGF0ZWRYID0gdGFzay54MSArIHRhc2tMaXN0V2lkdGggLSBhcnJvd0luZGVudCAqIDEuNSAtIHNjcm9sbFggLSB0b29sdGlwV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3UmVsYXRlZFggPCB0YXNrTGlzdFdpZHRoKSB7XG4gICAgICAgICAgbmV3UmVsYXRlZFggPSBzdmdDb250YWluZXJXaWR0aCArIHRhc2tMaXN0V2lkdGggLSB0b29sdGlwV2lkdGg7XG4gICAgICAgICAgbmV3UmVsYXRlZFkgKz0gcm93SGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0b29sdGlwTG93ZXJQb2ludCA9IHRvb2x0aXBIZWlnaHQgKyBuZXdSZWxhdGVkWSAtIHNjcm9sbFk7XG5cbiAgICAgIGlmICh0b29sdGlwTG93ZXJQb2ludCA+IHN2Z0NvbnRhaW5lckhlaWdodCAtIHNjcm9sbFkpIHtcbiAgICAgICAgbmV3UmVsYXRlZFkgPSBzdmdDb250YWluZXJIZWlnaHQgLSB0b29sdGlwSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBzZXRSZWxhdGVkWShuZXdSZWxhdGVkWSk7XG4gICAgICBzZXRSZWxhdGVkWChuZXdSZWxhdGVkWCk7XG4gICAgfVxuICB9LCBbdG9vbHRpcFJlZiwgdGFzaywgYXJyb3dJbmRlbnQsIHNjcm9sbFgsIHNjcm9sbFksIGhlYWRlckhlaWdodCwgdGFza0xpc3RXaWR0aCwgcm93SGVpZ2h0LCBzdmdDb250YWluZXJIZWlnaHQsIHN2Z0NvbnRhaW5lcldpZHRoLCBydGxdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJlZjogdG9vbHRpcFJlZixcbiAgICBjbGFzc05hbWU6IHJlbGF0ZWRYID8gc3R5bGVzJDIudG9vbHRpcERldGFpbHNDb250YWluZXIgOiBzdHlsZXMkMi50b29sdGlwRGV0YWlsc0NvbnRhaW5lckhpZGRlbixcbiAgICBzdHlsZToge1xuICAgICAgbGVmdDogcmVsYXRlZFgsXG4gICAgICB0b3A6IHJlbGF0ZWRZXG4gICAgfVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXBDb250ZW50LCB7XG4gICAgdGFzazogdGFzayxcbiAgICBmb250U2l6ZTogZm9udFNpemUsXG4gICAgZm9udEZhbWlseTogZm9udEZhbWlseVxuICB9KSk7XG59O1xudmFyIFN0YW5kYXJkVG9vbHRpcENvbnRlbnQgPSBmdW5jdGlvbiBTdGFuZGFyZFRvb2x0aXBDb250ZW50KF9yZWYyKSB7XG4gIHZhciB0YXNrID0gX3JlZjIudGFzayxcbiAgICAgIGZvbnRTaXplID0gX3JlZjIuZm9udFNpemUsXG4gICAgICBmb250RmFtaWx5ID0gX3JlZjIuZm9udEZhbWlseTtcbiAgdmFyIHN0eWxlID0ge1xuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5XG4gIH07XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQyLnRvb2x0aXBEZWZhdWx0Q29udGFpbmVyLFxuICAgIHN0eWxlOiBzdHlsZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYlwiLCB7XG4gICAgc3R5bGU6IHtcbiAgICAgIGZvbnRTaXplOiBmb250U2l6ZSArIDZcbiAgICB9XG4gIH0sIHRhc2submFtZSArIFwiOiBcIiArIHRhc2suc3RhcnQuZ2V0RGF0ZSgpICsgXCItXCIgKyAodGFzay5zdGFydC5nZXRNb250aCgpICsgMSkgKyBcIi1cIiArIHRhc2suc3RhcnQuZ2V0RnVsbFllYXIoKSArIFwiIC0gXCIgKyB0YXNrLmVuZC5nZXREYXRlKCkgKyBcIi1cIiArICh0YXNrLmVuZC5nZXRNb250aCgpICsgMSkgKyBcIi1cIiArIHRhc2suZW5kLmdldEZ1bGxZZWFyKCkpLCB0YXNrLmVuZC5nZXRUaW1lKCkgLSB0YXNrLnN0YXJ0LmdldFRpbWUoKSAhPT0gMCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFwicFwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkMi50b29sdGlwRGVmYXVsdENvbnRhaW5lclBhcmFncmFwaFxuICB9LCBcIkR1cmF0aW9uOiBcIiArIH5+KCh0YXNrLmVuZC5nZXRUaW1lKCkgLSB0YXNrLnN0YXJ0LmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpICsgXCIgZGF5KHMpXCIpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicFwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkMi50b29sdGlwRGVmYXVsdENvbnRhaW5lclBhcmFncmFwaFxuICB9LCAhIXRhc2sucHJvZ3Jlc3MgJiYgXCJQcm9ncmVzczogXCIgKyB0YXNrLnByb2dyZXNzICsgXCIgJVwiKSk7XG59O1xuXG52YXIgc3R5bGVzJDMgPSB7XCJzY3JvbGxcIjpcIl8xZVQtdFwifTtcblxudmFyIFZlcnRpY2FsU2Nyb2xsID0gZnVuY3Rpb24gVmVydGljYWxTY3JvbGwoX3JlZikge1xuICB2YXIgc2Nyb2xsID0gX3JlZi5zY3JvbGwsXG4gICAgICBnYW50dEhlaWdodCA9IF9yZWYuZ2FudHRIZWlnaHQsXG4gICAgICBnYW50dEZ1bGxIZWlnaHQgPSBfcmVmLmdhbnR0RnVsbEhlaWdodCxcbiAgICAgIGhlYWRlckhlaWdodCA9IF9yZWYuaGVhZGVySGVpZ2h0LFxuICAgICAgcnRsID0gX3JlZi5ydGwsXG4gICAgICBvblNjcm9sbCA9IF9yZWYub25TY3JvbGw7XG4gIHZhciBzY3JvbGxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNjcm9sbFJlZi5jdXJyZW50KSB7XG4gICAgICBzY3JvbGxSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBzY3JvbGw7XG4gICAgfVxuICB9LCBbc2Nyb2xsXSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBzdHlsZToge1xuICAgICAgaGVpZ2h0OiBnYW50dEhlaWdodCxcbiAgICAgIG1hcmdpblRvcDogaGVhZGVySGVpZ2h0LFxuICAgICAgbWFyZ2luTGVmdDogcnRsID8gXCJcIiA6IFwiLTFyZW1cIlxuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkMy5zY3JvbGwsXG4gICAgb25TY3JvbGw6IG9uU2Nyb2xsLFxuICAgIHJlZjogc2Nyb2xsUmVmXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlOiB7XG4gICAgICBoZWlnaHQ6IGdhbnR0RnVsbEhlaWdodCxcbiAgICAgIHdpZHRoOiAxXG4gICAgfVxuICB9KSk7XG59O1xuXG52YXIgVGFza0xpc3QgPSBmdW5jdGlvbiBUYXNrTGlzdChfcmVmKSB7XG4gIHZhciBoZWFkZXJIZWlnaHQgPSBfcmVmLmhlYWRlckhlaWdodCxcbiAgICAgIGZvbnRGYW1pbHkgPSBfcmVmLmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZSA9IF9yZWYuZm9udFNpemUsXG4gICAgICByb3dXaWR0aCA9IF9yZWYucm93V2lkdGgsXG4gICAgICByb3dIZWlnaHQgPSBfcmVmLnJvd0hlaWdodCxcbiAgICAgIHNjcm9sbFkgPSBfcmVmLnNjcm9sbFksXG4gICAgICB0YXNrcyA9IF9yZWYudGFza3MsXG4gICAgICBzZWxlY3RlZFRhc2sgPSBfcmVmLnNlbGVjdGVkVGFzayxcbiAgICAgIHNldFNlbGVjdGVkVGFzayA9IF9yZWYuc2V0U2VsZWN0ZWRUYXNrLFxuICAgICAgb25FeHBhbmRlckNsaWNrID0gX3JlZi5vbkV4cGFuZGVyQ2xpY2ssXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgIGdhbnR0SGVpZ2h0ID0gX3JlZi5nYW50dEhlaWdodCxcbiAgICAgIHRhc2tMaXN0UmVmID0gX3JlZi50YXNrTGlzdFJlZixcbiAgICAgIGhvcml6b250YWxDb250YWluZXJDbGFzcyA9IF9yZWYuaG9yaXpvbnRhbENvbnRhaW5lckNsYXNzLFxuICAgICAgVGFza0xpc3RIZWFkZXIgPSBfcmVmLlRhc2tMaXN0SGVhZGVyLFxuICAgICAgVGFza0xpc3RUYWJsZSA9IF9yZWYuVGFza0xpc3RUYWJsZTtcbiAgdmFyIGhvcml6b250YWxDb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGhvcml6b250YWxDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgaG9yaXpvbnRhbENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcCA9IHNjcm9sbFk7XG4gICAgfVxuICB9LCBbc2Nyb2xsWV0pO1xuICB2YXIgaGVhZGVyUHJvcHMgPSB7XG4gICAgaGVhZGVySGVpZ2h0OiBoZWFkZXJIZWlnaHQsXG4gICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICBmb250U2l6ZTogZm9udFNpemUsXG4gICAgcm93V2lkdGg6IHJvd1dpZHRoXG4gIH07XG4gIHZhciBzZWxlY3RlZFRhc2tJZCA9IHNlbGVjdGVkVGFzayA/IHNlbGVjdGVkVGFzay5pZCA6IFwiXCI7XG4gIHZhciB0YWJsZVByb3BzID0ge1xuICAgIHJvd0hlaWdodDogcm93SGVpZ2h0LFxuICAgIHJvd1dpZHRoOiByb3dXaWR0aCxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICB0YXNrczogdGFza3MsXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgc2VsZWN0ZWRUYXNrSWQ6IHNlbGVjdGVkVGFza0lkLFxuICAgIHNldFNlbGVjdGVkVGFzazogc2V0U2VsZWN0ZWRUYXNrLFxuICAgIG9uRXhwYW5kZXJDbGljazogb25FeHBhbmRlckNsaWNrXG4gIH07XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICByZWY6IHRhc2tMaXN0UmVmXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFza0xpc3RIZWFkZXIsIE9iamVjdC5hc3NpZ24oe30sIGhlYWRlclByb3BzKSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJlZjogaG9yaXpvbnRhbENvbnRhaW5lclJlZixcbiAgICBjbGFzc05hbWU6IGhvcml6b250YWxDb250YWluZXJDbGFzcyxcbiAgICBzdHlsZTogZ2FudHRIZWlnaHQgPyB7XG4gICAgICBoZWlnaHQ6IGdhbnR0SGVpZ2h0XG4gICAgfSA6IHt9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFza0xpc3RUYWJsZSwgT2JqZWN0LmFzc2lnbih7fSwgdGFibGVQcm9wcykpKSk7XG59O1xuXG52YXIgc3R5bGVzJDQgPSB7XCJncmlkUm93XCI6XCJfMmRaVHlcIixcImdyaWRSb3dMaW5lXCI6XCJfM3JVS2lcIixcImdyaWRUaWNrXCI6XCJfUnV3dUtcIn07XG5cbnZhciBHcmlkQm9keSA9IGZ1bmN0aW9uIEdyaWRCb2R5KF9yZWYpIHtcbiAgdmFyIHRhc2tzID0gX3JlZi50YXNrcyxcbiAgICAgIGRhdGVzID0gX3JlZi5kYXRlcyxcbiAgICAgIHJvd0hlaWdodCA9IF9yZWYucm93SGVpZ2h0LFxuICAgICAgc3ZnV2lkdGggPSBfcmVmLnN2Z1dpZHRoLFxuICAgICAgY29sdW1uV2lkdGggPSBfcmVmLmNvbHVtbldpZHRoLFxuICAgICAgdG9kYXlDb2xvciA9IF9yZWYudG9kYXlDb2xvcixcbiAgICAgIHJ0bCA9IF9yZWYucnRsO1xuICB2YXIgeSA9IDA7XG4gIHZhciBncmlkUm93cyA9IFtdO1xuICB2YXIgcm93TGluZXMgPSBbUmVhY3QuY3JlYXRlRWxlbWVudChcImxpbmVcIiwge1xuICAgIGtleTogXCJSb3dMaW5lRmlyc3RcIixcbiAgICB4OiBcIjBcIixcbiAgICB5MTogMCxcbiAgICB4Mjogc3ZnV2lkdGgsXG4gICAgeTI6IDAsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNC5ncmlkUm93TGluZVxuICB9KV07XG5cbiAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZSh0YXNrcyksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yKCkpLmRvbmU7KSB7XG4gICAgdmFyIHRhc2sgPSBfc3RlcC52YWx1ZTtcbiAgICBncmlkUm93cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICAgIGtleTogXCJSb3dcIiArIHRhc2suaWQsXG4gICAgICB4OiBcIjBcIixcbiAgICAgIHk6IHksXG4gICAgICB3aWR0aDogc3ZnV2lkdGgsXG4gICAgICBoZWlnaHQ6IHJvd0hlaWdodCxcbiAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDQuZ3JpZFJvd1xuICAgIH0pKTtcbiAgICByb3dMaW5lcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaW5lXCIsIHtcbiAgICAgIGtleTogXCJSb3dMaW5lXCIgKyB0YXNrLmlkLFxuICAgICAgeDogXCIwXCIsXG4gICAgICB5MTogeSArIHJvd0hlaWdodCxcbiAgICAgIHgyOiBzdmdXaWR0aCxcbiAgICAgIHkyOiB5ICsgcm93SGVpZ2h0LFxuICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNC5ncmlkUm93TGluZVxuICAgIH0pKTtcbiAgICB5ICs9IHJvd0hlaWdodDtcbiAgfVxuXG4gIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICB2YXIgdGlja1ggPSAwO1xuICB2YXIgdGlja3MgPSBbXTtcbiAgdmFyIHRvZGF5ID0gUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwgbnVsbCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkYXRlID0gZGF0ZXNbaV07XG4gICAgdGlja3MucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFwibGluZVwiLCB7XG4gICAgICBrZXk6IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgeDE6IHRpY2tYLFxuICAgICAgeTE6IDAsXG4gICAgICB4MjogdGlja1gsXG4gICAgICB5MjogeSxcbiAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDQuZ3JpZFRpY2tcbiAgICB9KSk7XG5cbiAgICBpZiAoaSArIDEgIT09IGRhdGVzLmxlbmd0aCAmJiBkYXRlLmdldFRpbWUoKSA8IG5vdy5nZXRUaW1lKCkgJiYgZGF0ZXNbaSArIDFdLmdldFRpbWUoKSA+PSBub3cuZ2V0VGltZSgpIHx8IGkgIT09IDAgJiYgaSArIDEgPT09IGRhdGVzLmxlbmd0aCAmJiBkYXRlLmdldFRpbWUoKSA8IG5vdy5nZXRUaW1lKCkgJiYgYWRkVG9EYXRlKGRhdGUsIGRhdGUuZ2V0VGltZSgpIC0gZGF0ZXNbaSAtIDFdLmdldFRpbWUoKSwgXCJtaWxsaXNlY29uZFwiKS5nZXRUaW1lKCkgPj0gbm93LmdldFRpbWUoKSkge1xuICAgICAgdG9kYXkgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7XG4gICAgICAgIHg6IHRpY2tYLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3aWR0aDogY29sdW1uV2lkdGgsXG4gICAgICAgIGhlaWdodDogeSxcbiAgICAgICAgZmlsbDogdG9kYXlDb2xvclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJ0bCAmJiBpICsgMSAhPT0gZGF0ZXMubGVuZ3RoICYmIGRhdGUuZ2V0VGltZSgpID49IG5vdy5nZXRUaW1lKCkgJiYgZGF0ZXNbaSArIDFdLmdldFRpbWUoKSA8IG5vdy5nZXRUaW1lKCkpIHtcbiAgICAgIHRvZGF5ID0gUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgICAgICB4OiB0aWNrWCArIGNvbHVtbldpZHRoLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3aWR0aDogY29sdW1uV2lkdGgsXG4gICAgICAgIGhlaWdodDogeSxcbiAgICAgICAgZmlsbDogdG9kYXlDb2xvclxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGlja1ggKz0gY29sdW1uV2lkdGg7XG4gIH1cblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJncmlkQm9keVwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBjbGFzc05hbWU6IFwicm93c1wiXG4gIH0sIGdyaWRSb3dzKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJyb3dMaW5lc1wiXG4gIH0sIHJvd0xpbmVzKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJ0aWNrc1wiXG4gIH0sIHRpY2tzKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJ0b2RheVwiXG4gIH0sIHRvZGF5KSk7XG59O1xuXG52YXIgR3JpZCA9IGZ1bmN0aW9uIEdyaWQocHJvcHMpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiZ3JpZFwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR3JpZEJvZHksIE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSkpO1xufTtcblxudmFyIHN0eWxlcyQ1ID0ge1wiY2FsZW5kYXJCb3R0b21UZXh0XCI6XCJfOXc4ZDVcIixcImNhbGVuZGFyVG9wVGlja1wiOlwiXzFyTHVaXCIsXCJjYWxlbmRhclRvcFRleHRcIjpcIl8ycTFLdFwiLFwiY2FsZW5kYXJIZWFkZXJcIjpcIl8zNW5MWFwifTtcblxudmFyIFRvcFBhcnRPZkNhbGVuZGFyID0gZnVuY3Rpb24gVG9wUGFydE9mQ2FsZW5kYXIoX3JlZikge1xuICB2YXIgdmFsdWUgPSBfcmVmLnZhbHVlLFxuICAgICAgeDFMaW5lID0gX3JlZi54MUxpbmUsXG4gICAgICB5MUxpbmUgPSBfcmVmLnkxTGluZSxcbiAgICAgIHkyTGluZSA9IF9yZWYueTJMaW5lLFxuICAgICAgeFRleHQgPSBfcmVmLnhUZXh0LFxuICAgICAgeVRleHQgPSBfcmVmLnlUZXh0O1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYWxlbmRhclRvcFwiXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaW5lXCIsIHtcbiAgICB4MTogeDFMaW5lLFxuICAgIHkxOiB5MUxpbmUsXG4gICAgeDI6IHgxTGluZSxcbiAgICB5MjogeTJMaW5lLFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJDUuY2FsZW5kYXJUb3BUaWNrLFxuICAgIGtleTogdmFsdWUgKyBcImxpbmVcIlxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRcIiwge1xuICAgIGtleTogdmFsdWUgKyBcInRleHRcIixcbiAgICB5OiB5VGV4dCxcbiAgICB4OiB4VGV4dCxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFyVG9wVGV4dFxuICB9LCB2YWx1ZSkpO1xufTtcblxudmFyIENhbGVuZGFyID0gZnVuY3Rpb24gQ2FsZW5kYXIoX3JlZikge1xuICB2YXIgZGF0ZVNldHVwID0gX3JlZi5kYXRlU2V0dXAsXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgIHZpZXdNb2RlID0gX3JlZi52aWV3TW9kZSxcbiAgICAgIHJ0bCA9IF9yZWYucnRsLFxuICAgICAgaGVhZGVySGVpZ2h0ID0gX3JlZi5oZWFkZXJIZWlnaHQsXG4gICAgICBjb2x1bW5XaWR0aCA9IF9yZWYuY29sdW1uV2lkdGgsXG4gICAgICBmb250RmFtaWx5ID0gX3JlZi5mb250RmFtaWx5LFxuICAgICAgZm9udFNpemUgPSBfcmVmLmZvbnRTaXplO1xuXG4gIHZhciBnZXRDYWxlbmRhclZhbHVlc0ZvclllYXIgPSBmdW5jdGlvbiBnZXRDYWxlbmRhclZhbHVlc0ZvclllYXIoKSB7XG4gICAgdmFyIHRvcFZhbHVlcyA9IFtdO1xuICAgIHZhciBib3R0b21WYWx1ZXMgPSBbXTtcbiAgICB2YXIgdG9wRGVmYXVsdEhlaWdodCA9IGhlYWRlckhlaWdodCAqIDAuNTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0ZVNldHVwLmRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGF0ZSA9IGRhdGVTZXR1cC5kYXRlc1tpXTtcbiAgICAgIHZhciBib3R0b21WYWx1ZSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGJvdHRvbVZhbHVlcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0XCIsIHtcbiAgICAgICAga2V5OiBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIHk6IGhlYWRlckhlaWdodCAqIDAuOCxcbiAgICAgICAgeDogY29sdW1uV2lkdGggKiBpICsgY29sdW1uV2lkdGggKiAwLjUsXG4gICAgICAgIGNsYXNzTmFtZTogc3R5bGVzJDUuY2FsZW5kYXJCb3R0b21UZXh0XG4gICAgICB9LCBib3R0b21WYWx1ZSkpO1xuXG4gICAgICBpZiAoaSA9PT0gMCB8fCBkYXRlLmdldEZ1bGxZZWFyKCkgIT09IGRhdGVTZXR1cC5kYXRlc1tpIC0gMV0uZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICB2YXIgdG9wVmFsdWUgPSBkYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHhUZXh0ID0gdm9pZCAwO1xuXG4gICAgICAgIGlmIChydGwpIHtcbiAgICAgICAgICB4VGV4dCA9ICg2ICsgaSArIGRhdGUuZ2V0RnVsbFllYXIoKSArIDEpICogY29sdW1uV2lkdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeFRleHQgPSAoNiArIGkgLSBkYXRlLmdldEZ1bGxZZWFyKCkpICogY29sdW1uV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICB0b3BWYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFRvcFBhcnRPZkNhbGVuZGFyLCB7XG4gICAgICAgICAga2V5OiB0b3BWYWx1ZSxcbiAgICAgICAgICB2YWx1ZTogdG9wVmFsdWUsXG4gICAgICAgICAgeDFMaW5lOiBjb2x1bW5XaWR0aCAqIGksXG4gICAgICAgICAgeTFMaW5lOiAwLFxuICAgICAgICAgIHkyTGluZTogaGVhZGVySGVpZ2h0LFxuICAgICAgICAgIHhUZXh0OiB4VGV4dCxcbiAgICAgICAgICB5VGV4dDogdG9wRGVmYXVsdEhlaWdodCAqIDAuOVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFt0b3BWYWx1ZXMsIGJvdHRvbVZhbHVlc107XG4gIH07XG5cbiAgdmFyIGdldENhbGVuZGFyVmFsdWVzRm9yTW9udGggPSBmdW5jdGlvbiBnZXRDYWxlbmRhclZhbHVlc0Zvck1vbnRoKCkge1xuICAgIHZhciB0b3BWYWx1ZXMgPSBbXTtcbiAgICB2YXIgYm90dG9tVmFsdWVzID0gW107XG4gICAgdmFyIHRvcERlZmF1bHRIZWlnaHQgPSBoZWFkZXJIZWlnaHQgKiAwLjU7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGVTZXR1cC5kYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRhdGUgPSBkYXRlU2V0dXAuZGF0ZXNbaV07XG4gICAgICB2YXIgYm90dG9tVmFsdWUgPSBnZXRMb2NhbGVNb250aChkYXRlLCBsb2NhbGUpO1xuICAgICAgYm90dG9tVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRcIiwge1xuICAgICAgICBrZXk6IGJvdHRvbVZhbHVlICsgZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICB5OiBoZWFkZXJIZWlnaHQgKiAwLjgsXG4gICAgICAgIHg6IGNvbHVtbldpZHRoICogaSArIGNvbHVtbldpZHRoICogMC41LFxuICAgICAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFyQm90dG9tVGV4dFxuICAgICAgfSwgYm90dG9tVmFsdWUpKTtcblxuICAgICAgaWYgKGkgPT09IDAgfHwgZGF0ZS5nZXRGdWxsWWVhcigpICE9PSBkYXRlU2V0dXAuZGF0ZXNbaSAtIDFdLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgdmFyIHRvcFZhbHVlID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgIHZhciB4VGV4dCA9IHZvaWQgMDtcblxuICAgICAgICBpZiAocnRsKSB7XG4gICAgICAgICAgeFRleHQgPSAoNiArIGkgKyBkYXRlLmdldE1vbnRoKCkgKyAxKSAqIGNvbHVtbldpZHRoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHhUZXh0ID0gKDYgKyBpIC0gZGF0ZS5nZXRNb250aCgpKSAqIGNvbHVtbldpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9wVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChUb3BQYXJ0T2ZDYWxlbmRhciwge1xuICAgICAgICAgIGtleTogdG9wVmFsdWUsXG4gICAgICAgICAgdmFsdWU6IHRvcFZhbHVlLFxuICAgICAgICAgIHgxTGluZTogY29sdW1uV2lkdGggKiBpLFxuICAgICAgICAgIHkxTGluZTogMCxcbiAgICAgICAgICB5MkxpbmU6IHRvcERlZmF1bHRIZWlnaHQsXG4gICAgICAgICAgeFRleHQ6IHhUZXh0LFxuICAgICAgICAgIHlUZXh0OiB0b3BEZWZhdWx0SGVpZ2h0ICogMC45XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3RvcFZhbHVlcywgYm90dG9tVmFsdWVzXTtcbiAgfTtcblxuICB2YXIgZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JXZWVrID0gZnVuY3Rpb24gZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JXZWVrKCkge1xuICAgIHZhciB0b3BWYWx1ZXMgPSBbXTtcbiAgICB2YXIgYm90dG9tVmFsdWVzID0gW107XG4gICAgdmFyIHdlZWtzQ291bnQgPSAxO1xuICAgIHZhciB0b3BEZWZhdWx0SGVpZ2h0ID0gaGVhZGVySGVpZ2h0ICogMC41O1xuICAgIHZhciBkYXRlcyA9IGRhdGVTZXR1cC5kYXRlcztcblxuICAgIGZvciAodmFyIGkgPSBkYXRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGRhdGUgPSBkYXRlc1tpXTtcbiAgICAgIHZhciB0b3BWYWx1ZSA9IFwiXCI7XG5cbiAgICAgIGlmIChpID09PSAwIHx8IGRhdGUuZ2V0TW9udGgoKSAhPT0gZGF0ZXNbaSAtIDFdLmdldE1vbnRoKCkpIHtcbiAgICAgICAgdG9wVmFsdWUgPSBnZXRMb2NhbGVNb250aChkYXRlLCBsb2NhbGUpICsgXCIsIFwiICsgZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgfVxuXG4gICAgICB2YXIgYm90dG9tVmFsdWUgPSBcIldcIiArIGdldFdlZWtOdW1iZXJJU084NjAxKGRhdGUpO1xuICAgICAgYm90dG9tVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRcIiwge1xuICAgICAgICBrZXk6IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICB5OiBoZWFkZXJIZWlnaHQgKiAwLjgsXG4gICAgICAgIHg6IGNvbHVtbldpZHRoICogKGkgKyArcnRsKSxcbiAgICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNS5jYWxlbmRhckJvdHRvbVRleHRcbiAgICAgIH0sIGJvdHRvbVZhbHVlKSk7XG5cbiAgICAgIGlmICh0b3BWYWx1ZSkge1xuICAgICAgICBpZiAoaSAhPT0gZGF0ZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHRvcFZhbHVlcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9wUGFydE9mQ2FsZW5kYXIsIHtcbiAgICAgICAgICAgIGtleTogdG9wVmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogdG9wVmFsdWUsXG4gICAgICAgICAgICB4MUxpbmU6IGNvbHVtbldpZHRoICogaSArIHdlZWtzQ291bnQgKiBjb2x1bW5XaWR0aCxcbiAgICAgICAgICAgIHkxTGluZTogMCxcbiAgICAgICAgICAgIHkyTGluZTogdG9wRGVmYXVsdEhlaWdodCxcbiAgICAgICAgICAgIHhUZXh0OiBjb2x1bW5XaWR0aCAqIGkgKyBjb2x1bW5XaWR0aCAqIHdlZWtzQ291bnQgKiAwLjUsXG4gICAgICAgICAgICB5VGV4dDogdG9wRGVmYXVsdEhlaWdodCAqIDAuOVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdlZWtzQ291bnQgPSAwO1xuICAgICAgfVxuXG4gICAgICB3ZWVrc0NvdW50Kys7XG4gICAgfVxuXG4gICAgcmV0dXJuIFt0b3BWYWx1ZXMsIGJvdHRvbVZhbHVlc107XG4gIH07XG5cbiAgdmFyIGdldENhbGVuZGFyVmFsdWVzRm9yRGF5ID0gZnVuY3Rpb24gZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JEYXkoKSB7XG4gICAgdmFyIHRvcFZhbHVlcyA9IFtdO1xuICAgIHZhciBib3R0b21WYWx1ZXMgPSBbXTtcbiAgICB2YXIgdG9wRGVmYXVsdEhlaWdodCA9IGhlYWRlckhlaWdodCAqIDAuNTtcbiAgICB2YXIgZGF0ZXMgPSBkYXRlU2V0dXAuZGF0ZXM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGF0ZSA9IGRhdGVzW2ldO1xuICAgICAgdmFyIGJvdHRvbVZhbHVlID0gZ2V0TG9jYWxEYXlPZldlZWsoZGF0ZSwgbG9jYWxlLCBcInNob3J0XCIpICsgXCIsIFwiICsgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcbiAgICAgIGJvdHRvbVZhbHVlcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0XCIsIHtcbiAgICAgICAga2V5OiBkYXRlLmdldFRpbWUoKSxcbiAgICAgICAgeTogaGVhZGVySGVpZ2h0ICogMC44LFxuICAgICAgICB4OiBjb2x1bW5XaWR0aCAqIGkgKyBjb2x1bW5XaWR0aCAqIDAuNSxcbiAgICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNS5jYWxlbmRhckJvdHRvbVRleHRcbiAgICAgIH0sIGJvdHRvbVZhbHVlKSk7XG5cbiAgICAgIGlmIChpICsgMSAhPT0gZGF0ZXMubGVuZ3RoICYmIGRhdGUuZ2V0TW9udGgoKSAhPT0gZGF0ZXNbaSArIDFdLmdldE1vbnRoKCkpIHtcbiAgICAgICAgdmFyIHRvcFZhbHVlID0gZ2V0TG9jYWxlTW9udGgoZGF0ZSwgbG9jYWxlKTtcbiAgICAgICAgdG9wVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChUb3BQYXJ0T2ZDYWxlbmRhciwge1xuICAgICAgICAgIGtleTogdG9wVmFsdWUgKyBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgdmFsdWU6IHRvcFZhbHVlLFxuICAgICAgICAgIHgxTGluZTogY29sdW1uV2lkdGggKiAoaSArIDEpLFxuICAgICAgICAgIHkxTGluZTogMCxcbiAgICAgICAgICB5MkxpbmU6IHRvcERlZmF1bHRIZWlnaHQsXG4gICAgICAgICAgeFRleHQ6IGNvbHVtbldpZHRoICogKGkgKyAxKSAtIGdldERheXNJbk1vbnRoKGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXRGdWxsWWVhcigpKSAqIGNvbHVtbldpZHRoICogMC41LFxuICAgICAgICAgIHlUZXh0OiB0b3BEZWZhdWx0SGVpZ2h0ICogMC45XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3RvcFZhbHVlcywgYm90dG9tVmFsdWVzXTtcbiAgfTtcblxuICB2YXIgZ2V0Q2FsZW5kYXJWYWx1ZXNGb3JQYXJ0T2ZEYXkgPSBmdW5jdGlvbiBnZXRDYWxlbmRhclZhbHVlc0ZvclBhcnRPZkRheSgpIHtcbiAgICB2YXIgdG9wVmFsdWVzID0gW107XG4gICAgdmFyIGJvdHRvbVZhbHVlcyA9IFtdO1xuICAgIHZhciB0aWNrcyA9IHZpZXdNb2RlID09PSBWaWV3TW9kZS5IYWxmRGF5ID8gMiA6IDQ7XG4gICAgdmFyIHRvcERlZmF1bHRIZWlnaHQgPSBoZWFkZXJIZWlnaHQgKiAwLjU7XG4gICAgdmFyIGRhdGVzID0gZGF0ZVNldHVwLmRhdGVzO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRhdGUgPSBkYXRlc1tpXTtcbiAgICAgIHZhciBib3R0b21WYWx1ZSA9IGdldENhY2hlZERhdGVUaW1lRm9ybWF0KGxvY2FsZSwge1xuICAgICAgICBob3VyOiBcIm51bWVyaWNcIlxuICAgICAgfSkuZm9ybWF0KGRhdGUpO1xuICAgICAgYm90dG9tVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChcInRleHRcIiwge1xuICAgICAgICBrZXk6IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICB5OiBoZWFkZXJIZWlnaHQgKiAwLjgsXG4gICAgICAgIHg6IGNvbHVtbldpZHRoICogKGkgKyArcnRsKSxcbiAgICAgICAgY2xhc3NOYW1lOiBzdHlsZXMkNS5jYWxlbmRhckJvdHRvbVRleHQsXG4gICAgICAgIGZvbnRGYW1pbHk6IGZvbnRGYW1pbHlcbiAgICAgIH0sIGJvdHRvbVZhbHVlKSk7XG5cbiAgICAgIGlmIChpID09PSAwIHx8IGRhdGUuZ2V0RGF0ZSgpICE9PSBkYXRlc1tpIC0gMV0uZ2V0RGF0ZSgpKSB7XG4gICAgICAgIHZhciB0b3BWYWx1ZSA9IGdldExvY2FsRGF5T2ZXZWVrKGRhdGUsIGxvY2FsZSwgXCJzaG9ydFwiKSArIFwiLCBcIiArIGRhdGUuZ2V0RGF0ZSgpICsgXCIgXCIgKyBnZXRMb2NhbGVNb250aChkYXRlLCBsb2NhbGUpO1xuICAgICAgICB0b3BWYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFRvcFBhcnRPZkNhbGVuZGFyLCB7XG4gICAgICAgICAga2V5OiB0b3BWYWx1ZSArIGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICB2YWx1ZTogdG9wVmFsdWUsXG4gICAgICAgICAgeDFMaW5lOiBjb2x1bW5XaWR0aCAqIGkgKyB0aWNrcyAqIGNvbHVtbldpZHRoLFxuICAgICAgICAgIHkxTGluZTogMCxcbiAgICAgICAgICB5MkxpbmU6IHRvcERlZmF1bHRIZWlnaHQsXG4gICAgICAgICAgeFRleHQ6IGNvbHVtbldpZHRoICogaSArIHRpY2tzICogY29sdW1uV2lkdGggKiAwLjUsXG4gICAgICAgICAgeVRleHQ6IHRvcERlZmF1bHRIZWlnaHQgKiAwLjlcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbdG9wVmFsdWVzLCBib3R0b21WYWx1ZXNdO1xuICB9O1xuXG4gIHZhciBnZXRDYWxlbmRhclZhbHVlc0ZvckhvdXIgPSBmdW5jdGlvbiBnZXRDYWxlbmRhclZhbHVlc0ZvckhvdXIoKSB7XG4gICAgdmFyIHRvcFZhbHVlcyA9IFtdO1xuICAgIHZhciBib3R0b21WYWx1ZXMgPSBbXTtcbiAgICB2YXIgdG9wRGVmYXVsdEhlaWdodCA9IGhlYWRlckhlaWdodCAqIDAuNTtcbiAgICB2YXIgZGF0ZXMgPSBkYXRlU2V0dXAuZGF0ZXM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGF0ZSA9IGRhdGVzW2ldO1xuICAgICAgdmFyIGJvdHRvbVZhbHVlID0gZ2V0Q2FjaGVkRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7XG4gICAgICAgIGhvdXI6IFwibnVtZXJpY1wiXG4gICAgICB9KS5mb3JtYXQoZGF0ZSk7XG4gICAgICBib3R0b21WYWx1ZXMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dFwiLCB7XG4gICAgICAgIGtleTogZGF0ZS5nZXRUaW1lKCksXG4gICAgICAgIHk6IGhlYWRlckhlaWdodCAqIDAuOCxcbiAgICAgICAgeDogY29sdW1uV2lkdGggKiAoaSArICtydGwpLFxuICAgICAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFyQm90dG9tVGV4dCxcbiAgICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseVxuICAgICAgfSwgYm90dG9tVmFsdWUpKTtcblxuICAgICAgaWYgKGkgIT09IDAgJiYgZGF0ZS5nZXREYXRlKCkgIT09IGRhdGVzW2kgLSAxXS5nZXREYXRlKCkpIHtcbiAgICAgICAgdmFyIGRpc3BsYXlEYXRlID0gZGF0ZXNbaSAtIDFdO1xuICAgICAgICB2YXIgdG9wVmFsdWUgPSBnZXRMb2NhbERheU9mV2VlayhkaXNwbGF5RGF0ZSwgbG9jYWxlLCBcImxvbmdcIikgKyBcIiwgXCIgKyBkaXNwbGF5RGF0ZS5nZXREYXRlKCkgKyBcIiBcIiArIGdldExvY2FsZU1vbnRoKGRpc3BsYXlEYXRlLCBsb2NhbGUpO1xuICAgICAgICB2YXIgdG9wUG9zaXRpb24gPSAoZGF0ZS5nZXRIb3VycygpIC0gMjQpIC8gMjtcbiAgICAgICAgdG9wVmFsdWVzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChUb3BQYXJ0T2ZDYWxlbmRhciwge1xuICAgICAgICAgIGtleTogdG9wVmFsdWUgKyBkaXNwbGF5RGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgIHZhbHVlOiB0b3BWYWx1ZSxcbiAgICAgICAgICB4MUxpbmU6IGNvbHVtbldpZHRoICogaSxcbiAgICAgICAgICB5MUxpbmU6IDAsXG4gICAgICAgICAgeTJMaW5lOiB0b3BEZWZhdWx0SGVpZ2h0LFxuICAgICAgICAgIHhUZXh0OiBjb2x1bW5XaWR0aCAqIChpICsgdG9wUG9zaXRpb24pLFxuICAgICAgICAgIHlUZXh0OiB0b3BEZWZhdWx0SGVpZ2h0ICogMC45XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3RvcFZhbHVlcywgYm90dG9tVmFsdWVzXTtcbiAgfTtcblxuICB2YXIgdG9wVmFsdWVzID0gW107XG4gIHZhciBib3R0b21WYWx1ZXMgPSBbXTtcblxuICBzd2l0Y2ggKGRhdGVTZXR1cC52aWV3TW9kZSkge1xuICAgIGNhc2UgVmlld01vZGUuWWVhcjpcbiAgICAgIHZhciBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3IgPSBnZXRDYWxlbmRhclZhbHVlc0ZvclllYXIoKTtcblxuICAgICAgdG9wVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yWzBdO1xuICAgICAgYm90dG9tVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yWzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLk1vbnRoOlxuICAgICAgdmFyIF9nZXRDYWxlbmRhclZhbHVlc0ZvcjIgPSBnZXRDYWxlbmRhclZhbHVlc0Zvck1vbnRoKCk7XG5cbiAgICAgIHRvcFZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjJbMF07XG4gICAgICBib3R0b21WYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3IyWzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLldlZWs6XG4gICAgICB2YXIgX2dldENhbGVuZGFyVmFsdWVzRm9yMyA9IGdldENhbGVuZGFyVmFsdWVzRm9yV2VlaygpO1xuXG4gICAgICB0b3BWYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3IzWzBdO1xuICAgICAgYm90dG9tVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yM1sxXTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBWaWV3TW9kZS5EYXk6XG4gICAgICB2YXIgX2dldENhbGVuZGFyVmFsdWVzRm9yNCA9IGdldENhbGVuZGFyVmFsdWVzRm9yRGF5KCk7XG5cbiAgICAgIHRvcFZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjRbMF07XG4gICAgICBib3R0b21WYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3I0WzFdO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFZpZXdNb2RlLlF1YXJ0ZXJEYXk6XG4gICAgY2FzZSBWaWV3TW9kZS5IYWxmRGF5OlxuICAgICAgdmFyIF9nZXRDYWxlbmRhclZhbHVlc0ZvcjUgPSBnZXRDYWxlbmRhclZhbHVlc0ZvclBhcnRPZkRheSgpO1xuXG4gICAgICB0b3BWYWx1ZXMgPSBfZ2V0Q2FsZW5kYXJWYWx1ZXNGb3I1WzBdO1xuICAgICAgYm90dG9tVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yNVsxXTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBWaWV3TW9kZS5Ib3VyOlxuICAgICAgdmFyIF9nZXRDYWxlbmRhclZhbHVlc0ZvcjYgPSBnZXRDYWxlbmRhclZhbHVlc0ZvckhvdXIoKTtcblxuICAgICAgdG9wVmFsdWVzID0gX2dldENhbGVuZGFyVmFsdWVzRm9yNlswXTtcbiAgICAgIGJvdHRvbVZhbHVlcyA9IF9nZXRDYWxlbmRhclZhbHVlc0ZvcjZbMV07XG4gIH1cblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYWxlbmRhclwiLFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgd2lkdGg6IGNvbHVtbldpZHRoICogZGF0ZVNldHVwLmRhdGVzLmxlbmd0aCxcbiAgICBoZWlnaHQ6IGhlYWRlckhlaWdodCxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ1LmNhbGVuZGFySGVhZGVyXG4gIH0pLCBib3R0b21WYWx1ZXMsIFwiIFwiLCB0b3BWYWx1ZXMpO1xufTtcblxuLy8gQSB0eXBlIG9mIHByb21pc2UtbGlrZSB0aGF0IHJlc29sdmVzIHN5bmNocm9ub3VzbHkgYW5kIHN1cHBvcnRzIG9ubHkgb25lIG9ic2VydmVyXG5cbmNvbnN0IF9pdGVyYXRvclN5bWJvbCA9IC8qI19fUFVSRV9fKi8gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IChTeW1ib2wuaXRlcmF0b3IgfHwgKFN5bWJvbC5pdGVyYXRvciA9IFN5bWJvbChcIlN5bWJvbC5pdGVyYXRvclwiKSkpIDogXCJAQGl0ZXJhdG9yXCI7XG5cbmNvbnN0IF9hc3luY0l0ZXJhdG9yU3ltYm9sID0gLyojX19QVVJFX18qLyB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gKFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IChTeW1ib2wuYXN5bmNJdGVyYXRvciA9IFN5bWJvbChcIlN5bWJvbC5hc3luY0l0ZXJhdG9yXCIpKSkgOiBcIkBAYXN5bmNJdGVyYXRvclwiO1xuXG4vLyBBc3luY2hyb25vdXNseSBjYWxsIGEgZnVuY3Rpb24gYW5kIHNlbmQgZXJyb3JzIHRvIHJlY292ZXJ5IGNvbnRpbnVhdGlvblxuZnVuY3Rpb24gX2NhdGNoKGJvZHksIHJlY292ZXIpIHtcblx0dHJ5IHtcblx0XHR2YXIgcmVzdWx0ID0gYm9keSgpO1xuXHR9IGNhdGNoKGUpIHtcblx0XHRyZXR1cm4gcmVjb3ZlcihlKTtcblx0fVxuXHRpZiAocmVzdWx0ICYmIHJlc3VsdC50aGVuKSB7XG5cdFx0cmV0dXJuIHJlc3VsdC50aGVuKHZvaWQgMCwgcmVjb3Zlcik7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIEFycm93ID0gZnVuY3Rpb24gQXJyb3coX3JlZikge1xuICB2YXIgdGFza0Zyb20gPSBfcmVmLnRhc2tGcm9tLFxuICAgICAgdGFza1RvID0gX3JlZi50YXNrVG8sXG4gICAgICByb3dIZWlnaHQgPSBfcmVmLnJvd0hlaWdodCxcbiAgICAgIHRhc2tIZWlnaHQgPSBfcmVmLnRhc2tIZWlnaHQsXG4gICAgICBhcnJvd0luZGVudCA9IF9yZWYuYXJyb3dJbmRlbnQsXG4gICAgICBydGwgPSBfcmVmLnJ0bDtcbiAgdmFyIHBhdGg7XG4gIHZhciB0cmlhbmdsZVBvaW50cztcblxuICBpZiAocnRsKSB7XG4gICAgdmFyIF9kcm93blBhdGhBbmRUcmlhbmdsZSA9IGRyb3duUGF0aEFuZFRyaWFuZ2xlUlRMKHRhc2tGcm9tLCB0YXNrVG8sIHJvd0hlaWdodCwgdGFza0hlaWdodCwgYXJyb3dJbmRlbnQpO1xuXG4gICAgcGF0aCA9IF9kcm93blBhdGhBbmRUcmlhbmdsZVswXTtcbiAgICB0cmlhbmdsZVBvaW50cyA9IF9kcm93blBhdGhBbmRUcmlhbmdsZVsxXTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgX2Ryb3duUGF0aEFuZFRyaWFuZ2xlMiA9IGRyb3duUGF0aEFuZFRyaWFuZ2xlKHRhc2tGcm9tLCB0YXNrVG8sIHJvd0hlaWdodCwgdGFza0hlaWdodCwgYXJyb3dJbmRlbnQpO1xuXG4gICAgcGF0aCA9IF9kcm93blBhdGhBbmRUcmlhbmdsZTJbMF07XG4gICAgdHJpYW5nbGVQb2ludHMgPSBfZHJvd25QYXRoQW5kVHJpYW5nbGUyWzFdO1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiYXJyb3dcIlxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgc3Ryb2tlV2lkdGg6IFwiMS41XCIsXG4gICAgZDogcGF0aCxcbiAgICBmaWxsOiBcIm5vbmVcIlxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInBvbHlnb25cIiwge1xuICAgIHBvaW50czogdHJpYW5nbGVQb2ludHNcbiAgfSkpO1xufTtcblxudmFyIGRyb3duUGF0aEFuZFRyaWFuZ2xlID0gZnVuY3Rpb24gZHJvd25QYXRoQW5kVHJpYW5nbGUodGFza0Zyb20sIHRhc2tUbywgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBhcnJvd0luZGVudCkge1xuICB2YXIgaW5kZXhDb21wYXJlID0gdGFza0Zyb20uaW5kZXggPiB0YXNrVG8uaW5kZXggPyAtMSA6IDE7XG4gIHZhciB0YXNrVG9FbmRQb3NpdGlvbiA9IHRhc2tUby55ICsgdGFza0hlaWdodCAvIDI7XG4gIHZhciB0YXNrRnJvbUVuZFBvc2l0aW9uID0gdGFza0Zyb20ueDIgKyBhcnJvd0luZGVudCAqIDI7XG4gIHZhciB0YXNrRnJvbUhvcml6b250YWxPZmZzZXRWYWx1ZSA9IHRhc2tGcm9tRW5kUG9zaXRpb24gPCB0YXNrVG8ueDEgPyBcIlwiIDogXCJIIFwiICsgKHRhc2tUby54MSAtIGFycm93SW5kZW50KTtcbiAgdmFyIHRhc2tUb0hvcml6b250YWxPZmZzZXRWYWx1ZSA9IHRhc2tGcm9tRW5kUG9zaXRpb24gPiB0YXNrVG8ueDEgPyBhcnJvd0luZGVudCA6IHRhc2tUby54MSAtIHRhc2tGcm9tLngyIC0gYXJyb3dJbmRlbnQ7XG4gIHZhciBwYXRoID0gXCJNIFwiICsgdGFza0Zyb20ueDIgKyBcIiBcIiArICh0YXNrRnJvbS55ICsgdGFza0hlaWdodCAvIDIpICsgXCIgXFxuICBoIFwiICsgYXJyb3dJbmRlbnQgKyBcIiBcXG4gIHYgXCIgKyBpbmRleENvbXBhcmUgKiByb3dIZWlnaHQgLyAyICsgXCIgXFxuICBcIiArIHRhc2tGcm9tSG9yaXpvbnRhbE9mZnNldFZhbHVlICsgXCJcXG4gIFYgXCIgKyB0YXNrVG9FbmRQb3NpdGlvbiArIFwiIFxcbiAgaCBcIiArIHRhc2tUb0hvcml6b250YWxPZmZzZXRWYWx1ZTtcbiAgdmFyIHRyaWFuZ2xlUG9pbnRzID0gdGFza1RvLngxICsgXCIsXCIgKyB0YXNrVG9FbmRQb3NpdGlvbiArIFwiIFxcbiAgXCIgKyAodGFza1RvLngxIC0gNSkgKyBcIixcIiArICh0YXNrVG9FbmRQb3NpdGlvbiAtIDUpICsgXCIgXFxuICBcIiArICh0YXNrVG8ueDEgLSA1KSArIFwiLFwiICsgKHRhc2tUb0VuZFBvc2l0aW9uICsgNSk7XG4gIHJldHVybiBbcGF0aCwgdHJpYW5nbGVQb2ludHNdO1xufTtcblxudmFyIGRyb3duUGF0aEFuZFRyaWFuZ2xlUlRMID0gZnVuY3Rpb24gZHJvd25QYXRoQW5kVHJpYW5nbGVSVEwodGFza0Zyb20sIHRhc2tUbywgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBhcnJvd0luZGVudCkge1xuICB2YXIgaW5kZXhDb21wYXJlID0gdGFza0Zyb20uaW5kZXggPiB0YXNrVG8uaW5kZXggPyAtMSA6IDE7XG4gIHZhciB0YXNrVG9FbmRQb3NpdGlvbiA9IHRhc2tUby55ICsgdGFza0hlaWdodCAvIDI7XG4gIHZhciB0YXNrRnJvbUVuZFBvc2l0aW9uID0gdGFza0Zyb20ueDEgLSBhcnJvd0luZGVudCAqIDI7XG4gIHZhciB0YXNrRnJvbUhvcml6b250YWxPZmZzZXRWYWx1ZSA9IHRhc2tGcm9tRW5kUG9zaXRpb24gPiB0YXNrVG8ueDIgPyBcIlwiIDogXCJIIFwiICsgKHRhc2tUby54MiArIGFycm93SW5kZW50KTtcbiAgdmFyIHRhc2tUb0hvcml6b250YWxPZmZzZXRWYWx1ZSA9IHRhc2tGcm9tRW5kUG9zaXRpb24gPCB0YXNrVG8ueDIgPyAtYXJyb3dJbmRlbnQgOiB0YXNrVG8ueDIgLSB0YXNrRnJvbS54MSArIGFycm93SW5kZW50O1xuICB2YXIgcGF0aCA9IFwiTSBcIiArIHRhc2tGcm9tLngxICsgXCIgXCIgKyAodGFza0Zyb20ueSArIHRhc2tIZWlnaHQgLyAyKSArIFwiIFxcbiAgaCBcIiArIC1hcnJvd0luZGVudCArIFwiIFxcbiAgdiBcIiArIGluZGV4Q29tcGFyZSAqIHJvd0hlaWdodCAvIDIgKyBcIiBcXG4gIFwiICsgdGFza0Zyb21Ib3Jpem9udGFsT2Zmc2V0VmFsdWUgKyBcIlxcbiAgViBcIiArIHRhc2tUb0VuZFBvc2l0aW9uICsgXCIgXFxuICBoIFwiICsgdGFza1RvSG9yaXpvbnRhbE9mZnNldFZhbHVlO1xuICB2YXIgdHJpYW5nbGVQb2ludHMgPSB0YXNrVG8ueDIgKyBcIixcIiArIHRhc2tUb0VuZFBvc2l0aW9uICsgXCIgXFxuICBcIiArICh0YXNrVG8ueDIgKyA1KSArIFwiLFwiICsgKHRhc2tUb0VuZFBvc2l0aW9uICsgNSkgKyBcIiBcXG4gIFwiICsgKHRhc2tUby54MiArIDUpICsgXCIsXCIgKyAodGFza1RvRW5kUG9zaXRpb24gLSA1KTtcbiAgcmV0dXJuIFtwYXRoLCB0cmlhbmdsZVBvaW50c107XG59O1xuXG52YXIgY29udmVydFRvQmFyVGFza3MgPSBmdW5jdGlvbiBjb252ZXJ0VG9CYXJUYXNrcyh0YXNrcywgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIHJ0bCwgYmFyUHJvZ3Jlc3NDb2xvciwgYmFyUHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBiYXJCYWNrZ3JvdW5kQ29sb3IsIGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NDb2xvciwgcHJvamVjdFByb2dyZXNzU2VsZWN0ZWRDb2xvciwgcHJvamVjdEJhY2tncm91bmRDb2xvciwgcHJvamVjdEJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yKSB7XG4gIHZhciBiYXJUYXNrcyA9IHRhc2tzLm1hcChmdW5jdGlvbiAodCwgaSkge1xuICAgIHJldHVybiBjb252ZXJ0VG9CYXJUYXNrKHQsIGksIGRhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBydGwsIGJhclByb2dyZXNzQ29sb3IsIGJhclByb2dyZXNzU2VsZWN0ZWRDb2xvciwgYmFyQmFja2dyb3VuZENvbG9yLCBiYXJCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciwgcHJvamVjdFByb2dyZXNzQ29sb3IsIHByb2plY3RQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcik7XG4gIH0pO1xuICBiYXJUYXNrcyA9IGJhclRhc2tzLm1hcChmdW5jdGlvbiAodGFzaykge1xuICAgIHZhciBkZXBlbmRlbmNpZXMgPSB0YXNrLmRlcGVuZGVuY2llcyB8fCBbXTtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGopIHtcbiAgICAgIHZhciBkZXBlbmRlbmNlID0gYmFyVGFza3MuZmluZEluZGV4KGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUuaWQgPT09IGRlcGVuZGVuY2llc1tqXTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGRlcGVuZGVuY2UgIT09IC0xKSBiYXJUYXNrc1tkZXBlbmRlbmNlXS5iYXJDaGlsZHJlbi5wdXNoKHRhc2spO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xuICAgICAgX2xvb3Aoaik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhc2s7XG4gIH0pO1xuICByZXR1cm4gYmFyVGFza3M7XG59O1xuXG52YXIgY29udmVydFRvQmFyVGFzayA9IGZ1bmN0aW9uIGNvbnZlcnRUb0JhclRhc2sodGFzaywgaW5kZXgsIGRhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBydGwsIGJhclByb2dyZXNzQ29sb3IsIGJhclByb2dyZXNzU2VsZWN0ZWRDb2xvciwgYmFyQmFja2dyb3VuZENvbG9yLCBiYXJCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciwgcHJvamVjdFByb2dyZXNzQ29sb3IsIHByb2plY3RQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kQ29sb3IsIHByb2plY3RCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcikge1xuICB2YXIgYmFyVGFzaztcblxuICBzd2l0Y2ggKHRhc2sudHlwZSkge1xuICAgIGNhc2UgXCJtaWxlc3RvbmVcIjpcbiAgICAgIGJhclRhc2sgPSBjb252ZXJ0VG9NaWxlc3RvbmUodGFzaywgaW5kZXgsIGRhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcInByb2plY3RcIjpcbiAgICAgIGJhclRhc2sgPSBjb252ZXJ0VG9CYXIodGFzaywgaW5kZXgsIGRhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBydGwsIHByb2plY3RQcm9ncmVzc0NvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgYmFyVGFzayA9IGNvbnZlcnRUb0Jhcih0YXNrLCBpbmRleCwgZGF0ZXMsIGNvbHVtbldpZHRoLCByb3dIZWlnaHQsIHRhc2tIZWlnaHQsIGJhckNvcm5lclJhZGl1cywgaGFuZGxlV2lkdGgsIHJ0bCwgYmFyUHJvZ3Jlc3NDb2xvciwgYmFyUHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBiYXJCYWNrZ3JvdW5kQ29sb3IsIGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGJhclRhc2s7XG59O1xuXG52YXIgY29udmVydFRvQmFyID0gZnVuY3Rpb24gY29udmVydFRvQmFyKHRhc2ssIGluZGV4LCBkYXRlcywgY29sdW1uV2lkdGgsIHJvd0hlaWdodCwgdGFza0hlaWdodCwgYmFyQ29ybmVyUmFkaXVzLCBoYW5kbGVXaWR0aCwgcnRsLCBiYXJQcm9ncmVzc0NvbG9yLCBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIGJhckJhY2tncm91bmRDb2xvciwgYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpIHtcbiAgdmFyIHgxO1xuICB2YXIgeDI7XG5cbiAgaWYgKHJ0bCkge1xuICAgIHgyID0gdGFza1hDb29yZGluYXRlUlRMKHRhc2suc3RhcnQsIGRhdGVzLCBjb2x1bW5XaWR0aCk7XG4gICAgeDEgPSB0YXNrWENvb3JkaW5hdGVSVEwodGFzay5lbmQsIGRhdGVzLCBjb2x1bW5XaWR0aCk7XG4gIH0gZWxzZSB7XG4gICAgeDEgPSB0YXNrWENvb3JkaW5hdGUodGFzay5zdGFydCwgZGF0ZXMsIGNvbHVtbldpZHRoKTtcbiAgICB4MiA9IHRhc2tYQ29vcmRpbmF0ZSh0YXNrLmVuZCwgZGF0ZXMsIGNvbHVtbldpZHRoKTtcbiAgfVxuXG4gIHZhciB0eXBlSW50ZXJuYWwgPSB0YXNrLnR5cGU7XG5cbiAgaWYgKHR5cGVJbnRlcm5hbCA9PT0gXCJ0YXNrXCIgJiYgeDIgLSB4MSA8IGhhbmRsZVdpZHRoICogMikge1xuICAgIHR5cGVJbnRlcm5hbCA9IFwic21hbGx0YXNrXCI7XG4gICAgeDIgPSB4MSArIGhhbmRsZVdpZHRoICogMjtcbiAgfVxuXG4gIHZhciBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXMgPSBwcm9ncmVzc1dpdGhCeVBhcmFtcyh4MSwgeDIsIHRhc2sucHJvZ3Jlc3MsIHJ0bCksXG4gICAgICBwcm9ncmVzc1dpZHRoID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zWzBdLFxuICAgICAgcHJvZ3Jlc3NYID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zWzFdO1xuXG4gIHZhciB5ID0gdGFza1lDb29yZGluYXRlKGluZGV4LCByb3dIZWlnaHQsIHRhc2tIZWlnaHQpO1xuICB2YXIgaGlkZUNoaWxkcmVuID0gdGFzay50eXBlID09PSBcInByb2plY3RcIiA/IHRhc2suaGlkZUNoaWxkcmVuIDogdW5kZWZpbmVkO1xuXG4gIHZhciBzdHlsZXMgPSBfZXh0ZW5kcyh7XG4gICAgYmFja2dyb3VuZENvbG9yOiBiYXJCYWNrZ3JvdW5kQ29sb3IsXG4gICAgYmFja2dyb3VuZFNlbGVjdGVkQ29sb3I6IGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yLFxuICAgIHByb2dyZXNzQ29sb3I6IGJhclByb2dyZXNzQ29sb3IsXG4gICAgcHJvZ3Jlc3NTZWxlY3RlZENvbG9yOiBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3JcbiAgfSwgdGFzay5zdHlsZXMpO1xuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgdGFzaywge1xuICAgIHR5cGVJbnRlcm5hbDogdHlwZUludGVybmFsLFxuICAgIHgxOiB4MSxcbiAgICB4MjogeDIsXG4gICAgeTogeSxcbiAgICBpbmRleDogaW5kZXgsXG4gICAgcHJvZ3Jlc3NYOiBwcm9ncmVzc1gsXG4gICAgcHJvZ3Jlc3NXaWR0aDogcHJvZ3Jlc3NXaWR0aCxcbiAgICBiYXJDb3JuZXJSYWRpdXM6IGJhckNvcm5lclJhZGl1cyxcbiAgICBoYW5kbGVXaWR0aDogaGFuZGxlV2lkdGgsXG4gICAgaGlkZUNoaWxkcmVuOiBoaWRlQ2hpbGRyZW4sXG4gICAgaGVpZ2h0OiB0YXNrSGVpZ2h0LFxuICAgIGJhckNoaWxkcmVuOiBbXSxcbiAgICBzdHlsZXM6IHN0eWxlc1xuICB9KTtcbn07XG5cbnZhciBjb252ZXJ0VG9NaWxlc3RvbmUgPSBmdW5jdGlvbiBjb252ZXJ0VG9NaWxlc3RvbmUodGFzaywgaW5kZXgsIGRhdGVzLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGhhbmRsZVdpZHRoLCBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yKSB7XG4gIHZhciB4ID0gdGFza1hDb29yZGluYXRlKHRhc2suc3RhcnQsIGRhdGVzLCBjb2x1bW5XaWR0aCk7XG4gIHZhciB5ID0gdGFza1lDb29yZGluYXRlKGluZGV4LCByb3dIZWlnaHQsIHRhc2tIZWlnaHQpO1xuICB2YXIgeDEgPSB4IC0gdGFza0hlaWdodCAqIDAuNTtcbiAgdmFyIHgyID0geCArIHRhc2tIZWlnaHQgKiAwLjU7XG4gIHZhciByb3RhdGVkSGVpZ2h0ID0gdGFza0hlaWdodCAvIDEuNDE0O1xuXG4gIHZhciBzdHlsZXMgPSBfZXh0ZW5kcyh7XG4gICAgYmFja2dyb3VuZENvbG9yOiBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsXG4gICAgYmFja2dyb3VuZFNlbGVjdGVkQ29sb3I6IG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yLFxuICAgIHByb2dyZXNzQ29sb3I6IFwiXCIsXG4gICAgcHJvZ3Jlc3NTZWxlY3RlZENvbG9yOiBcIlwiXG4gIH0sIHRhc2suc3R5bGVzKTtcblxuICByZXR1cm4gX2V4dGVuZHMoe30sIHRhc2ssIHtcbiAgICBlbmQ6IHRhc2suc3RhcnQsXG4gICAgeDE6IHgxLFxuICAgIHgyOiB4MixcbiAgICB5OiB5LFxuICAgIGluZGV4OiBpbmRleCxcbiAgICBwcm9ncmVzc1g6IDAsXG4gICAgcHJvZ3Jlc3NXaWR0aDogMCxcbiAgICBiYXJDb3JuZXJSYWRpdXM6IGJhckNvcm5lclJhZGl1cyxcbiAgICBoYW5kbGVXaWR0aDogaGFuZGxlV2lkdGgsXG4gICAgdHlwZUludGVybmFsOiB0YXNrLnR5cGUsXG4gICAgcHJvZ3Jlc3M6IDAsXG4gICAgaGVpZ2h0OiByb3RhdGVkSGVpZ2h0LFxuICAgIGhpZGVDaGlsZHJlbjogdW5kZWZpbmVkLFxuICAgIGJhckNoaWxkcmVuOiBbXSxcbiAgICBzdHlsZXM6IHN0eWxlc1xuICB9KTtcbn07XG5cbnZhciB0YXNrWENvb3JkaW5hdGUgPSBmdW5jdGlvbiB0YXNrWENvb3JkaW5hdGUoeERhdGUsIGRhdGVzLCBjb2x1bW5XaWR0aCkge1xuICB2YXIgaW5kZXggPSBkYXRlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHtcbiAgICByZXR1cm4gZC5nZXRUaW1lKCkgPj0geERhdGUuZ2V0VGltZSgpO1xuICB9KSAtIDE7XG4gIHZhciByZW1haW5kZXJNaWxsaXMgPSB4RGF0ZS5nZXRUaW1lKCkgLSBkYXRlc1tpbmRleF0uZ2V0VGltZSgpO1xuICB2YXIgcGVyY2VudE9mSW50ZXJ2YWwgPSByZW1haW5kZXJNaWxsaXMgLyAoZGF0ZXNbaW5kZXggKyAxXS5nZXRUaW1lKCkgLSBkYXRlc1tpbmRleF0uZ2V0VGltZSgpKTtcbiAgdmFyIHggPSBpbmRleCAqIGNvbHVtbldpZHRoICsgcGVyY2VudE9mSW50ZXJ2YWwgKiBjb2x1bW5XaWR0aDtcbiAgcmV0dXJuIHg7XG59O1xuXG52YXIgdGFza1hDb29yZGluYXRlUlRMID0gZnVuY3Rpb24gdGFza1hDb29yZGluYXRlUlRMKHhEYXRlLCBkYXRlcywgY29sdW1uV2lkdGgpIHtcbiAgdmFyIHggPSB0YXNrWENvb3JkaW5hdGUoeERhdGUsIGRhdGVzLCBjb2x1bW5XaWR0aCk7XG4gIHggKz0gY29sdW1uV2lkdGg7XG4gIHJldHVybiB4O1xufTtcblxudmFyIHRhc2tZQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIHRhc2tZQ29vcmRpbmF0ZShpbmRleCwgcm93SGVpZ2h0LCB0YXNrSGVpZ2h0KSB7XG4gIHZhciB5ID0gaW5kZXggKiByb3dIZWlnaHQgKyAocm93SGVpZ2h0IC0gdGFza0hlaWdodCkgLyAyO1xuICByZXR1cm4geTtcbn07XG5cbnZhciBwcm9ncmVzc1dpdGhCeVBhcmFtcyA9IGZ1bmN0aW9uIHByb2dyZXNzV2l0aEJ5UGFyYW1zKHRhc2tYMSwgdGFza1gyLCBwcm9ncmVzcywgcnRsKSB7XG4gIHZhciBwcm9ncmVzc1dpZHRoID0gKHRhc2tYMiAtIHRhc2tYMSkgKiBwcm9ncmVzcyAqIDAuMDE7XG4gIHZhciBwcm9ncmVzc1g7XG5cbiAgaWYgKHJ0bCkge1xuICAgIHByb2dyZXNzWCA9IHRhc2tYMiAtIHByb2dyZXNzV2lkdGg7XG4gIH0gZWxzZSB7XG4gICAgcHJvZ3Jlc3NYID0gdGFza1gxO1xuICB9XG5cbiAgcmV0dXJuIFtwcm9ncmVzc1dpZHRoLCBwcm9ncmVzc1hdO1xufTtcblxudmFyIHByb2dyZXNzQnlYID0gZnVuY3Rpb24gcHJvZ3Jlc3NCeVgoeCwgdGFzaykge1xuICBpZiAoeCA+PSB0YXNrLngyKSByZXR1cm4gMTAwO2Vsc2UgaWYgKHggPD0gdGFzay54MSkgcmV0dXJuIDA7ZWxzZSB7XG4gICAgdmFyIGJhcldpZHRoID0gdGFzay54MiAtIHRhc2sueDE7XG4gICAgdmFyIHByb2dyZXNzUGVyY2VudCA9IE1hdGgucm91bmQoKHggLSB0YXNrLngxKSAqIDEwMCAvIGJhcldpZHRoKTtcbiAgICByZXR1cm4gcHJvZ3Jlc3NQZXJjZW50O1xuICB9XG59O1xuXG52YXIgcHJvZ3Jlc3NCeVhSVEwgPSBmdW5jdGlvbiBwcm9ncmVzc0J5WFJUTCh4LCB0YXNrKSB7XG4gIGlmICh4ID49IHRhc2sueDIpIHJldHVybiAwO2Vsc2UgaWYgKHggPD0gdGFzay54MSkgcmV0dXJuIDEwMDtlbHNlIHtcbiAgICB2YXIgYmFyV2lkdGggPSB0YXNrLngyIC0gdGFzay54MTtcbiAgICB2YXIgcHJvZ3Jlc3NQZXJjZW50ID0gTWF0aC5yb3VuZCgodGFzay54MiAtIHgpICogMTAwIC8gYmFyV2lkdGgpO1xuICAgIHJldHVybiBwcm9ncmVzc1BlcmNlbnQ7XG4gIH1cbn07XG5cbnZhciBnZXRQcm9ncmVzc1BvaW50ID0gZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NQb2ludChwcm9ncmVzc1gsIHRhc2tZLCB0YXNrSGVpZ2h0KSB7XG4gIHZhciBwb2ludCA9IFtwcm9ncmVzc1ggLSA1LCB0YXNrWSArIHRhc2tIZWlnaHQsIHByb2dyZXNzWCArIDUsIHRhc2tZICsgdGFza0hlaWdodCwgcHJvZ3Jlc3NYLCB0YXNrWSArIHRhc2tIZWlnaHQgLSA4LjY2XTtcbiAgcmV0dXJuIHBvaW50LmpvaW4oXCIsXCIpO1xufTtcblxudmFyIHN0YXJ0QnlYID0gZnVuY3Rpb24gc3RhcnRCeVgoeCwgeFN0ZXAsIHRhc2spIHtcbiAgaWYgKHggPj0gdGFzay54MiAtIHRhc2suaGFuZGxlV2lkdGggKiAyKSB7XG4gICAgeCA9IHRhc2sueDIgLSB0YXNrLmhhbmRsZVdpZHRoICogMjtcbiAgfVxuXG4gIHZhciBzdGVwcyA9IE1hdGgucm91bmQoKHggLSB0YXNrLngxKSAvIHhTdGVwKTtcbiAgdmFyIGFkZGl0aW9uYWxYVmFsdWUgPSBzdGVwcyAqIHhTdGVwO1xuICB2YXIgbmV3WCA9IHRhc2sueDEgKyBhZGRpdGlvbmFsWFZhbHVlO1xuICByZXR1cm4gbmV3WDtcbn07XG5cbnZhciBlbmRCeVggPSBmdW5jdGlvbiBlbmRCeVgoeCwgeFN0ZXAsIHRhc2spIHtcbiAgaWYgKHggPD0gdGFzay54MSArIHRhc2suaGFuZGxlV2lkdGggKiAyKSB7XG4gICAgeCA9IHRhc2sueDEgKyB0YXNrLmhhbmRsZVdpZHRoICogMjtcbiAgfVxuXG4gIHZhciBzdGVwcyA9IE1hdGgucm91bmQoKHggLSB0YXNrLngyKSAvIHhTdGVwKTtcbiAgdmFyIGFkZGl0aW9uYWxYVmFsdWUgPSBzdGVwcyAqIHhTdGVwO1xuICB2YXIgbmV3WCA9IHRhc2sueDIgKyBhZGRpdGlvbmFsWFZhbHVlO1xuICByZXR1cm4gbmV3WDtcbn07XG5cbnZhciBtb3ZlQnlYID0gZnVuY3Rpb24gbW92ZUJ5WCh4LCB4U3RlcCwgdGFzaykge1xuICB2YXIgc3RlcHMgPSBNYXRoLnJvdW5kKCh4IC0gdGFzay54MSkgLyB4U3RlcCk7XG4gIHZhciBhZGRpdGlvbmFsWFZhbHVlID0gc3RlcHMgKiB4U3RlcDtcbiAgdmFyIG5ld1gxID0gdGFzay54MSArIGFkZGl0aW9uYWxYVmFsdWU7XG4gIHZhciBuZXdYMiA9IG5ld1gxICsgdGFzay54MiAtIHRhc2sueDE7XG4gIHJldHVybiBbbmV3WDEsIG5ld1gyXTtcbn07XG5cbnZhciBkYXRlQnlYID0gZnVuY3Rpb24gZGF0ZUJ5WCh4LCB0YXNrWCwgdGFza0RhdGUsIHhTdGVwLCB0aW1lU3RlcCkge1xuICB2YXIgbmV3RGF0ZSA9IG5ldyBEYXRlKCh4IC0gdGFza1gpIC8geFN0ZXAgKiB0aW1lU3RlcCArIHRhc2tEYXRlLmdldFRpbWUoKSk7XG4gIG5ld0RhdGUgPSBuZXcgRGF0ZShuZXdEYXRlLmdldFRpbWUoKSArIChuZXdEYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgLSB0YXNrRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpKSAqIDYwMDAwKTtcbiAgcmV0dXJuIG5ld0RhdGU7XG59O1xuXG52YXIgaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVRhc2tCeVNWR01vdXNlRXZlbnQoc3ZnWCwgYWN0aW9uLCBzZWxlY3RlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSwgcnRsKSB7XG4gIHZhciByZXN1bHQ7XG5cbiAgc3dpdGNoIChzZWxlY3RlZFRhc2sudHlwZSkge1xuICAgIGNhc2UgXCJtaWxlc3RvbmVcIjpcbiAgICAgIHJlc3VsdCA9IGhhbmRsZVRhc2tCeVNWR01vdXNlRXZlbnRGb3JNaWxlc3RvbmUoc3ZnWCwgYWN0aW9uLCBzZWxlY3RlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXN1bHQgPSBoYW5kbGVUYXNrQnlTVkdNb3VzZUV2ZW50Rm9yQmFyKHN2Z1gsIGFjdGlvbiwgc2VsZWN0ZWRUYXNrLCB4U3RlcCwgdGltZVN0ZXAsIGluaXRFdmVudFgxRGVsdGEsIHJ0bCk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudEZvckJhciA9IGZ1bmN0aW9uIGhhbmRsZVRhc2tCeVNWR01vdXNlRXZlbnRGb3JCYXIoc3ZnWCwgYWN0aW9uLCBzZWxlY3RlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSwgcnRsKSB7XG4gIHZhciBjaGFuZ2VkVGFzayA9IF9leHRlbmRzKHt9LCBzZWxlY3RlZFRhc2spO1xuXG4gIHZhciBpc0NoYW5nZWQgPSBmYWxzZTtcblxuICBzd2l0Y2ggKGFjdGlvbikge1xuICAgIGNhc2UgXCJwcm9ncmVzc1wiOlxuICAgICAgaWYgKHJ0bCkge1xuICAgICAgICBjaGFuZ2VkVGFzay5wcm9ncmVzcyA9IHByb2dyZXNzQnlYUlRMKHN2Z1gsIHNlbGVjdGVkVGFzayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VkVGFzay5wcm9ncmVzcyA9IHByb2dyZXNzQnlYKHN2Z1gsIHNlbGVjdGVkVGFzayk7XG4gICAgICB9XG5cbiAgICAgIGlzQ2hhbmdlZCA9IGNoYW5nZWRUYXNrLnByb2dyZXNzICE9PSBzZWxlY3RlZFRhc2sucHJvZ3Jlc3M7XG5cbiAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgdmFyIF9wcm9ncmVzc1dpdGhCeVBhcmFtczIgPSBwcm9ncmVzc1dpdGhCeVBhcmFtcyhjaGFuZ2VkVGFzay54MSwgY2hhbmdlZFRhc2sueDIsIGNoYW5nZWRUYXNrLnByb2dyZXNzLCBydGwpLFxuICAgICAgICAgICAgcHJvZ3Jlc3NXaWR0aCA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczJbMF0sXG4gICAgICAgICAgICBwcm9ncmVzc1ggPSBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXMyWzFdO1xuXG4gICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzV2lkdGggPSBwcm9ncmVzc1dpZHRoO1xuICAgICAgICBjaGFuZ2VkVGFzay5wcm9ncmVzc1ggPSBwcm9ncmVzc1g7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICB7XG4gICAgICAgIHZhciBuZXdYMSA9IHN0YXJ0QnlYKHN2Z1gsIHhTdGVwLCBzZWxlY3RlZFRhc2spO1xuICAgICAgICBjaGFuZ2VkVGFzay54MSA9IG5ld1gxO1xuICAgICAgICBpc0NoYW5nZWQgPSBjaGFuZ2VkVGFzay54MSAhPT0gc2VsZWN0ZWRUYXNrLngxO1xuXG4gICAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgICBpZiAocnRsKSB7XG4gICAgICAgICAgICBjaGFuZ2VkVGFzay5lbmQgPSBkYXRlQnlYKG5ld1gxLCBzZWxlY3RlZFRhc2sueDEsIHNlbGVjdGVkVGFzay5lbmQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXNrLnN0YXJ0ID0gZGF0ZUJ5WChuZXdYMSwgc2VsZWN0ZWRUYXNrLngxLCBzZWxlY3RlZFRhc2suc3RhcnQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9wcm9ncmVzc1dpdGhCeVBhcmFtczMgPSBwcm9ncmVzc1dpdGhCeVBhcmFtcyhjaGFuZ2VkVGFzay54MSwgY2hhbmdlZFRhc2sueDIsIGNoYW5nZWRUYXNrLnByb2dyZXNzLCBydGwpLFxuICAgICAgICAgICAgICBfcHJvZ3Jlc3NXaWR0aCA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczNbMF0sXG4gICAgICAgICAgICAgIF9wcm9ncmVzc1ggPSBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXMzWzFdO1xuXG4gICAgICAgICAgY2hhbmdlZFRhc2sucHJvZ3Jlc3NXaWR0aCA9IF9wcm9ncmVzc1dpZHRoO1xuICAgICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzWCA9IF9wcm9ncmVzc1g7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgIHtcbiAgICAgICAgdmFyIG5ld1gyID0gZW5kQnlYKHN2Z1gsIHhTdGVwLCBzZWxlY3RlZFRhc2spO1xuICAgICAgICBjaGFuZ2VkVGFzay54MiA9IG5ld1gyO1xuICAgICAgICBpc0NoYW5nZWQgPSBjaGFuZ2VkVGFzay54MiAhPT0gc2VsZWN0ZWRUYXNrLngyO1xuXG4gICAgICAgIGlmIChpc0NoYW5nZWQpIHtcbiAgICAgICAgICBpZiAocnRsKSB7XG4gICAgICAgICAgICBjaGFuZ2VkVGFzay5zdGFydCA9IGRhdGVCeVgobmV3WDIsIHNlbGVjdGVkVGFzay54Miwgc2VsZWN0ZWRUYXNrLnN0YXJ0LCB4U3RlcCwgdGltZVN0ZXApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFuZ2VkVGFzay5lbmQgPSBkYXRlQnlYKG5ld1gyLCBzZWxlY3RlZFRhc2sueDIsIHNlbGVjdGVkVGFzay5lbmQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9wcm9ncmVzc1dpdGhCeVBhcmFtczQgPSBwcm9ncmVzc1dpdGhCeVBhcmFtcyhjaGFuZ2VkVGFzay54MSwgY2hhbmdlZFRhc2sueDIsIGNoYW5nZWRUYXNrLnByb2dyZXNzLCBydGwpLFxuICAgICAgICAgICAgICBfcHJvZ3Jlc3NXaWR0aDIgPSBfcHJvZ3Jlc3NXaXRoQnlQYXJhbXM0WzBdLFxuICAgICAgICAgICAgICBfcHJvZ3Jlc3NYMiA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczRbMV07XG5cbiAgICAgICAgICBjaGFuZ2VkVGFzay5wcm9ncmVzc1dpZHRoID0gX3Byb2dyZXNzV2lkdGgyO1xuICAgICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzWCA9IF9wcm9ncmVzc1gyO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICBjYXNlIFwibW92ZVwiOlxuICAgICAge1xuICAgICAgICB2YXIgX21vdmVCeVggPSBtb3ZlQnlYKHN2Z1ggLSBpbml0RXZlbnRYMURlbHRhLCB4U3RlcCwgc2VsZWN0ZWRUYXNrKSxcbiAgICAgICAgICAgIG5ld01vdmVYMSA9IF9tb3ZlQnlYWzBdLFxuICAgICAgICAgICAgbmV3TW92ZVgyID0gX21vdmVCeVhbMV07XG5cbiAgICAgICAgaXNDaGFuZ2VkID0gbmV3TW92ZVgxICE9PSBzZWxlY3RlZFRhc2sueDE7XG5cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgIGNoYW5nZWRUYXNrLnN0YXJ0ID0gZGF0ZUJ5WChuZXdNb3ZlWDEsIHNlbGVjdGVkVGFzay54MSwgc2VsZWN0ZWRUYXNrLnN0YXJ0LCB4U3RlcCwgdGltZVN0ZXApO1xuICAgICAgICAgIGNoYW5nZWRUYXNrLmVuZCA9IGRhdGVCeVgobmV3TW92ZVgyLCBzZWxlY3RlZFRhc2sueDIsIHNlbGVjdGVkVGFzay5lbmQsIHhTdGVwLCB0aW1lU3RlcCk7XG4gICAgICAgICAgY2hhbmdlZFRhc2sueDEgPSBuZXdNb3ZlWDE7XG4gICAgICAgICAgY2hhbmdlZFRhc2sueDIgPSBuZXdNb3ZlWDI7XG5cbiAgICAgICAgICB2YXIgX3Byb2dyZXNzV2l0aEJ5UGFyYW1zNSA9IHByb2dyZXNzV2l0aEJ5UGFyYW1zKGNoYW5nZWRUYXNrLngxLCBjaGFuZ2VkVGFzay54MiwgY2hhbmdlZFRhc2sucHJvZ3Jlc3MsIHJ0bCksXG4gICAgICAgICAgICAgIF9wcm9ncmVzc1dpZHRoMyA9IF9wcm9ncmVzc1dpdGhCeVBhcmFtczVbMF0sXG4gICAgICAgICAgICAgIF9wcm9ncmVzc1gzID0gX3Byb2dyZXNzV2l0aEJ5UGFyYW1zNVsxXTtcblxuICAgICAgICAgIGNoYW5nZWRUYXNrLnByb2dyZXNzV2lkdGggPSBfcHJvZ3Jlc3NXaWR0aDM7XG4gICAgICAgICAgY2hhbmdlZFRhc2sucHJvZ3Jlc3NYID0gX3Byb2dyZXNzWDM7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNDaGFuZ2VkOiBpc0NoYW5nZWQsXG4gICAgY2hhbmdlZFRhc2s6IGNoYW5nZWRUYXNrXG4gIH07XG59O1xuXG52YXIgaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudEZvck1pbGVzdG9uZSA9IGZ1bmN0aW9uIGhhbmRsZVRhc2tCeVNWR01vdXNlRXZlbnRGb3JNaWxlc3RvbmUoc3ZnWCwgYWN0aW9uLCBzZWxlY3RlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSkge1xuICB2YXIgY2hhbmdlZFRhc2sgPSBfZXh0ZW5kcyh7fSwgc2VsZWN0ZWRUYXNrKTtcblxuICB2YXIgaXNDaGFuZ2VkID0gZmFsc2U7XG5cbiAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICBjYXNlIFwibW92ZVwiOlxuICAgICAge1xuICAgICAgICB2YXIgX21vdmVCeVgyID0gbW92ZUJ5WChzdmdYIC0gaW5pdEV2ZW50WDFEZWx0YSwgeFN0ZXAsIHNlbGVjdGVkVGFzayksXG4gICAgICAgICAgICBuZXdNb3ZlWDEgPSBfbW92ZUJ5WDJbMF0sXG4gICAgICAgICAgICBuZXdNb3ZlWDIgPSBfbW92ZUJ5WDJbMV07XG5cbiAgICAgICAgaXNDaGFuZ2VkID0gbmV3TW92ZVgxICE9PSBzZWxlY3RlZFRhc2sueDE7XG5cbiAgICAgICAgaWYgKGlzQ2hhbmdlZCkge1xuICAgICAgICAgIGNoYW5nZWRUYXNrLnN0YXJ0ID0gZGF0ZUJ5WChuZXdNb3ZlWDEsIHNlbGVjdGVkVGFzay54MSwgc2VsZWN0ZWRUYXNrLnN0YXJ0LCB4U3RlcCwgdGltZVN0ZXApO1xuICAgICAgICAgIGNoYW5nZWRUYXNrLmVuZCA9IGNoYW5nZWRUYXNrLnN0YXJ0O1xuICAgICAgICAgIGNoYW5nZWRUYXNrLngxID0gbmV3TW92ZVgxO1xuICAgICAgICAgIGNoYW5nZWRUYXNrLngyID0gbmV3TW92ZVgyO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlzQ2hhbmdlZDogaXNDaGFuZ2VkLFxuICAgIGNoYW5nZWRUYXNrOiBjaGFuZ2VkVGFza1xuICB9O1xufTtcblxuZnVuY3Rpb24gaXNLZXlib2FyZEV2ZW50KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5rZXkgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUhpZGRlblRhc2tzKHRhc2tzKSB7XG4gIHZhciBncm91cGVkVGFza3MgPSB0YXNrcy5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdC5oaWRlQ2hpbGRyZW4gJiYgdC50eXBlID09PSBcInByb2plY3RcIjtcbiAgfSk7XG5cbiAgaWYgKGdyb3VwZWRUYXNrcy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoaSkge1xuICAgICAgdmFyIGdyb3VwZWRUYXNrID0gZ3JvdXBlZFRhc2tzW2ldO1xuICAgICAgdmFyIGNoaWxkcmVuID0gZ2V0Q2hpbGRyZW4odGFza3MsIGdyb3VwZWRUYXNrKTtcbiAgICAgIHRhc2tzID0gdGFza3MuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5pbmRleE9mKHQpID09PSAtMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgZ3JvdXBlZFRhc2tzLmxlbmd0aCA+IGk7IGkrKykge1xuICAgICAgX2xvb3AoaSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhc2tzO1xufVxuXG5mdW5jdGlvbiBnZXRDaGlsZHJlbih0YXNrTGlzdCwgdGFzaykge1xuICB2YXIgdGFza3MgPSBbXTtcblxuICBpZiAodGFzay50eXBlICE9PSBcInByb2plY3RcIikge1xuICAgIHRhc2tzID0gdGFza0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gdC5kZXBlbmRlbmNpZXMgJiYgdC5kZXBlbmRlbmNpZXMuaW5kZXhPZih0YXNrLmlkKSAhPT0gLTE7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGFza3MgPSB0YXNrTGlzdC5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LnByb2plY3QgJiYgdC5wcm9qZWN0ID09PSB0YXNrLmlkO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIHRhc2tDaGlsZHJlbiA9IFtdO1xuICB0YXNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgdGFza0NoaWxkcmVuLnB1c2guYXBwbHkodGFza0NoaWxkcmVuLCBnZXRDaGlsZHJlbih0YXNrTGlzdCwgdCkpO1xuICB9KTtcbiAgdGFza3MgPSB0YXNrcy5jb25jYXQodGFza3MsIHRhc2tDaGlsZHJlbik7XG4gIHJldHVybiB0YXNrcztcbn1cblxudmFyIHNvcnRUYXNrcyA9IGZ1bmN0aW9uIHNvcnRUYXNrcyh0YXNrQSwgdGFza0IpIHtcbiAgdmFyIG9yZGVyQSA9IHRhc2tBLmRpc3BsYXlPcmRlciB8fCBOdW1iZXIuTUFYX1ZBTFVFO1xuICB2YXIgb3JkZXJCID0gdGFza0IuZGlzcGxheU9yZGVyIHx8IE51bWJlci5NQVhfVkFMVUU7XG5cbiAgaWYgKG9yZGVyQSA+IG9yZGVyQikge1xuICAgIHJldHVybiAxO1xuICB9IGVsc2UgaWYgKG9yZGVyQSA8IG9yZGVyQikge1xuICAgIHJldHVybiAtMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxudmFyIHN0eWxlcyQ2ID0ge1wiYmFyV3JhcHBlclwiOlwiX0t4U1hTXCIsXCJiYXJIYW5kbGVcIjpcIl8zd181dVwiLFwiYmFyQmFja2dyb3VuZFwiOlwiXzMxRVJQXCJ9O1xuXG52YXIgQmFyRGlzcGxheSA9IGZ1bmN0aW9uIEJhckRpc3BsYXkoX3JlZikge1xuICB2YXIgeCA9IF9yZWYueCxcbiAgICAgIHkgPSBfcmVmLnksXG4gICAgICB3aWR0aCA9IF9yZWYud2lkdGgsXG4gICAgICBoZWlnaHQgPSBfcmVmLmhlaWdodCxcbiAgICAgIGlzU2VsZWN0ZWQgPSBfcmVmLmlzU2VsZWN0ZWQsXG4gICAgICBwcm9ncmVzc1ggPSBfcmVmLnByb2dyZXNzWCxcbiAgICAgIHByb2dyZXNzV2lkdGggPSBfcmVmLnByb2dyZXNzV2lkdGgsXG4gICAgICBiYXJDb3JuZXJSYWRpdXMgPSBfcmVmLmJhckNvcm5lclJhZGl1cyxcbiAgICAgIHN0eWxlcyA9IF9yZWYuc3R5bGVzLFxuICAgICAgb25Nb3VzZURvd24gPSBfcmVmLm9uTW91c2VEb3duO1xuXG4gIHZhciBnZXRQcm9jZXNzQ29sb3IgPSBmdW5jdGlvbiBnZXRQcm9jZXNzQ29sb3IoKSB7XG4gICAgcmV0dXJuIGlzU2VsZWN0ZWQgPyBzdHlsZXMucHJvZ3Jlc3NTZWxlY3RlZENvbG9yIDogc3R5bGVzLnByb2dyZXNzQ29sb3I7XG4gIH07XG5cbiAgdmFyIGdldEJhckNvbG9yID0gZnVuY3Rpb24gZ2V0QmFyQ29sb3IoKSB7XG4gICAgcmV0dXJuIGlzU2VsZWN0ZWQgPyBzdHlsZXMuYmFja2dyb3VuZFNlbGVjdGVkQ29sb3IgOiBzdHlsZXMuYmFja2dyb3VuZENvbG9yO1xuICB9O1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICB4OiB4LFxuICAgIHdpZHRoOiB3aWR0aCxcbiAgICB5OiB5LFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHJ5OiBiYXJDb3JuZXJSYWRpdXMsXG4gICAgcng6IGJhckNvcm5lclJhZGl1cyxcbiAgICBmaWxsOiBnZXRCYXJDb2xvcigpLFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJDYuYmFyQmFja2dyb3VuZFxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIHg6IHByb2dyZXNzWCxcbiAgICB3aWR0aDogcHJvZ3Jlc3NXaWR0aCxcbiAgICB5OiB5LFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHJ5OiBiYXJDb3JuZXJSYWRpdXMsXG4gICAgcng6IGJhckNvcm5lclJhZGl1cyxcbiAgICBmaWxsOiBnZXRQcm9jZXNzQ29sb3IoKVxuICB9KSk7XG59O1xuXG52YXIgQmFyRGF0ZUhhbmRsZSA9IGZ1bmN0aW9uIEJhckRhdGVIYW5kbGUoX3JlZikge1xuICB2YXIgeCA9IF9yZWYueCxcbiAgICAgIHkgPSBfcmVmLnksXG4gICAgICB3aWR0aCA9IF9yZWYud2lkdGgsXG4gICAgICBoZWlnaHQgPSBfcmVmLmhlaWdodCxcbiAgICAgIGJhckNvcm5lclJhZGl1cyA9IF9yZWYuYmFyQ29ybmVyUmFkaXVzLFxuICAgICAgb25Nb3VzZURvd24gPSBfcmVmLm9uTW91c2VEb3duO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIHg6IHgsXG4gICAgeTogeSxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNi5iYXJIYW5kbGUsXG4gICAgcnk6IGJhckNvcm5lclJhZGl1cyxcbiAgICByeDogYmFyQ29ybmVyUmFkaXVzLFxuICAgIG9uTW91c2VEb3duOiBvbk1vdXNlRG93blxuICB9KTtcbn07XG5cbnZhciBCYXJQcm9ncmVzc0hhbmRsZSA9IGZ1bmN0aW9uIEJhclByb2dyZXNzSGFuZGxlKF9yZWYpIHtcbiAgdmFyIHByb2dyZXNzUG9pbnQgPSBfcmVmLnByb2dyZXNzUG9pbnQsXG4gICAgICBvbk1vdXNlRG93biA9IF9yZWYub25Nb3VzZURvd247XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwicG9seWdvblwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNi5iYXJIYW5kbGUsXG4gICAgcG9pbnRzOiBwcm9ncmVzc1BvaW50LFxuICAgIG9uTW91c2VEb3duOiBvbk1vdXNlRG93blxuICB9KTtcbn07XG5cbnZhciBCYXIgPSBmdW5jdGlvbiBCYXIoX3JlZikge1xuICB2YXIgdGFzayA9IF9yZWYudGFzayxcbiAgICAgIGlzUHJvZ3Jlc3NDaGFuZ2VhYmxlID0gX3JlZi5pc1Byb2dyZXNzQ2hhbmdlYWJsZSxcbiAgICAgIGlzRGF0ZUNoYW5nZWFibGUgPSBfcmVmLmlzRGF0ZUNoYW5nZWFibGUsXG4gICAgICBydGwgPSBfcmVmLnJ0bCxcbiAgICAgIG9uRXZlbnRTdGFydCA9IF9yZWYub25FdmVudFN0YXJ0LFxuICAgICAgaXNTZWxlY3RlZCA9IF9yZWYuaXNTZWxlY3RlZDtcbiAgdmFyIHByb2dyZXNzUG9pbnQgPSBnZXRQcm9ncmVzc1BvaW50KCshcnRsICogdGFzay5wcm9ncmVzc1dpZHRoICsgdGFzay5wcm9ncmVzc1gsIHRhc2sueSwgdGFzay5oZWlnaHQpO1xuICB2YXIgaGFuZGxlSGVpZ2h0ID0gdGFzay5oZWlnaHQgLSAyO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzJDYuYmFyV3JhcHBlcixcbiAgICB0YWJJbmRleDogMFxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEJhckRpc3BsYXksIHtcbiAgICB4OiB0YXNrLngxLFxuICAgIHk6IHRhc2sueSxcbiAgICB3aWR0aDogdGFzay54MiAtIHRhc2sueDEsXG4gICAgaGVpZ2h0OiB0YXNrLmhlaWdodCxcbiAgICBwcm9ncmVzc1g6IHRhc2sucHJvZ3Jlc3NYLFxuICAgIHByb2dyZXNzV2lkdGg6IHRhc2sucHJvZ3Jlc3NXaWR0aCxcbiAgICBiYXJDb3JuZXJSYWRpdXM6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIHN0eWxlczogdGFzay5zdHlsZXMsXG4gICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgaXNEYXRlQ2hhbmdlYWJsZSAmJiBvbkV2ZW50U3RhcnQoXCJtb3ZlXCIsIHRhc2ssIGUpO1xuICAgIH1cbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiaGFuZGxlR3JvdXBcIlxuICB9LCBpc0RhdGVDaGFuZ2VhYmxlICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFyRGF0ZUhhbmRsZSwge1xuICAgIHg6IHRhc2sueDEgKyAxLFxuICAgIHk6IHRhc2sueSArIDEsXG4gICAgd2lkdGg6IHRhc2suaGFuZGxlV2lkdGgsXG4gICAgaGVpZ2h0OiBoYW5kbGVIZWlnaHQsXG4gICAgYmFyQ29ybmVyUmFkaXVzOiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwic3RhcnRcIiwgdGFzaywgZSk7XG4gICAgfVxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChCYXJEYXRlSGFuZGxlLCB7XG4gICAgeDogdGFzay54MiAtIHRhc2suaGFuZGxlV2lkdGggLSAxLFxuICAgIHk6IHRhc2sueSArIDEsXG4gICAgd2lkdGg6IHRhc2suaGFuZGxlV2lkdGgsXG4gICAgaGVpZ2h0OiBoYW5kbGVIZWlnaHQsXG4gICAgYmFyQ29ybmVyUmFkaXVzOiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwiZW5kXCIsIHRhc2ssIGUpO1xuICAgIH1cbiAgfSkpLCBpc1Byb2dyZXNzQ2hhbmdlYWJsZSAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KEJhclByb2dyZXNzSGFuZGxlLCB7XG4gICAgcHJvZ3Jlc3NQb2ludDogcHJvZ3Jlc3NQb2ludCxcbiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwicHJvZ3Jlc3NcIiwgdGFzaywgZSk7XG4gICAgfVxuICB9KSkpO1xufTtcblxudmFyIEJhclNtYWxsID0gZnVuY3Rpb24gQmFyU21hbGwoX3JlZikge1xuICB2YXIgdGFzayA9IF9yZWYudGFzayxcbiAgICAgIGlzUHJvZ3Jlc3NDaGFuZ2VhYmxlID0gX3JlZi5pc1Byb2dyZXNzQ2hhbmdlYWJsZSxcbiAgICAgIGlzRGF0ZUNoYW5nZWFibGUgPSBfcmVmLmlzRGF0ZUNoYW5nZWFibGUsXG4gICAgICBvbkV2ZW50U3RhcnQgPSBfcmVmLm9uRXZlbnRTdGFydCxcbiAgICAgIGlzU2VsZWN0ZWQgPSBfcmVmLmlzU2VsZWN0ZWQ7XG4gIHZhciBwcm9ncmVzc1BvaW50ID0gZ2V0UHJvZ3Jlc3NQb2ludCh0YXNrLnByb2dyZXNzV2lkdGggKyB0YXNrLngxLCB0YXNrLnksIHRhc2suaGVpZ2h0KTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ2LmJhcldyYXBwZXIsXG4gICAgdGFiSW5kZXg6IDBcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChCYXJEaXNwbGF5LCB7XG4gICAgeDogdGFzay54MSxcbiAgICB5OiB0YXNrLnksXG4gICAgd2lkdGg6IHRhc2sueDIgLSB0YXNrLngxLFxuICAgIGhlaWdodDogdGFzay5oZWlnaHQsXG4gICAgcHJvZ3Jlc3NYOiB0YXNrLnByb2dyZXNzWCxcbiAgICBwcm9ncmVzc1dpZHRoOiB0YXNrLnByb2dyZXNzV2lkdGgsXG4gICAgYmFyQ29ybmVyUmFkaXVzOiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICBzdHlsZXM6IHRhc2suc3R5bGVzLFxuICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICAgIGlzRGF0ZUNoYW5nZWFibGUgJiYgb25FdmVudFN0YXJ0KFwibW92ZVwiLCB0YXNrLCBlKTtcbiAgICB9XG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgY2xhc3NOYW1lOiBcImhhbmRsZUdyb3VwXCJcbiAgfSwgaXNQcm9ncmVzc0NoYW5nZWFibGUgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChCYXJQcm9ncmVzc0hhbmRsZSwge1xuICAgIHByb2dyZXNzUG9pbnQ6IHByb2dyZXNzUG9pbnQsXG4gICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICAgIG9uRXZlbnRTdGFydChcInByb2dyZXNzXCIsIHRhc2ssIGUpO1xuICAgIH1cbiAgfSkpKTtcbn07XG5cbnZhciBzdHlsZXMkNyA9IHtcIm1pbGVzdG9uZVdyYXBwZXJcIjpcIl9SUnIxM1wiLFwibWlsZXN0b25lQmFja2dyb3VuZFwiOlwiXzJQMkIxXCJ9O1xuXG52YXIgTWlsZXN0b25lID0gZnVuY3Rpb24gTWlsZXN0b25lKF9yZWYpIHtcbiAgdmFyIHRhc2sgPSBfcmVmLnRhc2ssXG4gICAgICBpc0RhdGVDaGFuZ2VhYmxlID0gX3JlZi5pc0RhdGVDaGFuZ2VhYmxlLFxuICAgICAgb25FdmVudFN0YXJ0ID0gX3JlZi5vbkV2ZW50U3RhcnQsXG4gICAgICBpc1NlbGVjdGVkID0gX3JlZi5pc1NlbGVjdGVkO1xuICB2YXIgdHJhbnNmb3JtID0gXCJyb3RhdGUoNDUgXCIgKyAodGFzay54MSArIHRhc2suaGVpZ2h0ICogMC4zNTYpICsgXCIgXFxuICAgIFwiICsgKHRhc2sueSArIHRhc2suaGVpZ2h0ICogMC44NSkgKyBcIilcIjtcblxuICB2YXIgZ2V0QmFyQ29sb3IgPSBmdW5jdGlvbiBnZXRCYXJDb2xvcigpIHtcbiAgICByZXR1cm4gaXNTZWxlY3RlZCA/IHRhc2suc3R5bGVzLmJhY2tncm91bmRTZWxlY3RlZENvbG9yIDogdGFzay5zdHlsZXMuYmFja2dyb3VuZENvbG9yO1xuICB9O1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgdGFiSW5kZXg6IDAsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNy5taWxlc3RvbmVXcmFwcGVyXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICBmaWxsOiBnZXRCYXJDb2xvcigpLFxuICAgIHg6IHRhc2sueDEsXG4gICAgd2lkdGg6IHRhc2suaGVpZ2h0LFxuICAgIHk6IHRhc2sueSxcbiAgICBoZWlnaHQ6IHRhc2suaGVpZ2h0LFxuICAgIHJ4OiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICByeTogdGFzay5iYXJDb3JuZXJSYWRpdXMsXG4gICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkNy5taWxlc3RvbmVCYWNrZ3JvdW5kLFxuICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7XG4gICAgICBpc0RhdGVDaGFuZ2VhYmxlICYmIG9uRXZlbnRTdGFydChcIm1vdmVcIiwgdGFzaywgZSk7XG4gICAgfVxuICB9KSk7XG59O1xuXG52YXIgc3R5bGVzJDggPSB7XCJwcm9qZWN0V3JhcHBlclwiOlwiXzFLSjZ4XCIsXCJwcm9qZWN0QmFja2dyb3VuZFwiOlwiXzJSYlZ5XCIsXCJwcm9qZWN0VG9wXCI6XCJfMnBaTUZcIn07XG5cbnZhciBQcm9qZWN0ID0gZnVuY3Rpb24gUHJvamVjdChfcmVmKSB7XG4gIHZhciB0YXNrID0gX3JlZi50YXNrLFxuICAgICAgaXNTZWxlY3RlZCA9IF9yZWYuaXNTZWxlY3RlZDtcbiAgdmFyIGJhckNvbG9yID0gaXNTZWxlY3RlZCA/IHRhc2suc3R5bGVzLmJhY2tncm91bmRTZWxlY3RlZENvbG9yIDogdGFzay5zdHlsZXMuYmFja2dyb3VuZENvbG9yO1xuICB2YXIgcHJvY2Vzc0NvbG9yID0gaXNTZWxlY3RlZCA/IHRhc2suc3R5bGVzLnByb2dyZXNzU2VsZWN0ZWRDb2xvciA6IHRhc2suc3R5bGVzLnByb2dyZXNzQ29sb3I7XG4gIHZhciBwcm9qZWN0V2l0aCA9IHRhc2sueDIgLSB0YXNrLngxO1xuICB2YXIgcHJvamVjdExlZnRUcmlhbmdsZSA9IFt0YXNrLngxLCB0YXNrLnkgKyB0YXNrLmhlaWdodCAvIDIgLSAxLCB0YXNrLngxLCB0YXNrLnkgKyB0YXNrLmhlaWdodCwgdGFzay54MSArIDE1LCB0YXNrLnkgKyB0YXNrLmhlaWdodCAvIDIgLSAxXS5qb2luKFwiLFwiKTtcbiAgdmFyIHByb2plY3RSaWdodFRyaWFuZ2xlID0gW3Rhc2sueDIsIHRhc2sueSArIHRhc2suaGVpZ2h0IC8gMiAtIDEsIHRhc2sueDIsIHRhc2sueSArIHRhc2suaGVpZ2h0LCB0YXNrLngyIC0gMTUsIHRhc2sueSArIHRhc2suaGVpZ2h0IC8gMiAtIDFdLmpvaW4oXCIsXCIpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIHRhYkluZGV4OiAwLFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJDgucHJvamVjdFdyYXBwZXJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIGZpbGw6IGJhckNvbG9yLFxuICAgIHg6IHRhc2sueDEsXG4gICAgd2lkdGg6IHByb2plY3RXaXRoLFxuICAgIHk6IHRhc2sueSxcbiAgICBoZWlnaHQ6IHRhc2suaGVpZ2h0LFxuICAgIHJ4OiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICByeTogdGFzay5iYXJDb3JuZXJSYWRpdXMsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkOC5wcm9qZWN0QmFja2dyb3VuZFxuICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInJlY3RcIiwge1xuICAgIHg6IHRhc2sucHJvZ3Jlc3NYLFxuICAgIHdpZHRoOiB0YXNrLnByb2dyZXNzV2lkdGgsXG4gICAgeTogdGFzay55LFxuICAgIGhlaWdodDogdGFzay5oZWlnaHQsXG4gICAgcnk6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIHJ4OiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICBmaWxsOiBwcm9jZXNzQ29sb3JcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIsIHtcbiAgICBmaWxsOiBiYXJDb2xvcixcbiAgICB4OiB0YXNrLngxLFxuICAgIHdpZHRoOiBwcm9qZWN0V2l0aCxcbiAgICB5OiB0YXNrLnksXG4gICAgaGVpZ2h0OiB0YXNrLmhlaWdodCAvIDIsXG4gICAgcng6IHRhc2suYmFyQ29ybmVyUmFkaXVzLFxuICAgIHJ5OiB0YXNrLmJhckNvcm5lclJhZGl1cyxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ4LnByb2plY3RUb3BcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwb2x5Z29uXCIsIHtcbiAgICBjbGFzc05hbWU6IHN0eWxlcyQ4LnByb2plY3RUb3AsXG4gICAgcG9pbnRzOiBwcm9qZWN0TGVmdFRyaWFuZ2xlLFxuICAgIGZpbGw6IGJhckNvbG9yXG4gIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicG9seWdvblwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkOC5wcm9qZWN0VG9wLFxuICAgIHBvaW50czogcHJvamVjdFJpZ2h0VHJpYW5nbGUsXG4gICAgZmlsbDogYmFyQ29sb3JcbiAgfSkpO1xufTtcblxudmFyIHN0eWxlID0ge1wiYmFyTGFiZWxcIjpcIl8zelJKUVwiLFwiYmFyTGFiZWxPdXRzaWRlXCI6XCJfM0tjYU1cIn07XG5cbnZhciBUYXNrSXRlbSA9IGZ1bmN0aW9uIFRhc2tJdGVtKHByb3BzKSB7XG4gIHZhciBfcHJvcHMgPSBfZXh0ZW5kcyh7fSwgcHJvcHMpLFxuICAgICAgdGFzayA9IF9wcm9wcy50YXNrLFxuICAgICAgYXJyb3dJbmRlbnQgPSBfcHJvcHMuYXJyb3dJbmRlbnQsXG4gICAgICBpc0RlbGV0ZSA9IF9wcm9wcy5pc0RlbGV0ZSxcbiAgICAgIHRhc2tIZWlnaHQgPSBfcHJvcHMudGFza0hlaWdodCxcbiAgICAgIGlzU2VsZWN0ZWQgPSBfcHJvcHMuaXNTZWxlY3RlZCxcbiAgICAgIHJ0bCA9IF9wcm9wcy5ydGwsXG4gICAgICBvbkV2ZW50U3RhcnQgPSBfcHJvcHMub25FdmVudFN0YXJ0O1xuXG4gIHZhciB0ZXh0UmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwpKSxcbiAgICAgIHRhc2tJdGVtID0gX3VzZVN0YXRlWzBdLFxuICAgICAgc2V0VGFza0l0ZW0gPSBfdXNlU3RhdGVbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTIgPSB1c2VTdGF0ZSh0cnVlKSxcbiAgICAgIGlzVGV4dEluc2lkZSA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRJc1RleHRJbnNpZGUgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgc3dpdGNoICh0YXNrLnR5cGVJbnRlcm5hbCkge1xuICAgICAgY2FzZSBcIm1pbGVzdG9uZVwiOlxuICAgICAgICBzZXRUYXNrSXRlbShSZWFjdC5jcmVhdGVFbGVtZW50KE1pbGVzdG9uZSwgT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMpKSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwicHJvamVjdFwiOlxuICAgICAgICBzZXRUYXNrSXRlbShSZWFjdC5jcmVhdGVFbGVtZW50KFByb2plY3QsIE9iamVjdC5hc3NpZ24oe30sIHByb3BzKSkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcInNtYWxsdGFza1wiOlxuICAgICAgICBzZXRUYXNrSXRlbShSZWFjdC5jcmVhdGVFbGVtZW50KEJhclNtYWxsLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcykpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNldFRhc2tJdGVtKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFyLCBPYmplY3QuYXNzaWduKHt9LCBwcm9wcykpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LCBbdGFzaywgaXNTZWxlY3RlZF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICh0ZXh0UmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldElzVGV4dEluc2lkZSh0ZXh0UmVmLmN1cnJlbnQuZ2V0QkJveCgpLndpZHRoIDwgdGFzay54MiAtIHRhc2sueDEpO1xuICAgIH1cbiAgfSwgW3RleHRSZWYsIHRhc2tdKTtcblxuICB2YXIgZ2V0WCA9IGZ1bmN0aW9uIGdldFgoKSB7XG4gICAgdmFyIHdpZHRoID0gdGFzay54MiAtIHRhc2sueDE7XG4gICAgdmFyIGhhc0NoaWxkID0gdGFzay5iYXJDaGlsZHJlbi5sZW5ndGggPiAwO1xuXG4gICAgaWYgKGlzVGV4dEluc2lkZSkge1xuICAgICAgcmV0dXJuIHRhc2sueDEgKyB3aWR0aCAqIDAuNTtcbiAgICB9XG5cbiAgICBpZiAocnRsICYmIHRleHRSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuIHRhc2sueDEgLSB0ZXh0UmVmLmN1cnJlbnQuZ2V0QkJveCgpLndpZHRoIC0gYXJyb3dJbmRlbnQgKiAraGFzQ2hpbGQgLSBhcnJvd0luZGVudCAqIDAuMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRhc2sueDEgKyB3aWR0aCArIGFycm93SW5kZW50ICogK2hhc0NoaWxkICsgYXJyb3dJbmRlbnQgKiAwLjI7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7XG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlIFwiRGVsZXRlXCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgaWYgKGlzRGVsZXRlKSBvbkV2ZW50U3RhcnQoXCJkZWxldGVcIiwgdGFzaywgZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSxcbiAgICBvbk1vdXNlRW50ZXI6IGZ1bmN0aW9uIG9uTW91c2VFbnRlcihlKSB7XG4gICAgICBvbkV2ZW50U3RhcnQoXCJtb3VzZWVudGVyXCIsIHRhc2ssIGUpO1xuICAgIH0sXG4gICAgb25Nb3VzZUxlYXZlOiBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwibW91c2VsZWF2ZVwiLCB0YXNrLCBlKTtcbiAgICB9LFxuICAgIG9uRG91YmxlQ2xpY2s6IGZ1bmN0aW9uIG9uRG91YmxlQ2xpY2soZSkge1xuICAgICAgb25FdmVudFN0YXJ0KFwiZGJsY2xpY2tcIiwgdGFzaywgZSk7XG4gICAgfSxcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgIG9uRXZlbnRTdGFydChcImNsaWNrXCIsIHRhc2ssIGUpO1xuICAgIH0sXG4gICAgb25Gb2N1czogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgIG9uRXZlbnRTdGFydChcInNlbGVjdFwiLCB0YXNrKTtcbiAgICB9XG4gIH0sIHRhc2tJdGVtLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dFwiLCB7XG4gICAgeDogZ2V0WCgpLFxuICAgIHk6IHRhc2sueSArIHRhc2tIZWlnaHQgKiAwLjUsXG4gICAgY2xhc3NOYW1lOiBpc1RleHRJbnNpZGUgPyBzdHlsZS5iYXJMYWJlbCA6ICBzdHlsZS5iYXJMYWJlbE91dHNpZGUsXG4gICAgcmVmOiB0ZXh0UmVmXG4gIH0sIHRhc2submFtZSkpO1xufTtcblxudmFyIFRhc2tHYW50dENvbnRlbnQgPSBmdW5jdGlvbiBUYXNrR2FudHRDb250ZW50KF9yZWYpIHtcbiAgdmFyIF9zdmckY3VycmVudDtcblxuICB2YXIgdGFza3MgPSBfcmVmLnRhc2tzLFxuICAgICAgZGF0ZXMgPSBfcmVmLmRhdGVzLFxuICAgICAgZ2FudHRFdmVudCA9IF9yZWYuZ2FudHRFdmVudCxcbiAgICAgIHNlbGVjdGVkVGFzayA9IF9yZWYuc2VsZWN0ZWRUYXNrLFxuICAgICAgcm93SGVpZ2h0ID0gX3JlZi5yb3dIZWlnaHQsXG4gICAgICBjb2x1bW5XaWR0aCA9IF9yZWYuY29sdW1uV2lkdGgsXG4gICAgICB0aW1lU3RlcCA9IF9yZWYudGltZVN0ZXAsXG4gICAgICBzdmcgPSBfcmVmLnN2ZyxcbiAgICAgIHRhc2tIZWlnaHQgPSBfcmVmLnRhc2tIZWlnaHQsXG4gICAgICBhcnJvd0NvbG9yID0gX3JlZi5hcnJvd0NvbG9yLFxuICAgICAgYXJyb3dJbmRlbnQgPSBfcmVmLmFycm93SW5kZW50LFxuICAgICAgZm9udEZhbWlseSA9IF9yZWYuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplID0gX3JlZi5mb250U2l6ZSxcbiAgICAgIHJ0bCA9IF9yZWYucnRsLFxuICAgICAgc2V0R2FudHRFdmVudCA9IF9yZWYuc2V0R2FudHRFdmVudCxcbiAgICAgIHNldEZhaWxlZFRhc2sgPSBfcmVmLnNldEZhaWxlZFRhc2ssXG4gICAgICBzZXRTZWxlY3RlZFRhc2sgPSBfcmVmLnNldFNlbGVjdGVkVGFzayxcbiAgICAgIG9uRGF0ZUNoYW5nZSA9IF9yZWYub25EYXRlQ2hhbmdlLFxuICAgICAgb25Qcm9ncmVzc0NoYW5nZSA9IF9yZWYub25Qcm9ncmVzc0NoYW5nZSxcbiAgICAgIG9uRG91YmxlQ2xpY2sgPSBfcmVmLm9uRG91YmxlQ2xpY2ssXG4gICAgICBvbkNsaWNrID0gX3JlZi5vbkNsaWNrLFxuICAgICAgb25EZWxldGUgPSBfcmVmLm9uRGVsZXRlO1xuICB2YXIgcG9pbnQgPSBzdmcgPT09IG51bGwgfHwgc3ZnID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3N2ZyRjdXJyZW50ID0gc3ZnLmN1cnJlbnQpID09PSBudWxsIHx8IF9zdmckY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N2ZyRjdXJyZW50LmNyZWF0ZVNWR1BvaW50KCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKDApLFxuICAgICAgeFN0ZXAgPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXRYU3RlcCA9IF91c2VTdGF0ZVsxXTtcblxuICB2YXIgX3VzZVN0YXRlMiA9IHVzZVN0YXRlKDApLFxuICAgICAgaW5pdEV2ZW50WDFEZWx0YSA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRJbml0RXZlbnRYMURlbHRhID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIGlzTW92aW5nID0gX3VzZVN0YXRlM1swXSxcbiAgICAgIHNldElzTW92aW5nID0gX3VzZVN0YXRlM1sxXTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRlRGVsdGEgPSBkYXRlc1sxXS5nZXRUaW1lKCkgLSBkYXRlc1swXS5nZXRUaW1lKCkgLSBkYXRlc1sxXS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwICsgZGF0ZXNbMF0uZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwICogMTAwMDtcbiAgICB2YXIgbmV3WFN0ZXAgPSB0aW1lU3RlcCAqIGNvbHVtbldpZHRoIC8gZGF0ZURlbHRhO1xuICAgIHNldFhTdGVwKG5ld1hTdGVwKTtcbiAgfSwgW2NvbHVtbldpZHRoLCBkYXRlcywgdGltZVN0ZXBdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgX3N2ZyRjdXJyZW50JGdldFNjcmVlO1xuXG4gICAgICAgIGlmICghZ2FudHRFdmVudC5jaGFuZ2VkVGFzayB8fCAhcG9pbnQgfHwgIShzdmcgIT09IG51bGwgJiYgc3ZnICE9PSB2b2lkIDAgJiYgc3ZnLmN1cnJlbnQpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHBvaW50LnggPSBldmVudC5jbGllbnRYO1xuICAgICAgICB2YXIgY3Vyc29yID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKHN2ZyA9PT0gbnVsbCB8fCBzdmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUgPSBzdmcuY3VycmVudC5nZXRTY3JlZW5DVE0oKSkgPT09IG51bGwgfHwgX3N2ZyRjdXJyZW50JGdldFNjcmVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUuaW52ZXJzZSgpKTtcblxuICAgICAgICB2YXIgX2hhbmRsZVRhc2tCeVNWR01vdXNlID0gaGFuZGxlVGFza0J5U1ZHTW91c2VFdmVudChjdXJzb3IueCwgZ2FudHRFdmVudC5hY3Rpb24sIGdhbnR0RXZlbnQuY2hhbmdlZFRhc2ssIHhTdGVwLCB0aW1lU3RlcCwgaW5pdEV2ZW50WDFEZWx0YSwgcnRsKSxcbiAgICAgICAgICAgIGlzQ2hhbmdlZCA9IF9oYW5kbGVUYXNrQnlTVkdNb3VzZS5pc0NoYW5nZWQsXG4gICAgICAgICAgICBjaGFuZ2VkVGFzayA9IF9oYW5kbGVUYXNrQnlTVkdNb3VzZS5jaGFuZ2VkVGFzaztcblxuICAgICAgICBpZiAoaXNDaGFuZ2VkKSB7XG4gICAgICAgICAgc2V0R2FudHRFdmVudCh7XG4gICAgICAgICAgICBhY3Rpb246IGdhbnR0RXZlbnQuYWN0aW9uLFxuICAgICAgICAgICAgY2hhbmdlZFRhc2s6IGNoYW5nZWRUYXNrXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGhhbmRsZU1vdXNlVXAgPSBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGV2ZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgX3N2ZyRjdXJyZW50JGdldFNjcmVlMjtcblxuICAgICAgICB2YXIgX3RlbXA2ID0gZnVuY3Rpb24gX3RlbXA2KCkge1xuICAgICAgICAgIGlmICghb3BlcmF0aW9uU3VjY2Vzcykge1xuICAgICAgICAgICAgc2V0RmFpbGVkVGFzayhvcmlnaW5hbFNlbGVjdGVkVGFzayk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBhY3Rpb24gPSBnYW50dEV2ZW50LmFjdGlvbixcbiAgICAgICAgICAgIG9yaWdpbmFsU2VsZWN0ZWRUYXNrID0gZ2FudHRFdmVudC5vcmlnaW5hbFNlbGVjdGVkVGFzayxcbiAgICAgICAgICAgIGNoYW5nZWRUYXNrID0gZ2FudHRFdmVudC5jaGFuZ2VkVGFzaztcbiAgICAgICAgaWYgKCFjaGFuZ2VkVGFzayB8fCAhcG9pbnQgfHwgIShzdmcgIT09IG51bGwgJiYgc3ZnICE9PSB2b2lkIDAgJiYgc3ZnLmN1cnJlbnQpIHx8ICFvcmlnaW5hbFNlbGVjdGVkVGFzaykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwb2ludC54ID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgdmFyIGN1cnNvciA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybShzdmcgPT09IG51bGwgfHwgc3ZnID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3N2ZyRjdXJyZW50JGdldFNjcmVlMiA9IHN2Zy5jdXJyZW50LmdldFNjcmVlbkNUTSgpKSA9PT0gbnVsbCB8fCBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUyLmludmVyc2UoKSk7XG5cbiAgICAgICAgdmFyIF9oYW5kbGVUYXNrQnlTVkdNb3VzZTIgPSBoYW5kbGVUYXNrQnlTVkdNb3VzZUV2ZW50KGN1cnNvci54LCBhY3Rpb24sIGNoYW5nZWRUYXNrLCB4U3RlcCwgdGltZVN0ZXAsIGluaXRFdmVudFgxRGVsdGEsIHJ0bCksXG4gICAgICAgICAgICBuZXdDaGFuZ2VkVGFzayA9IF9oYW5kbGVUYXNrQnlTVkdNb3VzZTIuY2hhbmdlZFRhc2s7XG5cbiAgICAgICAgdmFyIGlzTm90TGlrZU9yaWdpbmFsID0gb3JpZ2luYWxTZWxlY3RlZFRhc2suc3RhcnQgIT09IG5ld0NoYW5nZWRUYXNrLnN0YXJ0IHx8IG9yaWdpbmFsU2VsZWN0ZWRUYXNrLmVuZCAhPT0gbmV3Q2hhbmdlZFRhc2suZW5kIHx8IG9yaWdpbmFsU2VsZWN0ZWRUYXNrLnByb2dyZXNzICE9PSBuZXdDaGFuZ2VkVGFzay5wcm9ncmVzcztcbiAgICAgICAgc3ZnLmN1cnJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgICBzdmcuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBoYW5kbGVNb3VzZVVwKTtcbiAgICAgICAgc2V0R2FudHRFdmVudCh7XG4gICAgICAgICAgYWN0aW9uOiBcIlwiXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRJc01vdmluZyhmYWxzZSk7XG4gICAgICAgIHZhciBvcGVyYXRpb25TdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICB2YXIgX3RlbXA3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICgoYWN0aW9uID09PSBcIm1vdmVcIiB8fCBhY3Rpb24gPT09IFwiZW5kXCIgfHwgYWN0aW9uID09PSBcInN0YXJ0XCIpICYmIG9uRGF0ZUNoYW5nZSAmJiBpc05vdExpa2VPcmlnaW5hbCkge1xuICAgICAgICAgICAgdmFyIF90ZW1wOCA9IF9jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob25EYXRlQ2hhbmdlKG5ld0NoYW5nZWRUYXNrLCBuZXdDaGFuZ2VkVGFzay5iYXJDaGlsZHJlbikpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uU3VjY2VzcyA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBvcGVyYXRpb25TdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKF90ZW1wOCAmJiBfdGVtcDgudGhlbikgcmV0dXJuIF90ZW1wOC50aGVuKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIF90ZW1wOSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3NDaGFuZ2UgJiYgaXNOb3RMaWtlT3JpZ2luYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RlbXAxMCA9IF9jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9uUHJvZ3Jlc3NDaGFuZ2UobmV3Q2hhbmdlZFRhc2ssIG5ld0NoYW5nZWRUYXNrLmJhckNoaWxkcmVuKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChfdGVtcDEwICYmIF90ZW1wMTAudGhlbikgcmV0dXJuIF90ZW1wMTAudGhlbihmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0oKTtcblxuICAgICAgICAgICAgaWYgKF90ZW1wOSAmJiBfdGVtcDkudGhlbikgcmV0dXJuIF90ZW1wOS50aGVuKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKF90ZW1wNyAmJiBfdGVtcDcudGhlbiA/IF90ZW1wNy50aGVuKF90ZW1wNikgOiBfdGVtcDYoX3RlbXA3KSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFpc01vdmluZyAmJiAoZ2FudHRFdmVudC5hY3Rpb24gPT09IFwibW92ZVwiIHx8IGdhbnR0RXZlbnQuYWN0aW9uID09PSBcImVuZFwiIHx8IGdhbnR0RXZlbnQuYWN0aW9uID09PSBcInN0YXJ0XCIgfHwgZ2FudHRFdmVudC5hY3Rpb24gPT09IFwicHJvZ3Jlc3NcIikgJiYgc3ZnICE9PSBudWxsICYmIHN2ZyAhPT0gdm9pZCAwICYmIHN2Zy5jdXJyZW50KSB7XG4gICAgICBzdmcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZU1vdXNlTW92ZSk7XG4gICAgICBzdmcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBoYW5kbGVNb3VzZVVwKTtcbiAgICAgIHNldElzTW92aW5nKHRydWUpO1xuICAgIH1cbiAgfSwgW2dhbnR0RXZlbnQsIHhTdGVwLCBpbml0RXZlbnRYMURlbHRhLCBvblByb2dyZXNzQ2hhbmdlLCB0aW1lU3RlcCwgb25EYXRlQ2hhbmdlLCBzdmcsIGlzTW92aW5nLCBwb2ludCwgcnRsLCBzZXRGYWlsZWRUYXNrLCBzZXRHYW50dEV2ZW50XSk7XG5cbiAgdmFyIGhhbmRsZUJhckV2ZW50U3RhcnQgPSBmdW5jdGlvbiBoYW5kbGVCYXJFdmVudFN0YXJ0KGFjdGlvbiwgdGFzaywgZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICBpZiAoYWN0aW9uID09PSBcInNlbGVjdFwiKSB7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZFRhc2sodGFzay5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoaXNLZXlib2FyZEV2ZW50KGV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIF90ZW1wMTQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RlbXAxNSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChvbkRlbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RlbXAxNiA9IF9jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShvbkRlbGV0ZSh0YXNrKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEdhbnR0RXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWRUYXNrOiB0YXNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb24gRGVsZXRlLiBcIiArIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90ZW1wMTYgJiYgX3RlbXAxNi50aGVuKSByZXR1cm4gX3RlbXAxNi50aGVuKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoX3RlbXAxNSAmJiBfdGVtcDE1LnRoZW4pIHJldHVybiBfdGVtcDE1LnRoZW4oZnVuY3Rpb24gKCkge30pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KCk7XG5cbiAgICAgICAgICAgIGlmIChfdGVtcDE0ICYmIF90ZW1wMTQudGhlbikgcmV0dXJuIF90ZW1wMTQudGhlbihmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwibW91c2VlbnRlclwiKSB7XG4gICAgICAgICAgICBpZiAoIWdhbnR0RXZlbnQuYWN0aW9uKSB7XG4gICAgICAgICAgICAgIHNldEdhbnR0RXZlbnQoe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgICAgIGNoYW5nZWRUYXNrOiB0YXNrLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsU2VsZWN0ZWRUYXNrOiB0YXNrXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcIm1vdXNlbGVhdmVcIikge1xuICAgICAgICAgICAgaWYgKGdhbnR0RXZlbnQuYWN0aW9uID09PSBcIm1vdXNlZW50ZXJcIikge1xuICAgICAgICAgICAgICBzZXRHYW50dEV2ZW50KHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFwiXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGJsY2xpY2tcIikge1xuICAgICAgICAgICAgISFvbkRvdWJsZUNsaWNrICYmIG9uRG91YmxlQ2xpY2sodGFzayk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwiY2xpY2tcIikge1xuICAgICAgICAgICAgISFvbkNsaWNrICYmIG9uQ2xpY2sodGFzayk7XG4gICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwibW92ZVwiKSB7XG4gICAgICAgICAgICB2YXIgX3N2ZyRjdXJyZW50JGdldFNjcmVlMztcblxuICAgICAgICAgICAgaWYgKCEoc3ZnICE9PSBudWxsICYmIHN2ZyAhPT0gdm9pZCAwICYmIHN2Zy5jdXJyZW50KSB8fCAhcG9pbnQpIHJldHVybjtcbiAgICAgICAgICAgIHBvaW50LnggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgICAgdmFyIGN1cnNvciA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybSgoX3N2ZyRjdXJyZW50JGdldFNjcmVlMyA9IHN2Zy5jdXJyZW50LmdldFNjcmVlbkNUTSgpKSA9PT0gbnVsbCB8fCBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZnJGN1cnJlbnQkZ2V0U2NyZWUzLmludmVyc2UoKSk7XG4gICAgICAgICAgICBzZXRJbml0RXZlbnRYMURlbHRhKGN1cnNvci54IC0gdGFzay54MSk7XG4gICAgICAgICAgICBzZXRHYW50dEV2ZW50KHtcbiAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICAgIGNoYW5nZWRUYXNrOiB0YXNrLFxuICAgICAgICAgICAgICBvcmlnaW5hbFNlbGVjdGVkVGFzazogdGFza1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEdhbnR0RXZlbnQoe1xuICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgICAgY2hhbmdlZFRhc2s6IHRhc2ssXG4gICAgICAgICAgICAgIG9yaWdpbmFsU2VsZWN0ZWRUYXNrOiB0YXNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oKTtcbiAgICAgIH0oKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjb250ZW50XCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJhcnJvd3NcIixcbiAgICBmaWxsOiBhcnJvd0NvbG9yLFxuICAgIHN0cm9rZTogYXJyb3dDb2xvclxuICB9LCB0YXNrcy5tYXAoZnVuY3Rpb24gKHRhc2spIHtcbiAgICByZXR1cm4gdGFzay5iYXJDaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChBcnJvdywge1xuICAgICAgICBrZXk6IFwiQXJyb3cgZnJvbSBcIiArIHRhc2suaWQgKyBcIiB0byBcIiArIHRhc2tzW2NoaWxkLmluZGV4XS5pZCxcbiAgICAgICAgdGFza0Zyb206IHRhc2ssXG4gICAgICAgIHRhc2tUbzogdGFza3NbY2hpbGQuaW5kZXhdLFxuICAgICAgICByb3dIZWlnaHQ6IHJvd0hlaWdodCxcbiAgICAgICAgdGFza0hlaWdodDogdGFza0hlaWdodCxcbiAgICAgICAgYXJyb3dJbmRlbnQ6IGFycm93SW5kZW50LFxuICAgICAgICBydGw6IHJ0bFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcImdcIiwge1xuICAgIGNsYXNzTmFtZTogXCJiYXJcIixcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZVxuICB9LCB0YXNrcy5tYXAoZnVuY3Rpb24gKHRhc2spIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChUYXNrSXRlbSwge1xuICAgICAgdGFzazogdGFzayxcbiAgICAgIGFycm93SW5kZW50OiBhcnJvd0luZGVudCxcbiAgICAgIHRhc2tIZWlnaHQ6IHRhc2tIZWlnaHQsXG4gICAgICBpc1Byb2dyZXNzQ2hhbmdlYWJsZTogISFvblByb2dyZXNzQ2hhbmdlICYmICF0YXNrLmlzRGlzYWJsZWQsXG4gICAgICBpc0RhdGVDaGFuZ2VhYmxlOiAhIW9uRGF0ZUNoYW5nZSAmJiAhdGFzay5pc0Rpc2FibGVkLFxuICAgICAgaXNEZWxldGU6ICF0YXNrLmlzRGlzYWJsZWQsXG4gICAgICBvbkV2ZW50U3RhcnQ6IGhhbmRsZUJhckV2ZW50U3RhcnQsXG4gICAgICBrZXk6IHRhc2suaWQsXG4gICAgICBpc1NlbGVjdGVkOiAhIXNlbGVjdGVkVGFzayAmJiB0YXNrLmlkID09PSBzZWxlY3RlZFRhc2suaWQsXG4gICAgICBydGw6IHJ0bFxuICAgIH0pO1xuICB9KSkpO1xufTtcblxudmFyIHN0eWxlcyQ5ID0ge1wiZ2FudHRWZXJ0aWNhbENvbnRhaW5lclwiOlwiX0NaanVEXCIsXCJob3Jpem9udGFsQ29udGFpbmVyXCI6XCJfMkIyenZcIixcIndyYXBwZXJcIjpcIl8zZVVMZlwifTtcblxudmFyIFRhc2tHYW50dCA9IGZ1bmN0aW9uIFRhc2tHYW50dChfcmVmKSB7XG4gIHZhciBncmlkUHJvcHMgPSBfcmVmLmdyaWRQcm9wcyxcbiAgICAgIGNhbGVuZGFyUHJvcHMgPSBfcmVmLmNhbGVuZGFyUHJvcHMsXG4gICAgICBiYXJQcm9wcyA9IF9yZWYuYmFyUHJvcHMsXG4gICAgICBnYW50dEhlaWdodCA9IF9yZWYuZ2FudHRIZWlnaHQsXG4gICAgICBzY3JvbGxZID0gX3JlZi5zY3JvbGxZLFxuICAgICAgc2Nyb2xsWCA9IF9yZWYuc2Nyb2xsWDtcbiAgdmFyIGdhbnR0U1ZHUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgaG9yaXpvbnRhbENvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIHZlcnRpY2FsR2FudHRDb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgdmFyIG5ld0JhclByb3BzID0gX2V4dGVuZHMoe30sIGJhclByb3BzLCB7XG4gICAgc3ZnOiBnYW50dFNWR1JlZlxuICB9KTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChob3Jpem9udGFsQ29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGhvcml6b250YWxDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSBzY3JvbGxZO1xuICAgIH1cbiAgfSwgW3Njcm9sbFldKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodmVydGljYWxHYW50dENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICB2ZXJ0aWNhbEdhbnR0Q29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbFg7XG4gICAgfVxuICB9LCBbc2Nyb2xsWF0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkOS5nYW50dFZlcnRpY2FsQ29udGFpbmVyLFxuICAgIHJlZjogdmVydGljYWxHYW50dENvbnRhaW5lclJlZixcbiAgICBkaXI6IFwibHRyXCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7XG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICB3aWR0aDogZ3JpZFByb3BzLnN2Z1dpZHRoLFxuICAgIGhlaWdodDogY2FsZW5kYXJQcm9wcy5oZWFkZXJIZWlnaHQsXG4gICAgZm9udEZhbWlseTogYmFyUHJvcHMuZm9udEZhbWlseVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KENhbGVuZGFyLCBPYmplY3QuYXNzaWduKHt9LCBjYWxlbmRhclByb3BzKSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICByZWY6IGhvcml6b250YWxDb250YWluZXJSZWYsXG4gICAgY2xhc3NOYW1lOiBzdHlsZXMkOS5ob3Jpem9udGFsQ29udGFpbmVyLFxuICAgIHN0eWxlOiBnYW50dEhlaWdodCA/IHtcbiAgICAgIGhlaWdodDogZ2FudHRIZWlnaHQsXG4gICAgICB3aWR0aDogZ3JpZFByb3BzLnN2Z1dpZHRoXG4gICAgfSA6IHtcbiAgICAgIHdpZHRoOiBncmlkUHJvcHMuc3ZnV2lkdGhcbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwge1xuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgd2lkdGg6IGdyaWRQcm9wcy5zdmdXaWR0aCxcbiAgICBoZWlnaHQ6IGJhclByb3BzLnJvd0hlaWdodCAqIGJhclByb3BzLnRhc2tzLmxlbmd0aCxcbiAgICBmb250RmFtaWx5OiBiYXJQcm9wcy5mb250RmFtaWx5LFxuICAgIHJlZjogZ2FudHRTVkdSZWZcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChHcmlkLCBPYmplY3QuYXNzaWduKHt9LCBncmlkUHJvcHMpKSwgUmVhY3QuY3JlYXRlRWxlbWVudChUYXNrR2FudHRDb250ZW50LCBPYmplY3QuYXNzaWduKHt9LCBuZXdCYXJQcm9wcykpKSkpO1xufTtcblxudmFyIHN0eWxlcyRhID0ge1wic2Nyb2xsV3JhcHBlclwiOlwiXzJrOVlzXCIsXCJzY3JvbGxcIjpcIl8xOWpnV1wifTtcblxudmFyIEhvcml6b250YWxTY3JvbGwgPSBmdW5jdGlvbiBIb3Jpem9udGFsU2Nyb2xsKF9yZWYpIHtcbiAgdmFyIHNjcm9sbCA9IF9yZWYuc2Nyb2xsLFxuICAgICAgc3ZnV2lkdGggPSBfcmVmLnN2Z1dpZHRoLFxuICAgICAgdGFza0xpc3RXaWR0aCA9IF9yZWYudGFza0xpc3RXaWR0aCxcbiAgICAgIHJ0bCA9IF9yZWYucnRsLFxuICAgICAgb25TY3JvbGwgPSBfcmVmLm9uU2Nyb2xsO1xuICB2YXIgc2Nyb2xsUmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChzY3JvbGxSZWYuY3VycmVudCkge1xuICAgICAgc2Nyb2xsUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbDtcbiAgICB9XG4gIH0sIFtzY3JvbGxdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGRpcjogXCJsdHJcIixcbiAgICBzdHlsZToge1xuICAgICAgbWFyZ2luOiBydGwgPyBcIjBweCBcIiArIHRhc2tMaXN0V2lkdGggKyBcInB4IDBweCAwcHhcIiA6IFwiMHB4IDBweCAwcHggXCIgKyB0YXNrTGlzdFdpZHRoICsgXCJweFwiXG4gICAgfSxcbiAgICBjbGFzc05hbWU6IHN0eWxlcyRhLnNjcm9sbFdyYXBwZXIsXG4gICAgb25TY3JvbGw6IG9uU2Nyb2xsLFxuICAgIHJlZjogc2Nyb2xsUmVmXG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlOiB7XG4gICAgICB3aWR0aDogc3ZnV2lkdGhcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogc3R5bGVzJGEuc2Nyb2xsXG4gIH0pKTtcbn07XG5cbnZhciBHYW50dCA9IGZ1bmN0aW9uIEdhbnR0KF9yZWYpIHtcbiAgdmFyIHRhc2tzID0gX3JlZi50YXNrcyxcbiAgICAgIF9yZWYkaGVhZGVySGVpZ2h0ID0gX3JlZi5oZWFkZXJIZWlnaHQsXG4gICAgICBoZWFkZXJIZWlnaHQgPSBfcmVmJGhlYWRlckhlaWdodCA9PT0gdm9pZCAwID8gNTAgOiBfcmVmJGhlYWRlckhlaWdodCxcbiAgICAgIF9yZWYkY29sdW1uV2lkdGggPSBfcmVmLmNvbHVtbldpZHRoLFxuICAgICAgY29sdW1uV2lkdGggPSBfcmVmJGNvbHVtbldpZHRoID09PSB2b2lkIDAgPyA2MCA6IF9yZWYkY29sdW1uV2lkdGgsXG4gICAgICBfcmVmJGxpc3RDZWxsV2lkdGggPSBfcmVmLmxpc3RDZWxsV2lkdGgsXG4gICAgICBsaXN0Q2VsbFdpZHRoID0gX3JlZiRsaXN0Q2VsbFdpZHRoID09PSB2b2lkIDAgPyBcIjE1NXB4XCIgOiBfcmVmJGxpc3RDZWxsV2lkdGgsXG4gICAgICBfcmVmJHJvd0hlaWdodCA9IF9yZWYucm93SGVpZ2h0LFxuICAgICAgcm93SGVpZ2h0ID0gX3JlZiRyb3dIZWlnaHQgPT09IHZvaWQgMCA/IDUwIDogX3JlZiRyb3dIZWlnaHQsXG4gICAgICBfcmVmJGdhbnR0SGVpZ2h0ID0gX3JlZi5nYW50dEhlaWdodCxcbiAgICAgIGdhbnR0SGVpZ2h0ID0gX3JlZiRnYW50dEhlaWdodCA9PT0gdm9pZCAwID8gMCA6IF9yZWYkZ2FudHRIZWlnaHQsXG4gICAgICBfcmVmJHZpZXdNb2RlID0gX3JlZi52aWV3TW9kZSxcbiAgICAgIHZpZXdNb2RlID0gX3JlZiR2aWV3TW9kZSA9PT0gdm9pZCAwID8gVmlld01vZGUuRGF5IDogX3JlZiR2aWV3TW9kZSxcbiAgICAgIF9yZWYkcHJlU3RlcHNDb3VudCA9IF9yZWYucHJlU3RlcHNDb3VudCxcbiAgICAgIHByZVN0ZXBzQ291bnQgPSBfcmVmJHByZVN0ZXBzQ291bnQgPT09IHZvaWQgMCA/IDEgOiBfcmVmJHByZVN0ZXBzQ291bnQsXG4gICAgICBfcmVmJGxvY2FsZSA9IF9yZWYubG9jYWxlLFxuICAgICAgbG9jYWxlID0gX3JlZiRsb2NhbGUgPT09IHZvaWQgMCA/IFwiZW4tR0JcIiA6IF9yZWYkbG9jYWxlLFxuICAgICAgX3JlZiRiYXJGaWxsID0gX3JlZi5iYXJGaWxsLFxuICAgICAgYmFyRmlsbCA9IF9yZWYkYmFyRmlsbCA9PT0gdm9pZCAwID8gNjAgOiBfcmVmJGJhckZpbGwsXG4gICAgICBfcmVmJGJhckNvcm5lclJhZGl1cyA9IF9yZWYuYmFyQ29ybmVyUmFkaXVzLFxuICAgICAgYmFyQ29ybmVyUmFkaXVzID0gX3JlZiRiYXJDb3JuZXJSYWRpdXMgPT09IHZvaWQgMCA/IDMgOiBfcmVmJGJhckNvcm5lclJhZGl1cyxcbiAgICAgIF9yZWYkYmFyUHJvZ3Jlc3NDb2xvciA9IF9yZWYuYmFyUHJvZ3Jlc3NDb2xvcixcbiAgICAgIGJhclByb2dyZXNzQ29sb3IgPSBfcmVmJGJhclByb2dyZXNzQ29sb3IgPT09IHZvaWQgMCA/IFwiI2EzYTNmZlwiIDogX3JlZiRiYXJQcm9ncmVzc0NvbG9yLFxuICAgICAgX3JlZiRiYXJQcm9ncmVzc1NlbGVjID0gX3JlZi5iYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IsXG4gICAgICBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IgPSBfcmVmJGJhclByb2dyZXNzU2VsZWMgPT09IHZvaWQgMCA/IFwiIzgyODJmNVwiIDogX3JlZiRiYXJQcm9ncmVzc1NlbGVjLFxuICAgICAgX3JlZiRiYXJCYWNrZ3JvdW5kQ29sID0gX3JlZi5iYXJCYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBiYXJCYWNrZ3JvdW5kQ29sb3IgPSBfcmVmJGJhckJhY2tncm91bmRDb2wgPT09IHZvaWQgMCA/IFwiI2I4YzJjY1wiIDogX3JlZiRiYXJCYWNrZ3JvdW5kQ29sLFxuICAgICAgX3JlZiRiYXJCYWNrZ3JvdW5kU2VsID0gX3JlZi5iYXJCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcixcbiAgICAgIGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yID0gX3JlZiRiYXJCYWNrZ3JvdW5kU2VsID09PSB2b2lkIDAgPyBcIiNhZWI4YzJcIiA6IF9yZWYkYmFyQmFja2dyb3VuZFNlbCxcbiAgICAgIF9yZWYkcHJvamVjdFByb2dyZXNzQyA9IF9yZWYucHJvamVjdFByb2dyZXNzQ29sb3IsXG4gICAgICBwcm9qZWN0UHJvZ3Jlc3NDb2xvciA9IF9yZWYkcHJvamVjdFByb2dyZXNzQyA9PT0gdm9pZCAwID8gXCIjN2RiNTlhXCIgOiBfcmVmJHByb2plY3RQcm9ncmVzc0MsXG4gICAgICBfcmVmJHByb2plY3RQcm9ncmVzc1MgPSBfcmVmLnByb2plY3RQcm9ncmVzc1NlbGVjdGVkQ29sb3IsXG4gICAgICBwcm9qZWN0UHJvZ3Jlc3NTZWxlY3RlZENvbG9yID0gX3JlZiRwcm9qZWN0UHJvZ3Jlc3NTID09PSB2b2lkIDAgPyBcIiM1OWE5ODVcIiA6IF9yZWYkcHJvamVjdFByb2dyZXNzUyxcbiAgICAgIF9yZWYkcHJvamVjdEJhY2tncm91biA9IF9yZWYucHJvamVjdEJhY2tncm91bmRDb2xvcixcbiAgICAgIHByb2plY3RCYWNrZ3JvdW5kQ29sb3IgPSBfcmVmJHByb2plY3RCYWNrZ3JvdW4gPT09IHZvaWQgMCA/IFwiI2ZhYzQ2NVwiIDogX3JlZiRwcm9qZWN0QmFja2dyb3VuLFxuICAgICAgX3JlZiRwcm9qZWN0QmFja2dyb3VuMiA9IF9yZWYucHJvamVjdEJhY2tncm91bmRTZWxlY3RlZENvbG9yLFxuICAgICAgcHJvamVjdEJhY2tncm91bmRTZWxlY3RlZENvbG9yID0gX3JlZiRwcm9qZWN0QmFja2dyb3VuMiA9PT0gdm9pZCAwID8gXCIjZjdiYjUzXCIgOiBfcmVmJHByb2plY3RCYWNrZ3JvdW4yLFxuICAgICAgX3JlZiRtaWxlc3RvbmVCYWNrZ3JvID0gX3JlZi5taWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IgPSBfcmVmJG1pbGVzdG9uZUJhY2tncm8gPT09IHZvaWQgMCA/IFwiI2YxYzQ1M1wiIDogX3JlZiRtaWxlc3RvbmVCYWNrZ3JvLFxuICAgICAgX3JlZiRtaWxlc3RvbmVCYWNrZ3JvMiA9IF9yZWYubWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsXG4gICAgICBtaWxlc3RvbmVCYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvciA9IF9yZWYkbWlsZXN0b25lQmFja2dybzIgPT09IHZvaWQgMCA/IFwiI2YyOWU0Y1wiIDogX3JlZiRtaWxlc3RvbmVCYWNrZ3JvMixcbiAgICAgIF9yZWYkcnRsID0gX3JlZi5ydGwsXG4gICAgICBydGwgPSBfcmVmJHJ0bCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJHJ0bCxcbiAgICAgIF9yZWYkaGFuZGxlV2lkdGggPSBfcmVmLmhhbmRsZVdpZHRoLFxuICAgICAgaGFuZGxlV2lkdGggPSBfcmVmJGhhbmRsZVdpZHRoID09PSB2b2lkIDAgPyA4IDogX3JlZiRoYW5kbGVXaWR0aCxcbiAgICAgIF9yZWYkdGltZVN0ZXAgPSBfcmVmLnRpbWVTdGVwLFxuICAgICAgdGltZVN0ZXAgPSBfcmVmJHRpbWVTdGVwID09PSB2b2lkIDAgPyAzMDAwMDAgOiBfcmVmJHRpbWVTdGVwLFxuICAgICAgX3JlZiRhcnJvd0NvbG9yID0gX3JlZi5hcnJvd0NvbG9yLFxuICAgICAgYXJyb3dDb2xvciA9IF9yZWYkYXJyb3dDb2xvciA9PT0gdm9pZCAwID8gXCJncmV5XCIgOiBfcmVmJGFycm93Q29sb3IsXG4gICAgICBfcmVmJGZvbnRGYW1pbHkgPSBfcmVmLmZvbnRGYW1pbHksXG4gICAgICBmb250RmFtaWx5ID0gX3JlZiRmb250RmFtaWx5ID09PSB2b2lkIDAgPyBcIkFyaWFsLCBSb2JvdG8sIE94eWdlbiwgVWJ1bnR1LCBDYW50YXJlbGwsIEZpcmEgU2FucywgRHJvaWQgU2FucywgSGVsdmV0aWNhIE5ldWVcIiA6IF9yZWYkZm9udEZhbWlseSxcbiAgICAgIF9yZWYkZm9udFNpemUgPSBfcmVmLmZvbnRTaXplLFxuICAgICAgZm9udFNpemUgPSBfcmVmJGZvbnRTaXplID09PSB2b2lkIDAgPyBcIjE0cHhcIiA6IF9yZWYkZm9udFNpemUsXG4gICAgICBfcmVmJGFycm93SW5kZW50ID0gX3JlZi5hcnJvd0luZGVudCxcbiAgICAgIGFycm93SW5kZW50ID0gX3JlZiRhcnJvd0luZGVudCA9PT0gdm9pZCAwID8gMjAgOiBfcmVmJGFycm93SW5kZW50LFxuICAgICAgX3JlZiR0b2RheUNvbG9yID0gX3JlZi50b2RheUNvbG9yLFxuICAgICAgdG9kYXlDb2xvciA9IF9yZWYkdG9kYXlDb2xvciA9PT0gdm9pZCAwID8gXCJyZ2JhKDI1MiwgMjQ4LCAyMjcsIDAuNSlcIiA6IF9yZWYkdG9kYXlDb2xvcixcbiAgICAgIHZpZXdEYXRlID0gX3JlZi52aWV3RGF0ZSxcbiAgICAgIF9yZWYkVG9vbHRpcENvbnRlbnQgPSBfcmVmLlRvb2x0aXBDb250ZW50LFxuICAgICAgVG9vbHRpcENvbnRlbnQgPSBfcmVmJFRvb2x0aXBDb250ZW50ID09PSB2b2lkIDAgPyBTdGFuZGFyZFRvb2x0aXBDb250ZW50IDogX3JlZiRUb29sdGlwQ29udGVudCxcbiAgICAgIF9yZWYkVGFza0xpc3RIZWFkZXIgPSBfcmVmLlRhc2tMaXN0SGVhZGVyLFxuICAgICAgVGFza0xpc3RIZWFkZXIgPSBfcmVmJFRhc2tMaXN0SGVhZGVyID09PSB2b2lkIDAgPyBUYXNrTGlzdEhlYWRlckRlZmF1bHQgOiBfcmVmJFRhc2tMaXN0SGVhZGVyLFxuICAgICAgX3JlZiRUYXNrTGlzdFRhYmxlID0gX3JlZi5UYXNrTGlzdFRhYmxlLFxuICAgICAgVGFza0xpc3RUYWJsZSA9IF9yZWYkVGFza0xpc3RUYWJsZSA9PT0gdm9pZCAwID8gVGFza0xpc3RUYWJsZURlZmF1bHQgOiBfcmVmJFRhc2tMaXN0VGFibGUsXG4gICAgICBvbkRhdGVDaGFuZ2UgPSBfcmVmLm9uRGF0ZUNoYW5nZSxcbiAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2UgPSBfcmVmLm9uUHJvZ3Jlc3NDaGFuZ2UsXG4gICAgICBvbkRvdWJsZUNsaWNrID0gX3JlZi5vbkRvdWJsZUNsaWNrLFxuICAgICAgb25DbGljayA9IF9yZWYub25DbGljayxcbiAgICAgIG9uRGVsZXRlID0gX3JlZi5vbkRlbGV0ZSxcbiAgICAgIG9uU2VsZWN0ID0gX3JlZi5vblNlbGVjdCxcbiAgICAgIG9uRXhwYW5kZXJDbGljayA9IF9yZWYub25FeHBhbmRlckNsaWNrO1xuICB2YXIgd3JhcHBlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdmFyIHRhc2tMaXN0UmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9nYW50dERhdGVSYW5nZSA9IGdhbnR0RGF0ZVJhbmdlKHRhc2tzLCB2aWV3TW9kZSwgcHJlU3RlcHNDb3VudCksXG4gICAgICAgIHN0YXJ0RGF0ZSA9IF9nYW50dERhdGVSYW5nZVswXSxcbiAgICAgICAgZW5kRGF0ZSA9IF9nYW50dERhdGVSYW5nZVsxXTtcblxuICAgIHJldHVybiB7XG4gICAgICB2aWV3TW9kZTogdmlld01vZGUsXG4gICAgICBkYXRlczogc2VlZERhdGVzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdmlld01vZGUpXG4gICAgfTtcbiAgfSksXG4gICAgICBkYXRlU2V0dXAgPSBfdXNlU3RhdGVbMF0sXG4gICAgICBzZXREYXRlU2V0dXAgPSBfdXNlU3RhdGVbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTIgPSB1c2VTdGF0ZSh1bmRlZmluZWQpLFxuICAgICAgY3VycmVudFZpZXdEYXRlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldEN1cnJlbnRWaWV3RGF0ZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIHRhc2tMaXN0V2lkdGggPSBfdXNlU3RhdGUzWzBdLFxuICAgICAgc2V0VGFza0xpc3RXaWR0aCA9IF91c2VTdGF0ZTNbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTQgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIHN2Z0NvbnRhaW5lcldpZHRoID0gX3VzZVN0YXRlNFswXSxcbiAgICAgIHNldFN2Z0NvbnRhaW5lcldpZHRoID0gX3VzZVN0YXRlNFsxXTtcblxuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKGdhbnR0SGVpZ2h0KSxcbiAgICAgIHN2Z0NvbnRhaW5lckhlaWdodCA9IF91c2VTdGF0ZTVbMF0sXG4gICAgICBzZXRTdmdDb250YWluZXJIZWlnaHQgPSBfdXNlU3RhdGU1WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU2ID0gdXNlU3RhdGUoW10pLFxuICAgICAgYmFyVGFza3MgPSBfdXNlU3RhdGU2WzBdLFxuICAgICAgc2V0QmFyVGFza3MgPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU3ID0gdXNlU3RhdGUoe1xuICAgIGFjdGlvbjogXCJcIlxuICB9KSxcbiAgICAgIGdhbnR0RXZlbnQgPSBfdXNlU3RhdGU3WzBdLFxuICAgICAgc2V0R2FudHRFdmVudCA9IF91c2VTdGF0ZTdbMV07XG5cbiAgdmFyIHRhc2tIZWlnaHQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcm93SGVpZ2h0ICogYmFyRmlsbCAvIDEwMDtcbiAgfSwgW3Jvd0hlaWdodCwgYmFyRmlsbF0pO1xuXG4gIHZhciBfdXNlU3RhdGU4ID0gdXNlU3RhdGUoKSxcbiAgICAgIHNlbGVjdGVkVGFzayA9IF91c2VTdGF0ZThbMF0sXG4gICAgICBzZXRTZWxlY3RlZFRhc2sgPSBfdXNlU3RhdGU4WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU5ID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBmYWlsZWRUYXNrID0gX3VzZVN0YXRlOVswXSxcbiAgICAgIHNldEZhaWxlZFRhc2sgPSBfdXNlU3RhdGU5WzFdO1xuXG4gIHZhciBzdmdXaWR0aCA9IGRhdGVTZXR1cC5kYXRlcy5sZW5ndGggKiBjb2x1bW5XaWR0aDtcbiAgdmFyIGdhbnR0RnVsbEhlaWdodCA9IGJhclRhc2tzLmxlbmd0aCAqIHJvd0hlaWdodDtcblxuICB2YXIgX3VzZVN0YXRlMTAgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIHNjcm9sbFkgPSBfdXNlU3RhdGUxMFswXSxcbiAgICAgIHNldFNjcm9sbFkgPSBfdXNlU3RhdGUxMFsxXTtcblxuICB2YXIgX3VzZVN0YXRlMTEgPSB1c2VTdGF0ZSgtMSksXG4gICAgICBzY3JvbGxYID0gX3VzZVN0YXRlMTFbMF0sXG4gICAgICBzZXRTY3JvbGxYID0gX3VzZVN0YXRlMTFbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTEyID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgaWdub3JlU2Nyb2xsRXZlbnQgPSBfdXNlU3RhdGUxMlswXSxcbiAgICAgIHNldElnbm9yZVNjcm9sbEV2ZW50ID0gX3VzZVN0YXRlMTJbMV07XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlsdGVyZWRUYXNrcztcblxuICAgIGlmIChvbkV4cGFuZGVyQ2xpY2spIHtcbiAgICAgIGZpbHRlcmVkVGFza3MgPSByZW1vdmVIaWRkZW5UYXNrcyh0YXNrcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbHRlcmVkVGFza3MgPSB0YXNrcztcbiAgICB9XG5cbiAgICBmaWx0ZXJlZFRhc2tzID0gZmlsdGVyZWRUYXNrcy5zb3J0KHNvcnRUYXNrcyk7XG5cbiAgICB2YXIgX2dhbnR0RGF0ZVJhbmdlMiA9IGdhbnR0RGF0ZVJhbmdlKGZpbHRlcmVkVGFza3MsIHZpZXdNb2RlLCBwcmVTdGVwc0NvdW50KSxcbiAgICAgICAgc3RhcnREYXRlID0gX2dhbnR0RGF0ZVJhbmdlMlswXSxcbiAgICAgICAgZW5kRGF0ZSA9IF9nYW50dERhdGVSYW5nZTJbMV07XG5cbiAgICB2YXIgbmV3RGF0ZXMgPSBzZWVkRGF0ZXMoc3RhcnREYXRlLCBlbmREYXRlLCB2aWV3TW9kZSk7XG5cbiAgICBpZiAocnRsKSB7XG4gICAgICBuZXdEYXRlcyA9IG5ld0RhdGVzLnJldmVyc2UoKTtcblxuICAgICAgaWYgKHNjcm9sbFggPT09IC0xKSB7XG4gICAgICAgIHNldFNjcm9sbFgobmV3RGF0ZXMubGVuZ3RoICogY29sdW1uV2lkdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldERhdGVTZXR1cCh7XG4gICAgICBkYXRlczogbmV3RGF0ZXMsXG4gICAgICB2aWV3TW9kZTogdmlld01vZGVcbiAgICB9KTtcbiAgICBzZXRCYXJUYXNrcyhjb252ZXJ0VG9CYXJUYXNrcyhmaWx0ZXJlZFRhc2tzLCBuZXdEYXRlcywgY29sdW1uV2lkdGgsIHJvd0hlaWdodCwgdGFza0hlaWdodCwgYmFyQ29ybmVyUmFkaXVzLCBoYW5kbGVXaWR0aCwgcnRsLCBiYXJQcm9ncmVzc0NvbG9yLCBiYXJQcm9ncmVzc1NlbGVjdGVkQ29sb3IsIGJhckJhY2tncm91bmRDb2xvciwgYmFyQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIHByb2plY3RQcm9ncmVzc0NvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZENvbG9yLCBwcm9qZWN0QmFja2dyb3VuZFNlbGVjdGVkQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRDb2xvciwgbWlsZXN0b25lQmFja2dyb3VuZFNlbGVjdGVkQ29sb3IpKTtcbiAgfSwgW3Rhc2tzLCB2aWV3TW9kZSwgcHJlU3RlcHNDb3VudCwgcm93SGVpZ2h0LCBiYXJDb3JuZXJSYWRpdXMsIGNvbHVtbldpZHRoLCB0YXNrSGVpZ2h0LCBoYW5kbGVXaWR0aCwgYmFyUHJvZ3Jlc3NDb2xvciwgYmFyUHJvZ3Jlc3NTZWxlY3RlZENvbG9yLCBiYXJCYWNrZ3JvdW5kQ29sb3IsIGJhckJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBwcm9qZWN0UHJvZ3Jlc3NDb2xvciwgcHJvamVjdFByb2dyZXNzU2VsZWN0ZWRDb2xvciwgcHJvamVjdEJhY2tncm91bmRDb2xvciwgcHJvamVjdEJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBtaWxlc3RvbmVCYWNrZ3JvdW5kQ29sb3IsIG1pbGVzdG9uZUJhY2tncm91bmRTZWxlY3RlZENvbG9yLCBydGwsIHNjcm9sbFgsIG9uRXhwYW5kZXJDbGlja10pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICh2aWV3TW9kZSA9PT0gZGF0ZVNldHVwLnZpZXdNb2RlICYmICh2aWV3RGF0ZSAmJiAhY3VycmVudFZpZXdEYXRlIHx8IHZpZXdEYXRlICYmIChjdXJyZW50Vmlld0RhdGUgPT09IG51bGwgfHwgY3VycmVudFZpZXdEYXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50Vmlld0RhdGUudmFsdWVPZigpKSAhPT0gdmlld0RhdGUudmFsdWVPZigpKSkge1xuICAgICAgdmFyIGRhdGVzID0gZGF0ZVNldHVwLmRhdGVzO1xuICAgICAgdmFyIGluZGV4ID0gZGF0ZXMuZmluZEluZGV4KGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgIHJldHVybiB2aWV3RGF0ZS52YWx1ZU9mKCkgPj0gZC52YWx1ZU9mKCkgJiYgaSArIDEgIT09IGRhdGVzLmxlbmd0aCAmJiB2aWV3RGF0ZS52YWx1ZU9mKCkgPCBkYXRlc1tpICsgMV0udmFsdWVPZigpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRDdXJyZW50Vmlld0RhdGUodmlld0RhdGUpO1xuICAgICAgc2V0U2Nyb2xsWChjb2x1bW5XaWR0aCAqIGluZGV4KTtcbiAgICB9XG4gIH0sIFt2aWV3RGF0ZSwgY29sdW1uV2lkdGgsIGRhdGVTZXR1cC5kYXRlcywgZGF0ZVNldHVwLnZpZXdNb2RlLCB2aWV3TW9kZSwgY3VycmVudFZpZXdEYXRlLCBzZXRDdXJyZW50Vmlld0RhdGVdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hhbmdlZFRhc2sgPSBnYW50dEV2ZW50LmNoYW5nZWRUYXNrLFxuICAgICAgICBhY3Rpb24gPSBnYW50dEV2ZW50LmFjdGlvbjtcblxuICAgIGlmIChjaGFuZ2VkVGFzaykge1xuICAgICAgaWYgKGFjdGlvbiA9PT0gXCJkZWxldGVcIikge1xuICAgICAgICBzZXRHYW50dEV2ZW50KHtcbiAgICAgICAgICBhY3Rpb246IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEJhclRhc2tzKGJhclRhc2tzLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiB0LmlkICE9PSBjaGFuZ2VkVGFzay5pZDtcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwibW92ZVwiIHx8IGFjdGlvbiA9PT0gXCJlbmRcIiB8fCBhY3Rpb24gPT09IFwic3RhcnRcIiB8fCBhY3Rpb24gPT09IFwicHJvZ3Jlc3NcIikge1xuICAgICAgICB2YXIgcHJldlN0YXRlVGFzayA9IGJhclRhc2tzLmZpbmQoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gdC5pZCA9PT0gY2hhbmdlZFRhc2suaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChwcmV2U3RhdGVUYXNrICYmIChwcmV2U3RhdGVUYXNrLnN0YXJ0LmdldFRpbWUoKSAhPT0gY2hhbmdlZFRhc2suc3RhcnQuZ2V0VGltZSgpIHx8IHByZXZTdGF0ZVRhc2suZW5kLmdldFRpbWUoKSAhPT0gY2hhbmdlZFRhc2suZW5kLmdldFRpbWUoKSB8fCBwcmV2U3RhdGVUYXNrLnByb2dyZXNzICE9PSBjaGFuZ2VkVGFzay5wcm9ncmVzcykpIHtcbiAgICAgICAgICB2YXIgbmV3VGFza0xpc3QgPSBiYXJUYXNrcy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0LmlkID09PSBjaGFuZ2VkVGFzay5pZCA/IGNoYW5nZWRUYXNrIDogdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRCYXJUYXNrcyhuZXdUYXNrTGlzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtnYW50dEV2ZW50LCBiYXJUYXNrc10pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChmYWlsZWRUYXNrKSB7XG4gICAgICBzZXRCYXJUYXNrcyhiYXJUYXNrcy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuaWQgIT09IGZhaWxlZFRhc2suaWQgPyB0IDogZmFpbGVkVGFzaztcbiAgICAgIH0pKTtcbiAgICAgIHNldEZhaWxlZFRhc2sobnVsbCk7XG4gICAgfVxuICB9LCBbZmFpbGVkVGFzaywgYmFyVGFza3NdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWxpc3RDZWxsV2lkdGgpIHtcbiAgICAgIHNldFRhc2tMaXN0V2lkdGgoMCk7XG4gICAgfVxuXG4gICAgaWYgKHRhc2tMaXN0UmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldFRhc2tMaXN0V2lkdGgodGFza0xpc3RSZWYuY3VycmVudC5vZmZzZXRXaWR0aCk7XG4gICAgfVxuICB9LCBbdGFza0xpc3RSZWYsIGxpc3RDZWxsV2lkdGhdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod3JhcHBlclJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRTdmdDb250YWluZXJXaWR0aCh3cmFwcGVyUmVmLmN1cnJlbnQub2Zmc2V0V2lkdGggLSB0YXNrTGlzdFdpZHRoKTtcbiAgICB9XG4gIH0sIFt3cmFwcGVyUmVmLCB0YXNrTGlzdFdpZHRoXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGdhbnR0SGVpZ2h0KSB7XG4gICAgICBzZXRTdmdDb250YWluZXJIZWlnaHQoZ2FudHRIZWlnaHQgKyBoZWFkZXJIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTdmdDb250YWluZXJIZWlnaHQodGFza3MubGVuZ3RoICogcm93SGVpZ2h0ICsgaGVhZGVySGVpZ2h0KTtcbiAgICB9XG4gIH0sIFtnYW50dEhlaWdodCwgdGFza3MsIGhlYWRlckhlaWdodCwgcm93SGVpZ2h0XSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF93cmFwcGVyUmVmJGN1cnJlbnQ7XG5cbiAgICB2YXIgaGFuZGxlV2hlZWwgPSBmdW5jdGlvbiBoYW5kbGVXaGVlbChldmVudCkge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmRlbHRhWCkge1xuICAgICAgICB2YXIgc2Nyb2xsTW92ZSA9IGV2ZW50LmRlbHRhWCA/IGV2ZW50LmRlbHRhWCA6IGV2ZW50LmRlbHRhWTtcbiAgICAgICAgdmFyIG5ld1Njcm9sbFggPSBzY3JvbGxYICsgc2Nyb2xsTW92ZTtcblxuICAgICAgICBpZiAobmV3U2Nyb2xsWCA8IDApIHtcbiAgICAgICAgICBuZXdTY3JvbGxYID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdTY3JvbGxYID4gc3ZnV2lkdGgpIHtcbiAgICAgICAgICBuZXdTY3JvbGxYID0gc3ZnV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRTY3JvbGxYKG5ld1Njcm9sbFgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIGlmIChnYW50dEhlaWdodCkge1xuICAgICAgICB2YXIgbmV3U2Nyb2xsWSA9IHNjcm9sbFkgKyBldmVudC5kZWx0YVk7XG5cbiAgICAgICAgaWYgKG5ld1Njcm9sbFkgPCAwKSB7XG4gICAgICAgICAgbmV3U2Nyb2xsWSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3U2Nyb2xsWSA+IGdhbnR0RnVsbEhlaWdodCAtIGdhbnR0SGVpZ2h0KSB7XG4gICAgICAgICAgbmV3U2Nyb2xsWSA9IGdhbnR0RnVsbEhlaWdodCAtIGdhbnR0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1Njcm9sbFkgIT09IHNjcm9sbFkpIHtcbiAgICAgICAgICBzZXRTY3JvbGxZKG5ld1Njcm9sbFkpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc2V0SWdub3JlU2Nyb2xsRXZlbnQodHJ1ZSk7XG4gICAgfTtcblxuICAgIChfd3JhcHBlclJlZiRjdXJyZW50ID0gd3JhcHBlclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfd3JhcHBlclJlZiRjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd3JhcHBlclJlZiRjdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVXaGVlbCwge1xuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF93cmFwcGVyUmVmJGN1cnJlbnQyO1xuXG4gICAgICAoX3dyYXBwZXJSZWYkY3VycmVudDIgPSB3cmFwcGVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF93cmFwcGVyUmVmJGN1cnJlbnQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd3JhcHBlclJlZiRjdXJyZW50Mi5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlV2hlZWwpO1xuICAgIH07XG4gIH0sIFt3cmFwcGVyUmVmLCBzY3JvbGxZLCBzY3JvbGxYLCBnYW50dEhlaWdodCwgc3ZnV2lkdGgsIHJ0bCwgZ2FudHRGdWxsSGVpZ2h0XSk7XG5cbiAgdmFyIGhhbmRsZVNjcm9sbFkgPSBmdW5jdGlvbiBoYW5kbGVTY3JvbGxZKGV2ZW50KSB7XG4gICAgaWYgKHNjcm9sbFkgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQuc2Nyb2xsVG9wICYmICFpZ25vcmVTY3JvbGxFdmVudCkge1xuICAgICAgc2V0U2Nyb2xsWShldmVudC5jdXJyZW50VGFyZ2V0LnNjcm9sbFRvcCk7XG4gICAgICBzZXRJZ25vcmVTY3JvbGxFdmVudCh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SWdub3JlU2Nyb2xsRXZlbnQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGFuZGxlU2Nyb2xsWCA9IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFgoZXZlbnQpIHtcbiAgICBpZiAoc2Nyb2xsWCAhPT0gZXZlbnQuY3VycmVudFRhcmdldC5zY3JvbGxMZWZ0ICYmICFpZ25vcmVTY3JvbGxFdmVudCkge1xuICAgICAgc2V0U2Nyb2xsWChldmVudC5jdXJyZW50VGFyZ2V0LnNjcm9sbExlZnQpO1xuICAgICAgc2V0SWdub3JlU2Nyb2xsRXZlbnQodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldElnbm9yZVNjcm9sbEV2ZW50KGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGhhbmRsZUtleURvd24gPSBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbmV3U2Nyb2xsWSA9IHNjcm9sbFk7XG4gICAgdmFyIG5ld1Njcm9sbFggPSBzY3JvbGxYO1xuICAgIHZhciBpc1ggPSB0cnVlO1xuXG4gICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgIGNhc2UgXCJEb3duXCI6XG4gICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICAgIG5ld1Njcm9sbFkgKz0gcm93SGVpZ2h0O1xuICAgICAgICBpc1ggPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJVcFwiOlxuICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgbmV3U2Nyb2xsWSAtPSByb3dIZWlnaHQ7XG4gICAgICAgIGlzWCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBcIkxlZnRcIjpcbiAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcbiAgICAgICAgbmV3U2Nyb2xsWCAtPSBjb2x1bW5XaWR0aDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJSaWdodFwiOlxuICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgbmV3U2Nyb2xsWCArPSBjb2x1bW5XaWR0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKGlzWCkge1xuICAgICAgaWYgKG5ld1Njcm9sbFggPCAwKSB7XG4gICAgICAgIG5ld1Njcm9sbFggPSAwO1xuICAgICAgfSBlbHNlIGlmIChuZXdTY3JvbGxYID4gc3ZnV2lkdGgpIHtcbiAgICAgICAgbmV3U2Nyb2xsWCA9IHN2Z1dpZHRoO1xuICAgICAgfVxuXG4gICAgICBzZXRTY3JvbGxYKG5ld1Njcm9sbFgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobmV3U2Nyb2xsWSA8IDApIHtcbiAgICAgICAgbmV3U2Nyb2xsWSA9IDA7XG4gICAgICB9IGVsc2UgaWYgKG5ld1Njcm9sbFkgPiBnYW50dEZ1bGxIZWlnaHQgLSBnYW50dEhlaWdodCkge1xuICAgICAgICBuZXdTY3JvbGxZID0gZ2FudHRGdWxsSGVpZ2h0IC0gZ2FudHRIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHNldFNjcm9sbFkobmV3U2Nyb2xsWSk7XG4gICAgfVxuXG4gICAgc2V0SWdub3JlU2Nyb2xsRXZlbnQodHJ1ZSk7XG4gIH07XG5cbiAgdmFyIGhhbmRsZVNlbGVjdGVkVGFzayA9IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGVkVGFzayh0YXNrSWQpIHtcbiAgICB2YXIgbmV3U2VsZWN0ZWRUYXNrID0gYmFyVGFza3MuZmluZChmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIHQuaWQgPT09IHRhc2tJZDtcbiAgICB9KTtcbiAgICB2YXIgb2xkU2VsZWN0ZWRUYXNrID0gYmFyVGFza3MuZmluZChmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuICEhc2VsZWN0ZWRUYXNrICYmIHQuaWQgPT09IHNlbGVjdGVkVGFzay5pZDtcbiAgICB9KTtcblxuICAgIGlmIChvblNlbGVjdCkge1xuICAgICAgaWYgKG9sZFNlbGVjdGVkVGFzaykge1xuICAgICAgICBvblNlbGVjdChvbGRTZWxlY3RlZFRhc2ssIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1NlbGVjdGVkVGFzaykge1xuICAgICAgICBvblNlbGVjdChuZXdTZWxlY3RlZFRhc2ssIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldFNlbGVjdGVkVGFzayhuZXdTZWxlY3RlZFRhc2spO1xuICB9O1xuXG4gIHZhciBoYW5kbGVFeHBhbmRlckNsaWNrID0gZnVuY3Rpb24gaGFuZGxlRXhwYW5kZXJDbGljayh0YXNrKSB7XG4gICAgaWYgKG9uRXhwYW5kZXJDbGljayAmJiB0YXNrLmhpZGVDaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBvbkV4cGFuZGVyQ2xpY2soX2V4dGVuZHMoe30sIHRhc2ssIHtcbiAgICAgICAgaGlkZUNoaWxkcmVuOiAhdGFzay5oaWRlQ2hpbGRyZW5cbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdyaWRQcm9wcyA9IHtcbiAgICBjb2x1bW5XaWR0aDogY29sdW1uV2lkdGgsXG4gICAgc3ZnV2lkdGg6IHN2Z1dpZHRoLFxuICAgIHRhc2tzOiB0YXNrcyxcbiAgICByb3dIZWlnaHQ6IHJvd0hlaWdodCxcbiAgICBkYXRlczogZGF0ZVNldHVwLmRhdGVzLFxuICAgIHRvZGF5Q29sb3I6IHRvZGF5Q29sb3IsXG4gICAgcnRsOiBydGxcbiAgfTtcbiAgdmFyIGNhbGVuZGFyUHJvcHMgPSB7XG4gICAgZGF0ZVNldHVwOiBkYXRlU2V0dXAsXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgdmlld01vZGU6IHZpZXdNb2RlLFxuICAgIGhlYWRlckhlaWdodDogaGVhZGVySGVpZ2h0LFxuICAgIGNvbHVtbldpZHRoOiBjb2x1bW5XaWR0aCxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICBydGw6IHJ0bFxuICB9O1xuICB2YXIgYmFyUHJvcHMgPSB7XG4gICAgdGFza3M6IGJhclRhc2tzLFxuICAgIGRhdGVzOiBkYXRlU2V0dXAuZGF0ZXMsXG4gICAgZ2FudHRFdmVudDogZ2FudHRFdmVudCxcbiAgICBzZWxlY3RlZFRhc2s6IHNlbGVjdGVkVGFzayxcbiAgICByb3dIZWlnaHQ6IHJvd0hlaWdodCxcbiAgICB0YXNrSGVpZ2h0OiB0YXNrSGVpZ2h0LFxuICAgIGNvbHVtbldpZHRoOiBjb2x1bW5XaWR0aCxcbiAgICBhcnJvd0NvbG9yOiBhcnJvd0NvbG9yLFxuICAgIHRpbWVTdGVwOiB0aW1lU3RlcCxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICBhcnJvd0luZGVudDogYXJyb3dJbmRlbnQsXG4gICAgc3ZnV2lkdGg6IHN2Z1dpZHRoLFxuICAgIHJ0bDogcnRsLFxuICAgIHNldEdhbnR0RXZlbnQ6IHNldEdhbnR0RXZlbnQsXG4gICAgc2V0RmFpbGVkVGFzazogc2V0RmFpbGVkVGFzayxcbiAgICBzZXRTZWxlY3RlZFRhc2s6IGhhbmRsZVNlbGVjdGVkVGFzayxcbiAgICBvbkRhdGVDaGFuZ2U6IG9uRGF0ZUNoYW5nZSxcbiAgICBvblByb2dyZXNzQ2hhbmdlOiBvblByb2dyZXNzQ2hhbmdlLFxuICAgIG9uRG91YmxlQ2xpY2s6IG9uRG91YmxlQ2xpY2ssXG4gICAgb25DbGljazogb25DbGljayxcbiAgICBvbkRlbGV0ZTogb25EZWxldGVcbiAgfTtcbiAgdmFyIHRhYmxlUHJvcHMgPSB7XG4gICAgcm93SGVpZ2h0OiByb3dIZWlnaHQsXG4gICAgcm93V2lkdGg6IGxpc3RDZWxsV2lkdGgsXG4gICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICBmb250U2l6ZTogZm9udFNpemUsXG4gICAgdGFza3M6IGJhclRhc2tzLFxuICAgIGxvY2FsZTogbG9jYWxlLFxuICAgIGhlYWRlckhlaWdodDogaGVhZGVySGVpZ2h0LFxuICAgIHNjcm9sbFk6IHNjcm9sbFksXG4gICAgZ2FudHRIZWlnaHQ6IGdhbnR0SGVpZ2h0LFxuICAgIGhvcml6b250YWxDb250YWluZXJDbGFzczogc3R5bGVzJDkuaG9yaXpvbnRhbENvbnRhaW5lcixcbiAgICBzZWxlY3RlZFRhc2s6IHNlbGVjdGVkVGFzayxcbiAgICB0YXNrTGlzdFJlZjogdGFza0xpc3RSZWYsXG4gICAgc2V0U2VsZWN0ZWRUYXNrOiBoYW5kbGVTZWxlY3RlZFRhc2ssXG4gICAgb25FeHBhbmRlckNsaWNrOiBoYW5kbGVFeHBhbmRlckNsaWNrLFxuICAgIFRhc2tMaXN0SGVhZGVyOiBUYXNrTGlzdEhlYWRlcixcbiAgICBUYXNrTGlzdFRhYmxlOiBUYXNrTGlzdFRhYmxlXG4gIH07XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogc3R5bGVzJDkud3JhcHBlcixcbiAgICBvbktleURvd246IGhhbmRsZUtleURvd24sXG4gICAgdGFiSW5kZXg6IDAsXG4gICAgcmVmOiB3cmFwcGVyUmVmXG4gIH0sIGxpc3RDZWxsV2lkdGggJiYgUmVhY3QuY3JlYXRlRWxlbWVudChUYXNrTGlzdCwgT2JqZWN0LmFzc2lnbih7fSwgdGFibGVQcm9wcykpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFRhc2tHYW50dCwge1xuICAgIGdyaWRQcm9wczogZ3JpZFByb3BzLFxuICAgIGNhbGVuZGFyUHJvcHM6IGNhbGVuZGFyUHJvcHMsXG4gICAgYmFyUHJvcHM6IGJhclByb3BzLFxuICAgIGdhbnR0SGVpZ2h0OiBnYW50dEhlaWdodCxcbiAgICBzY3JvbGxZOiBzY3JvbGxZLFxuICAgIHNjcm9sbFg6IHNjcm9sbFhcbiAgfSksIGdhbnR0RXZlbnQuY2hhbmdlZFRhc2sgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7XG4gICAgYXJyb3dJbmRlbnQ6IGFycm93SW5kZW50LFxuICAgIHJvd0hlaWdodDogcm93SGVpZ2h0LFxuICAgIHN2Z0NvbnRhaW5lckhlaWdodDogc3ZnQ29udGFpbmVySGVpZ2h0LFxuICAgIHN2Z0NvbnRhaW5lcldpZHRoOiBzdmdDb250YWluZXJXaWR0aCxcbiAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICBzY3JvbGxYOiBzY3JvbGxYLFxuICAgIHNjcm9sbFk6IHNjcm9sbFksXG4gICAgdGFzazogZ2FudHRFdmVudC5jaGFuZ2VkVGFzayxcbiAgICBoZWFkZXJIZWlnaHQ6IGhlYWRlckhlaWdodCxcbiAgICB0YXNrTGlzdFdpZHRoOiB0YXNrTGlzdFdpZHRoLFxuICAgIFRvb2x0aXBDb250ZW50OiBUb29sdGlwQ29udGVudCxcbiAgICBydGw6IHJ0bCxcbiAgICBzdmdXaWR0aDogc3ZnV2lkdGhcbiAgfSksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVmVydGljYWxTY3JvbGwsIHtcbiAgICBnYW50dEZ1bGxIZWlnaHQ6IGdhbnR0RnVsbEhlaWdodCxcbiAgICBnYW50dEhlaWdodDogZ2FudHRIZWlnaHQsXG4gICAgaGVhZGVySGVpZ2h0OiBoZWFkZXJIZWlnaHQsXG4gICAgc2Nyb2xsOiBzY3JvbGxZLFxuICAgIG9uU2Nyb2xsOiBoYW5kbGVTY3JvbGxZLFxuICAgIHJ0bDogcnRsXG4gIH0pKSwgUmVhY3QuY3JlYXRlRWxlbWVudChIb3Jpem9udGFsU2Nyb2xsLCB7XG4gICAgc3ZnV2lkdGg6IHN2Z1dpZHRoLFxuICAgIHRhc2tMaXN0V2lkdGg6IHRhc2tMaXN0V2lkdGgsXG4gICAgc2Nyb2xsOiBzY3JvbGxYLFxuICAgIHJ0bDogcnRsLFxuICAgIG9uU2Nyb2xsOiBoYW5kbGVTY3JvbGxYXG4gIH0pKTtcbn07XG5cbmV4cG9ydCB7IEdhbnR0LCBWaWV3TW9kZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubW9kZXJuLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/gantt-task-react/dist/index.modern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/gantt-task-react/dist/index.css":
/*!******************************************************!*\
  !*** ./node_modules/gantt-task-react/dist/index.css ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"ac371838a449\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZ2FudHQtdGFzay1yZWFjdC9kaXN0L2luZGV4LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsiL1VzZXJzL2hlbWFudGhyZWRkeS9EZXNrdG9wL1Byb2plY3QvY2xpZW50L25vZGVfbW9kdWxlcy9nYW50dC10YXNrLXJlYWN0L2Rpc3QvaW5kZXguY3NzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiYWMzNzE4MzhhNDQ5XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/gantt-task-react/dist/index.css\n");

/***/ })

};
;